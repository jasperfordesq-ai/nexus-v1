/* ============================================
   CIVICONE GOALS SHOW PAGE
   Extracted from views/civicone/goals/show.php
   ============================================ */

/* ============================================
   GOLD STANDARD - Native App Features
   ============================================ */

/* Offline Banner */
.offline-banner {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: var(--z-emergency);
    padding: var(--space-3) var(--space-5);
    background: linear-gradient(135deg, var(--color-red-500), var(--color-red-600));
    color: white;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    transform: translateY(-100%);
    transition: transform var(--transition-base);
}

.offline-banner.visible {
    transform: translateY(0);
}


.glass-box {
    /* animation removed for GOV.UK compliance */
}

/* Button Press States */
.glass-pill-btn:active,
button:active {
    transform: scale(0.96) !important;
    transition: transform 0.1s ease !important;
}

/* Touch Targets - WCAG 2.1 AA (44px minimum) */
.glass-pill-btn,
button {
    min-height: var(--space-11);
}

/* Focus Visible */
.glass-pill-btn:focus-visible,
button:focus-visible,
a:focus-visible {
    outline: 3px solid var(--color-pink-600-alpha-50);
    outline-offset: var(--space-1);
}

/* Smooth Scroll */
html {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
}

/* Mobile Responsive Enhancements */
@media (max-width: 768px) {
    .glass-pill-btn,
    button {
        min-height: var(--space-12);
    }
}

/* ============================================
   SCOPED STYLES for #unique-glass-page-wrapper
   ============================================ */

#unique-glass-page-wrapper {
    /*
       --- DEFAULT / LIGHT MODE VARIABLES (Fallback) ---
    */
    --glass-bg: var(--color-white-alpha-55);
    --glass-border: var(--color-white-alpha-40);
    --text-color: var(--color-slate-800);
    --text-muted: var(--color-slate-600);
    --accent-color: var(--color-pink-600);
    /* Pink/Rose for Goals */
    --success-color: var(--color-green-600);
    --heading-gradient: linear-gradient(135deg, var(--color-pink-700) 0%, var(--color-pink-600) 100%);

    /* Subtle iridescent shadow for light mode */
    --box-shadow:
        0 var(--space-2) var(--space-8) 0 var(--color-glass-shadow),
        inset 0 0 0 1px var(--color-white-alpha-20);

    --holographic-glow: 0 0 var(--space-5) var(--color-magenta-alpha-5), 0 0 var(--space-10) var(--color-rose-glow-alpha-5);

    /* Form Fields & Pills */
    --pill-bg: var(--color-white-alpha-25);
    --pill-border: 1px solid var(--color-white-alpha-40);
    --pill-shadow: 0 var(--space-1) var(--space-3) var(--color-black-alpha-5);

    /* Status Card Variables (Light) */
    --status-blue-bg: var(--color-blue-alpha-15);
    --status-blue-border: var(--color-blue-alpha-30);
    --status-blue-text: var(--color-blue-700);

    --status-amber-bg: var(--color-amber-500-alpha-15);
    --status-amber-border: var(--color-amber-500-alpha-30);
    --status-amber-text: var(--color-amber-700);

    --status-gray-bg: var(--color-slate-400-alpha-15);
    --status-gray-border: var(--color-slate-400-alpha-30);
    --status-gray-text: var(--color-slate-600);

    /* Layout & Alignment */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 80vh;
    padding: var(--space-12) var(--space-5);
    box-sizing: border-box;

    /* Typography Defaults */
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    color: var(--text-color);
    line-height: var(--line-height-normal);

    /* Background: Adaptive Mesh Gradient (Pink/Rose for Goals) */
    background: radial-gradient(circle at 50% 0%, var(--color-pink-50) 0%, var(--color-pink-100) 100%);
    background-attachment: fixed;
}

/*
   --- THEME SYNC SELECTORS ---
   Using html[data-theme] as requested
*/

/* LIGHT MODE EXPLICIT */
html[data-theme="light"] #unique-glass-page-wrapper {
    --glass-bg: var(--color-white-alpha-55);
    --glass-border: var(--color-white-alpha-40);
    --text-color: var(--color-slate-800);
    --text-muted: var(--color-slate-600);
    --heading-gradient: linear-gradient(135deg, var(--color-pink-700) 0%, var(--color-pink-600) 100%);
    --box-shadow:
        0 var(--space-2) var(--space-8) 0 var(--color-glass-shadow),
        inset 0 0 0 1px var(--color-white-alpha-20);
    --holographic-glow: 0 0 var(--space-5) var(--color-magenta-alpha-5), 0 0 var(--space-10) var(--color-rose-glow-alpha-5);
    --pill-bg: var(--color-white-alpha-25);

    --status-blue-bg: var(--color-blue-alpha-15);
    --status-blue-border: var(--color-blue-alpha-30);
    --status-blue-text: var(--color-blue-700);

    --status-amber-bg: var(--color-amber-500-alpha-15);
    --status-amber-border: var(--color-amber-500-alpha-30);
    --status-amber-text: var(--color-amber-700);

    --status-gray-bg: var(--color-slate-400-alpha-15);
    --status-gray-border: var(--color-slate-400-alpha-30);
    --status-gray-text: var(--color-slate-600);

    background: radial-gradient(circle at 50% 0%, var(--color-pink-50) 0%, var(--color-pink-100) 100%);
}

/* DARK MODE EXPLICIT */
html[data-theme="dark"] #unique-glass-page-wrapper {
    --glass-bg: var(--color-zinc-900-alpha-45);
    --glass-border: var(--color-white-alpha-15);
    --text-color: var(--color-pink-100);
    --text-muted: var(--color-white-alpha-70);
    --accent-color: var(--color-pink-400);
    --heading-gradient: linear-gradient(135deg, var(--color-white) 0%, var(--color-pink-200) 100%);

    /* Vivid Dark Mode Shadows */
    --box-shadow:
        0 var(--space-2) var(--space-8) 0 var(--color-black-alpha-40),
        inset 0 0 0 1px var(--color-white-alpha-5);

    --holographic-glow:
        0 0 var(--space-8) var(--color-pink-alpha-15),
        0 0 var(--space-16) var(--color-purple-alpha-15);

    --pill-bg: var(--color-zinc-900-alpha-65);
    --pill-border: 2px solid var(--color-white-alpha-10);

    /* Dark Mode Status Cards */
    --status-blue-bg: var(--color-blue-900-alpha-30);
    --status-blue-border: var(--color-blue-alpha-30);
    --status-blue-text: var(--color-blue-300);

    --status-amber-bg: var(--color-amber-900-alpha-30);
    --status-amber-border: var(--color-amber-500-alpha-30);
    --status-amber-text: var(--color-amber-300);

    --status-gray-bg: var(--color-slate-alpha-30);
    --status-gray-border: var(--color-slate-400-alpha-20);
    --status-gray-text: var(--color-slate-400);

    background: radial-gradient(circle at 50% 0%, rgb(39, 10, 25) 0%, rgb(20, 10, 20) 90%);
}


/* The Glass Container */
#unique-glass-page-wrapper .glass-box {
    position: relative;
    width: 95%;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;

    /* High-End Glass Effect */
    background: var(--glass-bg);
    /* Holographic Borders & Shadows */
    border-radius: var(--radius-2xl);
    border: 1px solid var(--glass-border);
    box-shadow: var(--box-shadow), var(--holographic-glow);

    padding: var(--space-12);
    overflow: hidden;
    transition: background var(--transition-base), box-shadow var(--transition-base);
}

/* Iridescent Top Edge */
#unique-glass-page-wrapper .glass-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-pink-400-alpha-60), var(--color-purple-alpha-60), transparent);
    z-index: var(--z-raised);
}

/* Header Section */
#unique-glass-page-wrapper .page-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-10);
    flex-wrap: wrap;
    gap: var(--space-5);
}

#unique-glass-page-wrapper .back-link {
    color: var(--text-muted);
    text-decoration: none;
    font-weight: var(--font-weight-medium);
    font-size: var(--font-size-sm);
    display: inline-flex;
    align-items: center;
    margin-bottom: var(--space-2);
    transition: color var(--transition-fast);
}

#unique-glass-page-wrapper .back-link:hover {
    color: var(--accent-color);
}

#unique-glass-page-wrapper h1 {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    color: var(--text-color);
    margin: var(--space-1) 0 0 0;
    letter-spacing: -0.02em;
    line-height: var(--line-height-tight);
}

#unique-glass-page-wrapper .status-badge {
    display: inline-block;
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: var(--pill-bg);
    border: var(--pill-border);
    color: var(--accent-color);
    margin-bottom: var(--space-4);
}

/* Content Area */
#unique-glass-page-wrapper .goal-description {
    font-size: var(--font-size-lg);
    line-height: var(--line-height-relaxed);
    color: var(--text-color);
    margin-bottom: var(--space-12);
    white-space: pre-wrap;
    opacity: 0.9;
}

/* Buddy Status Card */
#unique-glass-page-wrapper .status-card {
    border-radius: var(--radius-xl);
    padding: var(--space-8);
    display: flex;
    flex-direction: column;
    /* Nested Blur not always needed if background is solid enough, but consistent here */
    /* backdrop-filter removed for GOV.UK compliance */
    transition: all var(--transition-base);
}

/* Status: Matched (Blue) */
#unique-glass-page-wrapper .status-card.status-matched {
    background: var(--status-blue-bg);
    border: 1px solid var(--status-blue-border);
    color: var(--status-blue-text);
}

/* Status: Looking (Amber) */
#unique-glass-page-wrapper .status-card.status-looking {
    background: var(--status-amber-bg);
    border: 1px solid var(--status-amber-border);
    color: var(--status-amber-text);
}

/* Status: Private (Gray) */
#unique-glass-page-wrapper .status-card.status-private {
    background: var(--status-gray-bg);
    border: 1px solid var(--status-gray-border);
    color: var(--status-gray-text);
}


/* Action Buttons */
#unique-glass-page-wrapper .glass-pill-btn {
    padding: var(--space-2) var(--space-6);
    border-radius: var(--radius-full);
    border: none;
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    font-size: var(--font-size-base);
    transition: all var(--transition-fast);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    box-shadow: 0 var(--space-1) var(--space-3) var(--color-black-alpha-5);
}

#unique-glass-page-wrapper .glass-pill-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 var(--space-2) var(--space-4) var(--color-black-alpha-10);
}

/* Variants */
#unique-glass-page-wrapper .btn-primary {
    background: linear-gradient(135deg, var(--color-pink-600) 0%, var(--color-pink-700) 100%);
    color: white;
}

#unique-glass-page-wrapper .btn-secondary {
    background: var(--pill-bg);
    border: var(--pill-border);
    color: var(--text-color);
}

#unique-glass-page-wrapper .btn-success {
    background: linear-gradient(135deg, var(--color-green-500) 0%, var(--color-green-600) 100%);
    color: white;
}

/* ============================================
   INLINE STYLES EXTRACTED
   ============================================ */

/* Header Actions Container */
.goal-header-actions {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
}

/* Buddy Section Heading */
.goal-buddy-heading {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--font-size-xl);
}

/* Buddy Info Container */
.goal-buddy-info {
    display: flex;
    align-items: center;
    gap: var(--space-4);
}

/* Buddy Emoji Box */
.goal-emoji-box {
    font-size: var(--font-size-3xl);
}

/* Buddy Details Text */
.goal-buddy-label {
    opacity: 0.8;
    font-size: var(--font-size-sm);
}

.goal-buddy-name {
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-lg);
}

/* Buddy Message Button Container */
.goal-buddy-action {
    margin-left: auto;
}

.goal-buddy-message-btn {
    padding: var(--space-2) var(--space-4);
    font-size: var(--font-size-sm);
}

/* Looking for Buddy - Center Container */
.goal-looking-center {
    text-align: center;
}

.goal-looking-emoji {
    font-size: var(--font-size-3xl);
    margin-bottom: var(--space-2);
}

.goal-looking-heading {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--font-size-xl);
}

.goal-looking-description {
    margin: 0 0 var(--space-5) 0;
    opacity: 0.9;
}

/* Private Goal Container */
.goal-private-info {
    display: flex;
    align-items: center;
    gap: var(--space-4);
}

.goal-private-emoji {
    font-size: var(--font-size-2xl);
}

.goal-private-label {
    display: block;
}

.goal-private-description {
    opacity: 0.8;
    font-size: var(--font-size-sm);
}

/* Social Engagement Section */
.goal-social-section {
    margin-top: var(--space-10);
    padding-top: var(--space-8);
    border-top: 1px solid var(--glass-border);
}

.goal-social-buttons {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex-wrap: wrap;
    margin-bottom: var(--space-5);
}

/* Comments Section */
.goal-comments-section {
    display: none;
    margin-top: var(--space-5);
}

.goal-comments-section.visible {
    display: block;
}

.goal-comment-form {
    margin-bottom: var(--space-5);
}

.goal-comment-input-wrapper {
    display: flex;
    gap: var(--space-2);
    align-items: flex-start;
}

.goal-comment-avatar {
    width: var(--space-10);
    height: var(--space-10);
    border-radius: var(--radius-full);
    object-fit: cover;
    border: 1px solid var(--glass-border);
}

.goal-comment-input-container {
    flex: 1;
}

.goal-comment-textarea {
    width: 100%;
    min-height: var(--space-20);
    padding: var(--space-3);
    border-radius: var(--radius-md);
    border: 1px solid var(--glass-border);
    background: var(--pill-bg);
    color: var(--text-color);
    font-size: var(--font-size-base);
    resize: vertical;
}

.goal-comment-submit-btn {
    margin-top: var(--space-2);
}

.goal-login-prompt {
    text-align: center;
    color: var(--text-muted);
    padding: var(--space-5);
}

.goal-login-link {
    color: var(--accent-color);
}

.goal-comments-loading {
    text-align: center;
    color: var(--text-muted);
}

/* Responsive */
@media (max-width: 768px) {
    #unique-glass-page-wrapper {
        padding: var(--space-5) var(--space-2-5);
    }

    #unique-glass-page-wrapper .glass-box {
        width: 100%;
        padding: var(--space-8) var(--space-5);
        border-radius: var(--radius-xl);
    }

    #unique-glass-page-wrapper .page-header {
        flex-direction: column;
    }
}

/* ============================================
   Comment Component Styles
   Used by JavaScript-generated comment HTML
   ============================================ */

/* Comment box container */
.goal-comment-box {
    padding: var(--space-4);
    margin-bottom: var(--space-2-5);
    background: var(--pill-bg);
    border-radius: var(--radius-lg);
    border: 1px solid var(--glass-border);
}

/* Comment header with avatar and meta */
.goal-comment-header {
    display: flex;
    align-items: center;
    gap: var(--space-2-5);
    margin-bottom: var(--space-2);
}

/* Comment avatar */
.goal-comment-box-avatar {
    width: var(--space-8);
    height: var(--space-8);
    border-radius: var(--radius-full);
    object-fit: cover;
}

/* Comment author name */
.goal-comment-author {
    color: var(--text-color);
    font-weight: var(--font-weight-semibold);
}

/* Edited indicator */
.goal-comment-edited {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

/* Comment timestamp */
.goal-comment-time {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

/* Comment owner actions (edit/delete) */
.goal-comment-actions {
    cursor: pointer;
    margin-left: var(--space-2-5);
}

.goal-comment-actions:hover {
    opacity: 0.8;
}

/* Comment content */
.goal-comment-content {
    color: var(--text-color);
    margin-bottom: var(--space-2-5);
}

/* Reactions row */
.goal-comment-reactions {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
    align-items: center;
}

/* Reaction pill */
.goal-reaction-pill {
    cursor: pointer;
    padding: var(--space-0-5) var(--space-1-5);
    border-radius: var(--radius-lg);
    font-size: var(--font-size-sm);
    background: var(--pill-bg);
    border: 1px solid var(--glass-border);
    transition: transform var(--transition-fast);
}

.goal-reaction-pill:hover {
    transform: scale(1.05);
}

.goal-reaction-pill.active {
    background: var(--color-pink-600-alpha-20);
    border-color: var(--color-pink-600-alpha-40);
}

/* Reply button */
.goal-reply-btn {
    cursor: pointer;
    color: var(--accent-color);
    font-size: var(--font-size-sm);
}

.goal-reply-btn:hover {
    text-decoration: underline;
}

/* Reply form (hidden by default) */
.goal-reply-form {
    display: none;
    margin-top: var(--space-2-5);
}

.goal-reply-form.visible {
    display: block;
}

/* Reply input field */
.goal-reply-input {
    width: 100%;
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    border: 1px solid var(--glass-border);
    background: var(--pill-bg);
    color: var(--text-color);
    font-size: var(--font-size-base);
}

.goal-reply-input:focus {
    outline: 3px solid var(--color-govuk-yellow, #ffdd00);
    outline-offset: 0;
}

/* Reply submit button */
.goal-reply-submit {
    margin-top: var(--space-2);
    padding: var(--space-1-5) var(--space-3);
    font-size: var(--font-size-sm);
}

/* Loading message */
.goal-comments-message {
    text-align: center;
    color: var(--text-muted);
    padding: var(--space-5);
}

/* Edit form container */
.goal-edit-form {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
}

/* Edit input field */
.goal-edit-input {
    flex: 1;
    min-width: 200px;
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    border: 1px solid var(--glass-border);
    background: var(--pill-bg);
    color: var(--text-color);
    font-size: var(--font-size-base);
}

.goal-edit-input:focus {
    outline: 3px solid var(--color-govuk-yellow, #ffdd00);
    outline-offset: 0;
}

/* Edit action buttons */
.goal-edit-btn {
    padding: var(--space-1-5) var(--space-3);
}
