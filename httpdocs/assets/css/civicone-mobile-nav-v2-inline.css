/* FIX: Remove transform from html that breaks position:fixed */
html[data-layout] { transform: none !important; }

/* Hide on desktop by default */
.mobile-tab-bar { display: none; }

/* CRITICAL: Hide mobile fullscreen menu and notification sheet on desktop */
/* Nuclear option: absolute hide on desktop with max specificity */
@media (min-width: 1025px) {
    body .mobile-fullscreen-menu,
    body .mobile-notification-sheet,
    body #mobileMenu,
    body #mobileNotifications,
    body .mobile-tab-bar,
    html body .mobile-fullscreen-menu,
    html body .mobile-notification-sheet,
    html body #mobileMenu,
    html body #mobileNotifications,
    html body .mobile-tab-bar,
    nav.mobile-tab-bar,
    div.mobile-fullscreen-menu,
    div.mobile-notification-sheet {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        position: absolute !important;
        left: -99999px !important;
        top: -99999px !important;
        width: 0 !important;
        height: 0 !important;
        overflow: hidden !important;
        clip: rect(0,0,0,0) !important;
        z-index: -9999 !important;
    }
}

/* Fallback: Hide on desktop by default (for browsers that don't support media queries) */
.mobile-fullscreen-menu,
.mobile-notification-sheet,
#mobileMenu,
#mobileNotifications {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* Only show these elements on mobile/tablet */
@media (max-width: 1024px) {
    .mobile-fullscreen-menu,
    .mobile-notification-sheet,
    #mobileMenu,
    #mobileNotifications {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        pointer-events: auto !important;
    }

    /* But when not active, hide them properly */
    .mobile-fullscreen-menu:not(.active),
    #mobileMenu:not(.active) {
        transform: translateX(100%) !important;
    }

    .mobile-notification-sheet:not(.active),
    #mobileNotifications:not(.active) {
        transform: translateY(100%) !important;
    }
}

/* CRITICAL: Hide ALL legacy navigation on mobile including drawer AND header hamburger */
@media (max-width: 1024px) {
    .nexus-native-nav,
    .nexus-native-nav-inner,
    .nexus-bottom-nav,
    .nexus-quick-fab,
    .nexus-native-drawer,
    .nexus-native-drawer-overlay {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        transform: translateX(-100%) !important;
    }

    /* Hide header hamburger menu buttons - we have Menu in bottom tab bar */
    .nexus-menu-btn,
    #civic-menu-toggle {
        display: none !important;
    }

    /* Show mobile tab bar */
    .mobile-tab-bar {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: 99999 !important;
        height: 84px !important;
        background: var(--color-white-alpha-98) !important;
        border-top: 1px solid var(--color-black-alpha-10) !important;
        -webkit-backdrop-filter: saturate(180%) blur(20px) !important;
        backdrop-filter: saturate(180%) blur(20px) !important;
    }
    [data-theme="dark"] .mobile-tab-bar {
        background: var(--color-ios-dark-alpha-98) !important;
        border-top-color: var(--color-white-alpha-10) !important;
    }
    body {
        padding-bottom: 90px !important;
    }
    /* Ensure menu button looks like other tab items */
    .mobile-tab-item[type="button"],
    button.mobile-tab-item {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        margin: 0;
        font-family: inherit;
        outline: none;
        -webkit-appearance: none;
        appearance: none;
    }
}
