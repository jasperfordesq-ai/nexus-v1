/**
 * components-navigation Bundle
 * Generated: 2026-01-27T10:42:36.285Z
 * Files: 7
 */

/* ========================================
 * nexus-modern-header.css
 * ======================================== */

/* --- CSS RESET FOR HEADER --- */
html,
body {
    margin: 0 !important;
    padding: 0 !important;
    width: 100%;
    min-height: 100vh;
    box-sizing: border-box;
}

/* Ensure no unexpected spacing on wrapper elements */
body>* {
    margin-block-start: 0;
    margin-block-end: 0;
}

/* --- UPGRADED HEADER STYLES --- */
/* --- UPGRADED HEADER STYLES --- */
.nexus-utility-bar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--layout-header-height);
    /* 2026-01-27: Must be ABOVE navbar (z-navbar:120) for dropdowns - backdrop-filter creates stacking context */
    z-index: var(--z-mega-menu, 130);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 var(--space-6);
    font-family: var(--font-family-primary);
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.92) 0%,
            rgba(249, 250, 251, 0.88) 100%);
    backdrop-filter: blur(var(--blur-heavy)) saturate(200%);
    -webkit-backdrop-filter: blur(var(--blur-heavy)) saturate(200%);

    /* FIX: Soften border and add hardware acceleration */
    border-bottom: 1px solid rgba(99, 102, 241, 0.08);
    /* Reduced opacity */
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05),
        0 8px 32px rgba(99, 102, 241, 0.08);
    box-sizing: border-box;
    transition: all var(--transition-slow) var(--ease-in-out);

    /* FIX: Force GPU rendering */
    transform: translateZ(0);
    backface-visibility: hidden;
    will-change: transform, height, background-color;
}

/* Scroll-aware header - shrinks on scroll */
.nexus-utility-bar.scrolled {
    height: var(--layout-header-height-scrolled);
    padding: 0 var(--space-5);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08),
        0 12px 40px rgba(99, 102, 241, 0.12);
}

/* Light mode explicit styles */
[data-theme="light"] .nexus-utility-bar {
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.95) 0%,
            rgba(249, 250, 251, 0.9) 100%);
    border-bottom: 1px solid rgba(99, 102, 241, 0.1);
}

[data-theme="dark"] .nexus-utility-bar {
    background: linear-gradient(135deg,
            rgba(15, 23, 42, 0.95) 0%,
            rgba(30, 41, 59, 0.9) 100%);
    backdrop-filter: blur(var(--blur-heavy)) saturate(200%);
    -webkit-backdrop-filter: blur(var(--blur-heavy)) saturate(200%);
    border-bottom: 1px solid rgba(148, 163, 184, 0.1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2),
        0 8px 32px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .nexus-utility-bar.scrolled {
    background: linear-gradient(135deg,
            rgba(15, 23, 42, 0.98) 0%,
            rgba(30, 41, 59, 0.95) 100%);
}

/* Upgraded Utility Links */
.util-link {
    color: var(--color-gray-700);
    text-decoration: none;
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-left: var(--space-1);
    transition: all var(--transition-base) var(--ease-in-out);
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    background: transparent;
    border: none;
    cursor: pointer;
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-md);
    min-height: 44px; /* WCAG 2.1 AA touch target */
    line-height: 1;
    position: relative;
    box-sizing: border-box;
}

.util-link::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: var(--radius-md);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.05));
    opacity: 0;
    transition: opacity var(--transition-base) var(--ease-in-out);
}

.util-link:hover {
    color: var(--color-primary-600);
    transform: translateY(-1px);
}

.util-link:hover::before {
    opacity: 1;
}

.util-link:active {
    transform: translateY(0) scale(0.98);
}

[data-theme="light"] .util-link {
    color: var(--color-gray-700);
}

[data-theme="light"] .util-link:hover {
    color: var(--color-primary-600);
}

[data-theme="dark"] .util-link {
    color: rgba(248, 250, 252, 0.9);
}

[data-theme="dark"] .util-link:hover {
    color: var(--color-primary-300);
}

[data-theme="dark"] .util-link::before {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1));
}

/* Utility link arrow animation */
.util-link .htb-arrow {
    font-size: var(--font-size-xs);
    transition: transform var(--transition-fast) var(--ease-in-out);
    opacity: 0.7;
}

.htb-dropdown:hover .util-link .htb-arrow,
.htb-dropdown.active .util-link .htb-arrow {
    transform: rotate(180deg);
}

/* ============================================
   MODE SWITCHER - Holographic Glass Design
   ============================================ */
.mode-switcher {
    position: relative;
    display: flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2) var(--space-1) var(--space-1);
    margin-left: var(--space-1);
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.15) 0%,
            rgba(255, 255, 255, 0.05) 100%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all var(--transition-base) var(--ease-in-out);
    overflow: hidden;
    min-height: 28px; /* WCAG 2.1 AA touch target */
    box-sizing: border-box;
}

.mode-switcher::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.1) 0%,
            transparent 50%,
            rgba(255, 255, 255, 0.05) 100%);
    border-radius: var(--radius-2xl);
    pointer-events: none;
}

.mode-switcher:hover {
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.2) 0%,
            rgba(255, 255, 255, 0.1) 100%);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-1px);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.mode-switcher:active {
    transform: scale(0.97);
}

/* Mode Icon Container */
.mode-icon-container {
    position: relative;
    width: 24px;
    height: 24px;
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--transition-slow) var(--ease-in-out);
    flex-shrink: 0;
}

/* Light Mode Icon (Sun) */
.mode-icon-container.light-mode {
    background: linear-gradient(135deg, var(--color-amber-300), var(--color-warning));
    box-shadow: 0 0 16px rgba(251, 191, 36, 0.5),
        inset 0 1px 2px rgba(255, 255, 255, 0.3);
}

/* Dark Mode Icon (Moon) */
.mode-icon-container.dark-mode {
    background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-600));
    box-shadow: 0 0 16px rgba(99, 102, 241, 0.5),
        inset 0 1px 2px rgba(255, 255, 255, 0.2);
}

.mode-icon {
    font-size: var(--font-size-xs);
    color: white;
    transition: transform var(--transition-slow) var(--ease-in-out);
}

.mode-switcher:hover .mode-icon {
    transform: rotate(15deg) scale(1.1);
}

.mode-icon-container.light-mode .mode-icon {
    animation: sunPulse 2s ease-in-out infinite;
}

@keyframes sunPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1) rotate(10deg);
    }
}

.mode-icon-container.dark-mode .mode-icon {
    animation: moonGlow 3s ease-in-out infinite;
}

@keyframes moonGlow {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.8;
    }
}

/* Mode Label */
.mode-label {
    font-size: var(--font-size-xs);
    font-weight: 600;
    letter-spacing: 0.2px;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    white-space: nowrap;
    transition: color var(--transition-base);
}

[data-theme="light"] .mode-label {
    color: var(--color-slate-700);
    text-shadow: none;
}

[data-theme="light"] .mode-switcher {
    background: linear-gradient(135deg,
            rgba(15, 23, 42, 0.08) 0%,
            rgba(15, 23, 42, 0.04) 100%);
    border-color: rgba(15, 23, 42, 0.15);
}

[data-theme="light"] .mode-switcher:hover {
    background: linear-gradient(135deg,
            rgba(15, 23, 42, 0.12) 0%,
            rgba(15, 23, 42, 0.06) 100%);
    border-color: rgba(15, 23, 42, 0.2);
}

/* Arrow indicator */
.mode-arrow {
    font-size: var(--font-size-xs);
    color: rgba(255, 255, 255, 0.6);
    transition: transform 0.3s, color var(--transition-base);
}

[data-theme="light"] .mode-arrow {
    color: rgba(15, 23, 42, 0.5);
}

.mode-switcher:hover .mode-arrow {
    transform: translateX(2px);
    color: rgba(255, 255, 255, 0.9);
}

[data-theme="light"] .mode-switcher:hover .mode-arrow {
    color: rgba(15, 23, 42, 0.8);
}

/* Responsive: Hide label on smaller screens */
@media (max-width: 1100px) {
    .mode-label {
        display: none;
    }

    .mode-switcher {
        padding: var(--space-2);
        border-radius: var(--radius-full);
    }

    .mode-arrow {
        display: none;
    }
}

/* Legacy theme-toggle classes for backwards compatibility */
.theme-toggle-btn {
    display: none;
}

.theme-toggle-switch {
    display: none;
}

/* Mode Drawer Button (Mobile) */
.mode-drawer-btn {
    display: flex !important;
    align-items: center;
    gap: var(--space-3);
}

.mode-drawer-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: var(--radius-full);
    transition: all var(--transition-base) var(--ease-in-out);
}

.mode-drawer-icon.light-mode {
    background: linear-gradient(135deg, var(--color-amber-300), var(--color-warning));
    box-shadow: 0 0 12px rgba(251, 191, 36, 0.4);
}

.mode-drawer-icon.dark-mode {
    background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-600));
    box-shadow: 0 0 12px rgba(99, 102, 241, 0.4);
}

.mode-drawer-icon i {
    font-size: var(--font-size-xs);
    color: white;
}

.mode-toggle-text {
    font-weight: 600;
}

/* Header Icon Buttons (Messages & Notifications) */
.nexus-header-icon-btn {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    margin: 0 var(--space-2);
    background: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: var(--radius-md);
    color: var(--color-primary-600);
    text-decoration: none;
    cursor: pointer;
    transition: all var(--transition-fast) var(--ease-in-out);
    overflow: visible;
}

/* Ensure dropdown wrapper doesn't clip badge */
.htb-dropdown {
    overflow: visible;
}

.nexus-header-icon-btn:hover {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.3);
    transform: translateY(-1px);
}

.nexus-header-icon-btn i {
    font-size: var(--font-size-lg);
}

.nexus-header-icon-badge {
    position: absolute;
    top: -6px;
    right: -8px;
    min-width: 20px;
    height: 20px;
    padding: 0 5px;
    background: linear-gradient(135deg, var(--color-danger) 0%, var(--color-red-600) 100%);
    color: white;
    border-radius: var(--radius-md);
    font-size: var(--font-size-xs);
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid rgba(255, 255, 255, 0.95);
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.5);
    animation: nexusBadgePulse 2s ease-in-out infinite;
    z-index: 1; /* Relative to parent header icon - doesn't need high value */
}

@keyframes nexusBadgePulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.05);
    }
}

/* Light mode header icons */
[data-theme="light"] .nexus-header-icon-btn {
    background: rgba(99, 102, 241, 0.1);
    border-color: rgba(99, 102, 241, 0.2);
    color: var(--color-primary-600);
}

[data-theme="light"] .nexus-header-icon-btn:hover {
    background: rgba(99, 102, 241, 0.15);
    border-color: rgba(99, 102, 241, 0.3);
}

[data-theme="light"] .nexus-header-icon-badge {
    border-color: rgba(255, 255, 255, 0.95);
}

[data-theme="dark"] .nexus-header-icon-btn {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.1);
    color: #fff;
}

[data-theme="dark"] .nexus-header-icon-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.2);
}

[data-theme="dark"] .nexus-header-icon-badge {
    border-color: rgba(0, 0, 0, 0.9);
}

/* --- UPGRADED NAVBAR --- */
.nexus-navbar {
    position: fixed;
    top: var(--layout-header-height);
    left: 0;
    width: 100%;
    height: var(--layout-navbar-height, 64px);
    z-index: var(--z-navbar, 120);
    margin-top: 0;
    padding: 0 var(--space-6);
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-sizing: border-box;
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.88) 0%,
            rgba(249, 250, 251, 0.82) 100%);
    backdrop-filter: blur(var(--blur-heavy)) saturate(200%);
    -webkit-backdrop-filter: blur(var(--blur-heavy)) saturate(200%);
    border-bottom: 1px solid rgba(99, 102, 241, 0.08);
    box-shadow: 0 4px 24px rgba(99, 102, 241, 0.06);
    transition: all var(--transition-slow) var(--ease-in-out);
}

/* Scroll-aware navbar positioning */
.nexus-navbar.scrolled {
    top: 48px;
    height: 56px;
    padding: 0 var(--space-5);
}

/* Light mode navbar */
[data-theme="light"] .nexus-navbar {
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.92) 0%,
            rgba(249, 250, 251, 0.88) 100%);
    border-bottom: 1px solid rgba(99, 102, 241, 0.08);
}

[data-theme="dark"] .nexus-navbar {
    background: linear-gradient(135deg,
            rgba(15, 23, 42, 0.9) 0%,
            rgba(30, 41, 59, 0.85) 100%);
    border-bottom: 1px solid rgba(148, 163, 184, 0.08);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
}

/* --- UPGRADED NAV LINKS --- */
.nav-link {
    color: var(--color-gray-700);
    text-decoration: none;
    font-weight: 600;
    font-size: var(--font-size-sm);
    margin-left: var(--space-2);
    padding: var(--space-3) calc(var(--space-4) + var(--space-1));
    border-radius: var(--radius-md);
    position: relative;
    transition: all var(--transition-base) var(--ease-in-out);
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
}

.nav-link::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: var(--radius-md);
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.06));
    opacity: 0;
    transition: opacity var(--transition-base) var(--ease-in-out);
}

.nav-link:hover {
    color: var(--color-primary-600);
    transform: translateY(-2px);
}

.nav-link:hover::before {
    opacity: 1;
}

.nav-link:active {
    transform: translateY(0) scale(0.98);
}

[data-theme="light"] .nav-link {
    color: var(--color-gray-700);
}

[data-theme="light"] .nav-link:hover {
    color: var(--color-primary-600);
}

[data-theme="dark"] .nav-link {
    color: rgba(248, 250, 252, 0.95);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .nav-link:hover {
    color: var(--color-primary-300);
}

[data-theme="dark"] .nav-link::before {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.12));
}

/* Active nav link indicator */
.nav-link.active {
    color: var(--color-primary-600) !important;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1)) !important;
}

.nav-link.active::before {
    opacity: 1 !important;
}


.htb-dropdown {
    position: relative;
    display: inline-block;
}

.htb-dropdown-content {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    min-width: auto; /* Changed 2026-01-21: was min(280px, calc(100vw - 32px)) - now auto-sized to content */
    max-width: calc(100vw - 32px); /* Prevent viewport overflow */
    white-space: nowrap;
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(var(--blur-standard));
    -webkit-backdrop-filter: blur(var(--blur-standard));
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius-lg);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    padding: var(--space-3) 0;
    margin-top: var(--space-3);
    z-index: var(--z-dropdown, 200);
}

.htb-dropdown-content::before {
    content: '';
    position: absolute;
    top: -15px;
    left: 0;
    width: 100%;
    height: 15px;
    background: transparent;
}

.htb-dropdown:hover .htb-dropdown-content {
    display: block;
    animation: fadeIn var(--transition-fast);
}

/* Utility bar specific overrides moved to modern-header-emergency-fixes.css (2026-01-21) */
/* DO NOT add dropdown sizing rules here - they conflict with emergency fixes */

.htb-dropdown-content a {
    display: block;
    padding: var(--space-3) var(--space-5);
    color: var(--color-gray-800);
    text-decoration: none;
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin: var(--space-1) var(--space-2);
    border-radius: var(--radius-md);
    transition: all var(--transition-fast) var(--ease-in-out);
}

.htb-dropdown-content a:first-child {
    margin-top: var(--space-1);
}

.htb-dropdown-content a:last-child {
    margin-bottom: var(--space-1);
}

.htb-dropdown-content a:hover {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.15),
            rgba(139, 92, 246, 0.15));
    color: var(--color-primary-600);
    transform: translateX(4px);
}

[data-theme="dark"] .htb-dropdown-content {
    background: rgba(30, 41, 59, 0.95);
}

[data-theme="dark"] .htb-dropdown-content a {
    color: var(--color-gray-200);
}

/* NOTE: Using explicit color instead of var(--color-gray-700) because
   design-tokens.css inverts gray values in dark mode */
[data-theme="dark"] .htb-dropdown-content a:hover {
    background: rgba(99, 102, 241, 0.15); /* subtle primary tint */
    color: #fff;
}

/* Notification Dropdown Dark Mode */
.notif-dropdown-header {
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--color-gray-200);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--color-slate-50);
    border-radius: var(--radius-base) 8px 0 0;
}

.notif-dropdown-header span {
    font-weight: 800;
    font-size: var(--font-size-sm);
    color: var(--color-slate-600);
    letter-spacing: 0.5px;
}

[data-theme="dark"] .notif-dropdown-header {
    background: var(--color-slate-800);
    border-bottom-color: var(--color-slate-700);
}

[data-theme="dark"] .notif-dropdown-header span {
    color: var(--color-slate-400);
}

.notif-dropdown-empty {
    padding: calc(var(--space-6) + var(--space-2));
    text-align: center;
    color: var(--color-slate-400);
}

.notif-dropdown-empty .notif-icon {
    font-size: var(--font-size-2xl);
    margin-bottom: 5px;
    opacity: 0.5;
}

.notif-dropdown-empty .notif-text {
    font-size: var(--font-size-sm);
}

[data-theme="dark"] .notif-dropdown-empty {
    color: var(--color-slate-500);
}

.notif-dropdown-item {
    display: block;
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--color-slate-100);
    text-decoration: none;
    background: #fff;
    transition: background var(--transition-fast) var(--ease-in-out);
}

.notif-dropdown-item:hover {
    background: var(--color-slate-50);
}

.notif-dropdown-item.is-read {
    opacity: 0.6;
    background: transparent;
}

.notif-dropdown-item .notif-message {
    font-size: var(--font-size-sm);
    color: var(--color-slate-800);
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: var(--space-1);
}

.notif-dropdown-item.is-read .notif-message {
    font-weight: 400;
}

.notif-dropdown-item .notif-time {
    font-size: var(--font-size-xs);
    color: var(--color-slate-400);
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

.notif-dropdown-item .notif-time i {
    font-size: var(--font-size-xs);
}

[data-theme="dark"] .notif-dropdown-item {
    border-bottom-color: var(--color-slate-700);
    background: var(--color-slate-800);
}

[data-theme="dark"] .notif-dropdown-item:hover {
    background: var(--color-slate-700);
}

[data-theme="dark"] .notif-dropdown-item.is-read {
    background: transparent;
}

[data-theme="dark"] .notif-dropdown-item .notif-message {
    color: var(--color-slate-200);
}

[data-theme="dark"] .notif-dropdown-item .notif-time {
    color: var(--color-slate-500);
}

.notif-dropdown-footer {
    padding: var(--space-2) var(--space-4);
    border-top: 1px solid var(--color-slate-200);
    background: var(--color-slate-50);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 0 0 0.5rem 0.5rem;
}

.notif-dropdown-footer a {
    font-size: var(--font-size-sm);
    color: var(--color-slate-500);
    text-decoration: none;
    font-weight: 600;
}

.notif-dropdown-footer button {
    background: none;
    border: none;
    font-size: var(--font-size-sm);
    color: var(--color-info);
    font-weight: 600;
    text-decoration: none;
    padding: var(--space-1) 8px;
    display: inline-block;
    cursor: pointer;
    transition: color var(--transition-fast);
}

.notif-dropdown-footer button:hover {
    color: var(--color-blue-600);
}

[data-theme="dark"] .notif-dropdown-footer {
    background: var(--color-slate-800);
    border-top-color: var(--color-slate-700);
}

[data-theme="dark"] .notif-dropdown-footer a {
    color: var(--color-slate-400);
}

[data-theme="dark"] .notif-dropdown-footer a:hover {
    color: var(--color-slate-200);
}

[data-theme="dark"] .notif-dropdown-footer button {
    color: var(--color-blue-400);
}

[data-theme="dark"] .notif-dropdown-footer button:hover {
    color: var(--color-blue-300);
}

/* ===== NOTIFICATION DRAWER STYLES ===== */
.notif-drawer-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    -webkit-backdrop-filter: blur(2px);
    backdrop-filter: blur(2px);
    z-index: 9998;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-base) var(--ease-in-out), visibility var(--transition-base) var(--ease-in-out);
}

.notif-drawer-overlay.open {
    opacity: 1;
    visibility: visible;
}

.notif-drawer {
    position: fixed;
    top: 0;
    right: 0;
    width: 400px;
    max-width: 100vw;
    height: 100vh;
    height: 100dvh;
    background: var(--color-white);
    box-shadow: -4px 0 24px rgba(0, 0, 0, 0.15);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    transform: translateX(100%);
    transition: transform var(--transition-base) var(--ease-in-out);
}

.notif-drawer.open {
    transform: translateX(0);
}

[data-theme="dark"] .notif-drawer {
    background: var(--color-slate-900);
    box-shadow: -4px 0 24px rgba(0, 0, 0, 0.4);
}

.notif-drawer-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--color-slate-200);
    background: var(--color-slate-50);
    flex-shrink: 0;
}

.notif-drawer-header span {
    font-weight: 800;
    font-size: var(--font-size-sm);
    color: var(--color-slate-500);
    letter-spacing: 0.5px;
}

.notif-drawer-close {
    background: none;
    border: none;
    padding: var(--space-2);
    cursor: pointer;
    color: var(--color-slate-500);
    font-size: var(--font-size-xl);
    line-height: 1;
    border-radius: var(--radius-base);
    transition: background var(--transition-fast) var(--ease-in-out), color var(--transition-fast) var(--ease-in-out);
}

.notif-drawer-close:hover {
    background: var(--color-slate-200);
    color: var(--color-slate-800);
}

[data-theme="dark"] .notif-drawer-header {
    background: var(--color-slate-800);
    border-bottom-color: var(--color-slate-700);
}

[data-theme="dark"] .notif-drawer-header span {
    color: var(--color-slate-400);
}

[data-theme="dark"] .notif-drawer-close {
    color: var(--color-slate-400);
}

[data-theme="dark"] .notif-drawer-close:hover {
    background: var(--color-slate-700);
    color: var(--color-slate-200);
}

.notif-drawer-list {
    flex: 1;
    overflow-y: auto;
    overscroll-behavior: contain;
}

.notif-drawer-empty {
    padding: calc(var(--space-12) + var(--space-3)) calc(var(--space-6) + var(--space-2));
    text-align: center;
    color: var(--color-slate-400);
}

.notif-drawer-empty .notif-icon {
    font-size: var(--font-size-4xl);
    margin-bottom: 12px;
    opacity: 0.4;
}

.notif-drawer-empty .notif-text {
    font-size: var(--font-size-base);
}

[data-theme="dark"] .notif-drawer-empty {
    color: var(--color-slate-500);
}

.notif-drawer-item {
    display: block;
    padding: var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--color-slate-200);
    text-decoration: none;
    transition: background var(--transition-fast) var(--ease-in-out);
}

.notif-drawer-item:hover {
    background: var(--color-slate-100);
}

.notif-drawer-item.is-read {
    opacity: 0.6;
}

.notif-drawer-item .notif-message {
    font-size: var(--font-size-sm);
    color: var(--color-slate-800);
    font-weight: 500;
    line-height: 1.5;
    margin-bottom: var(--space-2);
}

.notif-drawer-item.is-read .notif-message {
    font-weight: 400;
}

.notif-drawer-item .notif-time {
    font-size: var(--font-size-sm);
    color: var(--color-slate-400);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.notif-drawer-item .notif-time i {
    font-size: var(--font-size-xs);
}

[data-theme="dark"] .notif-drawer-item {
    border-bottom-color: var(--color-slate-700);
}

[data-theme="dark"] .notif-drawer-item:hover {
    background: var(--color-slate-800);
}

[data-theme="dark"] .notif-drawer-item .notif-message {
    color: var(--color-slate-200);
}

[data-theme="dark"] .notif-drawer-item .notif-time {
    color: var(--color-slate-500);
}

.notif-drawer-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-5);
    border-top: 1px solid var(--color-slate-200);
    background: var(--color-slate-50);
    flex-shrink: 0;
}

.notif-drawer-footer a {
    font-size: var(--font-size-sm);
    color: var(--color-slate-500);
    text-decoration: none;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: var(--space-2);
    transition: color var(--transition-fast) var(--ease-in-out);
}

.notif-drawer-footer a:hover {
    color: var(--color-primary-600);
}

.notif-drawer-footer button {
    background: none;
    border: none;
    font-size: var(--font-size-sm);
    color: var(--color-primary-600);
    font-weight: 600;
    cursor: pointer;
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-base);
    display: flex;
    align-items: center;
    gap: var(--space-2);
    transition: background var(--transition-fast) var(--ease-in-out), color var(--transition-fast) var(--ease-in-out);
}

.notif-drawer-footer button:hover {
    background: rgba(79, 70, 229, 0.1);
    color: var(--color-primary-700);
}

[data-theme="dark"] .notif-drawer-footer {
    background: var(--color-slate-800);
    border-top-color: var(--color-slate-700);
}

[data-theme="dark"] .notif-drawer-footer a {
    color: var(--color-slate-400);
}

[data-theme="dark"] .notif-drawer-footer a:hover {
    color: var(--color-slate-200);
}

[data-theme="dark"] .notif-drawer-footer button {
    color: var(--color-blue-400);
}

[data-theme="dark"] .notif-drawer-footer button:hover {
    background: rgba(96, 165, 250, 0.1);
    color: var(--color-blue-300);
}

/* Mobile responsive drawer */
@media (max-width: 480px) {
    .notif-drawer {
        width: 100vw;
    }
}

/* ===== END NOTIFICATION DRAWER STYLES ===== */

.mobile-toggle-btn {
    display: none;
    flex-direction: column;
    gap: var(--space-1);
    background: none;
    border: none;
    cursor: pointer;
    z-index: 200;
    margin-left: auto;
    position: relative;
}

.mobile-toggle-btn span {
    width: 25px;
    height: 3px;
    background: var(--color-gray-800);
    border-radius: var(--radius-sm);
}

[data-theme="light"] .mobile-toggle-btn span {
    background: var(--color-gray-800);
}

[data-theme="dark"] .mobile-toggle-btn span {
    background: white;
}

/* Legacy htb-search-box styles - only apply if premium-search is NOT present */
.htb-search-box:not(.premium-search) input {
    background: transparent;
    border: none;
    color: var(--color-gray-800);
    padding: var(--space-2) var(--space-3);
    font-size: var(--font-size-sm);
    width: 100%;
}

.htb-search-box:not(.premium-search) input:focus {
    outline: none;
}

.htb-search-box:not(.premium-search) input::placeholder {
    color: rgba(100, 116, 139, 0.7) !important;
    opacity: 1;
}

.htb-search-box:not(.premium-search):hover {
    background: rgba(99, 102, 241, 0.1) !important;
    border-color: rgba(99, 102, 241, 0.2) !important;
}

.htb-search-box:not(.premium-search):focus-within {
    background: rgba(99, 102, 241, 0.12) !important;
    width: 260px !important;
    border-color: rgba(99, 102, 241, 0.3) !important;
}

/* Light mode search box */
[data-theme="light"] .htb-search-box:not(.premium-search) input {
    color: var(--color-gray-800);
}

[data-theme="light"] .htb-search-box:not(.premium-search) input::placeholder {
    color: rgba(100, 116, 139, 0.7) !important;
}

/* Dark mode search box */
[data-theme="dark"] .htb-search-box:not(.premium-search) input {
    color: white;
}

[data-theme="dark"] .htb-search-box:not(.premium-search) input::placeholder {
    color: rgba(255, 255, 255, 0.7) !important;
}

[data-theme="dark"] .htb-search-box:not(.premium-search):hover {
    background: rgba(255, 255, 255, 0.2) !important;
    border-color: rgba(255, 255, 255, 0.3) !important;
}

[data-theme="dark"] .htb-search-box:not(.premium-search):focus-within {
    background: rgba(255, 255, 255, 0.25) !important;
    border-color: rgba(255, 255, 255, 0.4) !important;
}

/* Brand logo in navbar - light mode */
[data-theme="light"] .nexus-navbar>a[href] {
    color: var(--color-gray-800) !important;
}

[data-theme="light"] .nexus-navbar>a[href] span {
    opacity: 0.6 !important;
}

/* Join button - keep white text on indigo background in light mode */
[data-theme="light"] .util-link[style*="color:#fff"],
[data-theme="light"] .util-link[style*="color: #fff"] {
    background: linear-gradient(135deg, var(--color-primary-500), var(--color-purple-500)) !important;
    color: white !important;
    padding: var(--space-1) 14px !important;
    border-radius: var(--radius-base) !important;
}

/* =====================================================
   COMPREHENSIVE LIGHT MODE HEADER OVERRIDES
   ===================================================== */

/* All utility bar links and text */
[data-theme="light"] .nexus-utility-bar,
[data-theme="light"] .nexus-utility-bar * {
    --header-text: var(--color-gray-800);
    --header-text-muted: var(--color-slate-500);
}

[data-theme="light"] .nexus-utility-bar .util-link,
[data-theme="light"] .nexus-utility-bar a:not([style*="background"]) {
    color: var(--color-gray-800) !important;
}

[data-theme="light"] .nexus-utility-bar .util-link:hover,
[data-theme="light"] .nexus-utility-bar a:not([style*="background"]):hover {
    color: var(--color-primary-500) !important;
}

/* Navbar (second header bar) */
[data-theme="light"] .nexus-navbar {
    background: linear-gradient(180deg,
            rgba(255, 255, 255, 0.95) 0%,
            rgba(249, 250, 251, 0.9) 100%) !important;
    border-bottom: 1px solid rgba(99, 102, 241, 0.1) !important;
}

[data-theme="light"] .nexus-navbar .nav-link {
    color: var(--color-gray-700) !important;
}

[data-theme="light"] .nexus-navbar .nav-link:hover {
    color: var(--color-primary-500) !important;
}

/* Keep Feed button pink/gradient */
[data-theme="light"] .nexus-navbar .nav-link[style*="background"] {
    color: white !important;
}

/* Header search box */
[data-theme="light"] .htb-search-box,
[data-theme="light"] .premium-search {
    background: rgba(243, 244, 246, 0.8) !important;
    border: 1px solid rgba(99, 102, 241, 0.15) !important;
}

[data-theme="light"] .htb-search-box input,
[data-theme="light"] .premium-search input {
    color: var(--color-gray-800) !important;
}

[data-theme="light"] .htb-search-box input::placeholder,
[data-theme="light"] .premium-search input::placeholder {
    color: var(--color-gray-400) !important;
}

[data-theme="light"] .htb-search-box:focus-within,
[data-theme="light"] .premium-search:focus-within {
    border-color: rgba(99, 102, 241, 0.4) !important;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1) !important;
}

/* Header icon buttons */
[data-theme="light"] .nexus-header-icon-btn {
    background: rgba(99, 102, 241, 0.08) !important;
    border: 1px solid rgba(99, 102, 241, 0.15) !important;
    color: var(--color-primary-600) !important;
}

[data-theme="light"] .nexus-header-icon-btn:hover {
    background: rgba(99, 102, 241, 0.15) !important;
    border-color: rgba(99, 102, 241, 0.25) !important;
}

/* Dropdown menus */
[data-theme="light"] .htb-dropdown-content {
    background: rgba(255, 255, 255, 0.98) !important;
    border: 1px solid rgba(209, 213, 219, 0.5) !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .htb-dropdown-content a {
    color: var(--color-gray-700) !important;
}

[data-theme="light"] .htb-dropdown-content a:hover {
    background: rgba(99, 102, 241, 0.08) !important;
    color: var(--color-primary-600) !important;
}

/* Dropdown menu styling only - no button styles in utility bar */

/* LEGACY: .app-drawer - Hidden by default, superseded by .nexus-native-drawer
   Kept for backward compatibility but hidden on all screen sizes */
.app-drawer {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    background: var(--color-white);
    z-index: 1000;
    transform: translateX(100%);
    transition: transform var(--transition-base) var(--ease-in-out);
    display: none; /* CHANGED: Hidden by default - use .nexus-native-drawer instead */
    flex-direction: column;
    overflow: hidden;
    visibility: hidden;
    pointer-events: none;
}

.app-drawer.active {
    display: flex;
    visibility: visible;
    pointer-events: auto;
    transform: translateX(0);
}

[data-theme="dark"] .app-drawer {
    background: var(--color-gray-900);
    color: white;
}

/* ============================================
   NEXUS NATIVE DRAWER - Modern Slide-in Menu
   Hidden by default, shown when .active class added
   ============================================ */
.nexus-native-drawer-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1499;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-base) var(--ease-in-out), visibility var(--transition-base) var(--ease-in-out);
    -webkit-backdrop-filter: blur(4px);
    backdrop-filter: blur(4px);
}

.nexus-native-drawer-overlay.active {
    opacity: 1;
    visibility: visible;
}

.nexus-native-drawer {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    width: 320px;
    max-width: 85vw;
    background: var(--color-white);
    z-index: 1500;
    transform: translateX(100%);
    transition: transform var(--transition-base) var(--ease-in-out);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: -10px 0 40px rgba(0, 0, 0, 0.15);
}

.nexus-native-drawer.active {
    transform: translateX(0);
}

[data-theme="dark"] .nexus-native-drawer {
    background: var(--color-slate-900);
    color: var(--color-slate-100);
}

.nexus-drawer-header {
    padding: var(--space-5);
    padding-top: calc(20px + env(safe-area-inset-top, 0px));
    background: linear-gradient(135deg, var(--color-primary-600) 0%, var(--color-purple-600) 100%);
    color: white;
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.nexus-drawer-header-content {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    flex: 1;
}

.nexus-drawer-avatar {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-md);
    background: rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-xl);
    overflow: hidden;
}

.nexus-drawer-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.nexus-drawer-user-info h3 {
    margin: 0;
    font-size: var(--font-size-lg);
    font-weight: 600;
}

.nexus-drawer-user-info p {
    margin: 2px 0 0;
    font-size: var(--font-size-sm);
    opacity: 0.85;
}

.nexus-drawer-close {
    width: 36px;
    height: 36px;
    border-radius: var(--radius-full);
    border: none;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
    transition: background var(--transition-fast);
}

.nexus-drawer-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.nexus-drawer-body {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-4);
}

.nexus-drawer-group {
    margin-bottom: var(--space-6);
}

.nexus-drawer-group-title {
    font-size: var(--font-size-xs);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--color-gray-400);
    margin: 0 0 var(--space-3) var(--space-2);
}

[data-theme="dark"] .nexus-drawer-group-title {
    color: var(--color-gray-500);
}

.nexus-drawer-item {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-3);
    border-radius: var(--radius-md);
    text-decoration: none;
    color: var(--color-slate-800);
    transition: background var(--transition-fast), transform var(--transition-fast);
    margin-bottom: var(--space-1);
}

.nexus-drawer-item:hover {
    background: var(--color-slate-100);
}

.nexus-drawer-item:active {
    transform: scale(0.98);
}

[data-theme="dark"] .nexus-drawer-item {
    color: var(--color-slate-200);
}

[data-theme="dark"] .nexus-drawer-item:hover {
    background: var(--color-slate-800);
}

.nexus-drawer-item-icon {
    width: 44px;
    height: 44px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-lg);
    flex-shrink: 0;
}

/* Icon Colors */
.nexus-drawer-item-icon.icon-rose { background: linear-gradient(135deg, #fecdd3, var(--color-rose-300)); color: var(--color-rose-700); }
.nexus-drawer-item-icon.icon-blue { background: linear-gradient(135deg, #bfdbfe, var(--color-blue-300)); color: var(--color-blue-700); }
.nexus-drawer-item-icon.icon-teal { background: linear-gradient(135deg, #99f6e4, var(--color-teal-300)); color: var(--color-teal-700); }
.nexus-drawer-item-icon.icon-purple { background: linear-gradient(135deg, var(--color-purple-200), var(--color-purple-300)); color: var(--color-purple-600); }
.nexus-drawer-item-icon.icon-indigo { background: linear-gradient(135deg, var(--color-primary-200), var(--color-primary-300)); color: var(--color-primary-600); }
.nexus-drawer-item-icon.icon-orange { background: linear-gradient(135deg, #fed7aa, var(--color-orange-300)); color: var(--color-govuk-red-dark); }
.nexus-drawer-item-icon.icon-green { background: linear-gradient(135deg, #bbf7d0, var(--color-green-300)); color: var(--color-green-700); }
.nexus-drawer-item-icon.icon-cyan { background: linear-gradient(135deg, #a5f3fc, var(--color-cyan-300)); color: #0e7490; }
.nexus-drawer-item-icon.icon-amber { background: linear-gradient(135deg, var(--color-amber-200), var(--color-amber-300)); color: var(--color-amber-700); }
.nexus-drawer-item-icon.icon-red { background: linear-gradient(135deg, #fecaca, var(--color-red-300)); color: var(--color-red-600); }
.nexus-drawer-item-icon.icon-emerald { background: linear-gradient(135deg, var(--color-emerald-200), var(--color-emerald-300)); color: var(--color-emerald-600); }
.nexus-drawer-item-icon.icon-pink { background: linear-gradient(135deg, var(--color-pink-200), var(--color-pink-300)); color: var(--color-pink-600); }
.nexus-drawer-item-icon.icon-yellow { background: linear-gradient(135deg, var(--color-yellow-200), #fde047); color: #a16207; }
.nexus-drawer-item-icon.icon-lime { background: linear-gradient(135deg, var(--color-lime-200), var(--color-lime-300)); color: #4d7c0f; }
.nexus-drawer-item-icon.icon-sky { background: linear-gradient(135deg, #bae6fd, #7dd3fc); color: var(--color-sky-700); }
.nexus-drawer-item-icon.icon-violet { background: linear-gradient(135deg, var(--color-purple-200), var(--color-purple-300)); color: var(--color-purple-700); }

[data-theme="dark"] .nexus-drawer-item-icon.icon-rose { background: rgba(244, 63, 94, 0.2); color: var(--color-rose-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-blue { background: rgba(59, 130, 246, 0.2); color: var(--color-blue-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-teal { background: rgba(20, 184, 166, 0.2); color: var(--color-teal-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-purple { background: rgba(139, 92, 246, 0.2); color: var(--color-purple-400-alt); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-indigo { background: rgba(99, 102, 241, 0.2); color: var(--color-primary-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-orange { background: rgba(249, 115, 22, 0.2); color: #fb923c; }
[data-theme="dark"] .nexus-drawer-item-icon.icon-green { background: rgba(34, 197, 94, 0.2); color: var(--color-green-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-cyan { background: rgba(6, 182, 212, 0.2); color: var(--color-cyan-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-amber { background: rgba(245, 158, 11, 0.2); color: var(--color-amber-300); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-red { background: rgba(239, 68, 68, 0.2); color: var(--color-red-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-emerald { background: rgba(16, 185, 129, 0.2); color: var(--color-emerald-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-pink { background: rgba(236, 72, 153, 0.2); color: var(--color-pink-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-yellow { background: rgba(234, 179, 8, 0.2); color: var(--color-yellow-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-lime { background: rgba(132, 204, 22, 0.2); color: var(--color-lime-400); }
[data-theme="dark"] .nexus-drawer-item-icon.icon-sky { background: rgba(14, 165, 233, 0.2); color: #38bdf8; }
[data-theme="dark"] .nexus-drawer-item-icon.icon-violet { background: rgba(124, 58, 237, 0.2); color: var(--color-purple-400-alt); }

.nexus-drawer-item-text {
    flex: 1;
    min-width: 0;
}

.nexus-drawer-item-label {
    display: block;
    font-weight: 600;
    font-size: var(--font-size-sm);
    line-height: 1.3;
}

.nexus-drawer-item-desc {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--color-slate-500);
    margin-top: 2px;
}

[data-theme="dark"] .nexus-drawer-item-desc {
    color: var(--color-slate-400);
}

.nexus-drawer-footer {
    padding: var(--space-4);
    border-top: 1px solid var(--color-slate-200);
    background: var(--color-slate-50);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: calc(16px + env(safe-area-inset-bottom, 0px));
}

[data-theme="dark"] .nexus-drawer-footer {
    background: var(--color-slate-800);
    border-color: var(--color-slate-700);
}

.nexus-drawer-footer-action {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: var(--font-size-sm);
    text-decoration: none;
    transition: background var(--transition-fast);
    border: none;
    background: none;
    cursor: pointer;
    color: inherit;
}

.nexus-drawer-footer-action:hover {
    background: rgba(0, 0, 0, 0.05);
}

[data-theme="dark"] .nexus-drawer-footer-action:hover {
    background: rgba(255, 255, 255, 0.1);
}

.nexus-drawer-footer-action.logout {
    color: var(--color-red-600);
}

/* ============================================
   END NEXUS NATIVE DRAWER
   ============================================ */

.drawer-header {
    padding: var(--space-5) var(--space-5);
    background: linear-gradient(135deg, var(--color-primary-600), var(--color-pink-500));
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.drawer-body {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-5);
    padding-bottom: var(--space-10);
}

.drawer-footer {
    padding: var(--space-5);
    border-top: 1px solid var(--color-gray-200);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--color-gray-50);
}

[data-theme="dark"] .drawer-footer {
    background: var(--color-gray-800);
    border-color: var(--color-gray-700);
}

.app-group-title {
    margin: calc(var(--space-6) + var(--space-1)) 0 var(--space-3);
    color: var(--color-gray-400);
    text-transform: uppercase;
    font-size: var(--font-size-xs);
    letter-spacing: 1px;
    font-weight: 800;
    padding-left: var(--space-1);
    opacity: 0.8;
}

.app-item {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-3);
    margin-bottom: var(--space-2);
    text-decoration: none;
    color: var(--color-gray-800);
    border-radius: var(--radius-md);
    transition: transform var(--transition-fast), background var(--transition-fast);
}

[data-theme="dark"] .app-item {
    color: var(--color-gray-200);
}

.app-item:hover {
    background: var(--color-gray-50);
    transform: scale(1.01);
}

[data-theme="dark"] .app-item:hover {
    background: var(--color-gray-700);
}

.app-icon {
    width: 44px;
    height: 44px;
    background: var(--color-gray-200);
    color: white;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.icon-blue {
    background: linear-gradient(135deg, var(--color-info), var(--color-blue-600));
}

.icon-teal {
    background: linear-gradient(135deg, var(--color-teal-500), var(--color-teal-700));
}

.icon-purple {
    background: linear-gradient(135deg, var(--color-purple-400), var(--color-purple-600));
}

.icon-orange {
    background: linear-gradient(135deg, var(--color-orange-500), var(--color-orange-600));
}

.icon-green {
    background: linear-gradient(135deg, var(--color-lime-500), var(--color-lime-600));
}

.icon-red {
    background: linear-gradient(135deg, var(--color-danger), var(--color-red-600));
}

.icon-cyan {
    background: linear-gradient(135deg, var(--color-cyan-500), var(--color-cyan-600));
}

.icon-gray {
    background: linear-gradient(135deg, var(--color-gray-400), var(--color-gray-600));
}

.icon-emerald {
    background: linear-gradient(135deg, var(--color-success), var(--color-emerald-600));
}

[data-theme="dark"] .app-icon {
    box-shadow: none;
    opacity: 0.9;
}

.drawer-close {
    background: rgba(255, 255, 255, 0.25);
    border: 2px solid rgba(255, 255, 255, 0.4);
    color: white;
    width: 36px;
    height: 36px;
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: var(--font-size-lg);
    transition: background var(--transition-fast);
    z-index: 1010;
}

.drawer-close:hover {
    background: rgba(255, 255, 255, 0.4);
}

/* --- UPGRADED MOBILE RESPONSIVE LAYOUT --- */
@media (max-width: 1024px) {

    /* Hide Utility Bar on Mobile - All links moved to drawer */
    .nexus-utility-bar {
        display: none !important;
    }

    /* Adjust navbar position since utility bar is hidden */
    .nexus-navbar {
        top: 0 !important;
        padding: var(--space-3) var(--space-4);
        height: 60px;
        background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.95) 0%,
                rgba(249, 250, 251, 0.92) 100%);
    }

    [data-theme="dark"] .nexus-navbar {
        background: linear-gradient(135deg,
                rgba(15, 23, 42, 0.98) 0%,
                rgba(30, 41, 59, 0.95) 100%);
    }

    /* Adjust body padding for content */
    body {
        --utility-bar-height: 0px;
    }

    .desktop-only {
        display: none !important;
    }

    .mobile-toggle-btn {
        display: flex !important;
    }

    /* Mobile content spacing - clears fixed navbar (no utility bar) */
    .htb-container,
    .htb-container-full {
        margin-top: 60px !important;
        padding-top: 0 !important;
    }

    /* Override inline margin-top on wrapper divs for mobile */
    .htb-container-full[style*="margin-top"],
    [id$="-glass-wrapper"],
    [id*="glass-wrapper"] {
        margin-top: 60px !important;
    }

    /* Mobile logo sizing */
    .nexus-navbar>a[href] {
        font-size: var(--font-size-xl) !important;
    }

    /* Mobile menu button enhancement */
    .nexus-menu-btn {
        width: 44px;
        height: 44px;
        border-radius: var(--radius-md);
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.08));
        border: 1px solid rgba(99, 102, 241, 0.15);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all var(--transition-base) var(--ease-in-out);
    }

    .nexus-menu-btn:hover,
    .nexus-menu-btn:active {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.15));
        transform: scale(1.05);
    }

    [data-theme="dark"] .nexus-menu-btn {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.15));
        border-color: rgba(99, 102, 241, 0.25);
    }
}

/* Tablet breakpoint */
@media (min-width: 601px) and (max-width: 1024px) {
    .nexus-navbar {
        padding: var(--space-4) var(--space-6);
    }
}

/* Desktop content spacing - clears utility bar (56px) + navbar (64px) + extra padding (16px) = 136px */
@media (min-width: 1024px) {

    .htb-container,
    .htb-container-full {
        margin-top: 0 !important;
        padding-top: 136px !important;
    }
}

/* Hero Button Styles with Glassmorphism */
.htb-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-4) calc(var(--space-6) + var(--space-1));
    border-radius: var(--radius-md);
    font-weight: 700;
    font-size: var(--font-size-base);
    text-decoration: none;
    transition: all var(--transition-base) var(--ease-in-out);
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
    position: relative;
    overflow: hidden;
}

.htb-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: var(--radius-full);
    background: rgba(255, 255, 255, 0.2);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height var(--transition-slow);
}

.htb-btn:hover::before {
    width: 300px;
    height: 300px;
}

.htb-btn i {
    font-size: var(--font-size-lg);
    position: relative;
    z-index: 1;
}

.htb-btn span {
    position: relative;
    z-index: 1;
}

.htb-btn-primary {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.95) 0%,
            rgba(139, 92, 246, 0.95) 100%);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.htb-btn-primary:hover {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 1) 0%,
            rgba(139, 92, 246, 1) 100%);
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5);
}

.htb-btn-secondary {
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.95) 0%,
            rgba(255, 255, 255, 0.85) 100%);
    color: var(--color-gray-800);
    border: 1px solid rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.htb-btn-secondary:hover {
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 1) 0%,
            rgba(255, 255, 255, 0.95) 100%);
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.25);
    color: var(--color-primary-500);
}

@media (min-width: 1024px) {
    .htb-hero-buttons {
        flex-direction: row !important;
        max-width: 720px !important;
        gap: var(--space-4) !important;
    }

    .htb-hero-buttons .htb-btn {
        width: auto !important;
        flex: 1 !important;
        min-width: 160px !important;
        max-width: 220px !important;
    }
}

/* Extra small screens (360px and below) */
@media (max-width: 360px) {
    .nexus-navbar {
        padding: var(--space-2) 12px;
    }

    .nexus-navbar > a[href] {
        font-size: var(--font-size-lg) !important;
    }

    .nexus-menu-btn {
        width: 40px;
        height: 40px;
    }

    .htb-btn {
        padding: var(--space-3) var(--space-5);
        font-size: var(--font-size-sm);
    }

    .htb-container,
    .htb-container-full {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================================
 * nexus-native-nav-v2.css
 * ======================================== */

/**
 * Project NEXUS - Native Mobile Navigation v2
 * Full-screen, app-like navigation inspired by Instagram, TikTok, and iOS
 * Designed for a true native mobile experience
  * Fully Migrated to Design Tokens: 2026-01-21 
 */

/* ============================================
   CRITICAL: Hide mobile navigation on desktop
   ============================================ */
@media (min-width: 1025px) {
    .mobile-fullscreen-menu,
    .mobile-notification-sheet,
    .mobile-tab-bar,
    #mobileMenu,
    #mobileNotifications {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
    }
}

/* ============================================
   CSS VARIABLES - Design Tokens
   ============================================ */
:root {
    /* Navigation Colors */
    --mobile-nav-bg: var(--color-white);
    --mobile-nav-border: rgba(0, 0, 0, 0.08);
    --mobile-nav-text: #8e8e93;
    --mobile-nav-active: var(--color-primary-500);
    --mobile-nav-height: 84px;

    /* Menu Colors */
    --mobile-menu-bg: var(--color-white);
    --mobile-menu-item-hover: var(--color-slate-50);
    --mobile-menu-divider: var(--color-slate-100);
    --mobile-menu-text: var(--color-slate-800);
    --mobile-menu-text-secondary: var(--color-slate-500);

    /* Safe Areas */
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-top: env(safe-area-inset-top, 0px);

    /* Transitions */
    --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-smooth: var(--ease-in-out);
    --ease-ios: cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

[data-theme="dark"] {
    --mobile-nav-bg: var(--color-black);
    --mobile-nav-border: rgba(255, 255, 255, 0.1);
    --mobile-nav-text: #8e8e93;
    --mobile-nav-active: var(--color-primary-400);

    --mobile-menu-bg: var(--color-black);
    --mobile-menu-item-hover: #1c1c1e;
    --mobile-menu-divider: #38383a;
    --mobile-menu-text: var(--color-white);
    --mobile-menu-text-secondary: #8e8e93;
}


/* ============================================
   HIDE ALL LEGACY NAVIGATION ON MOBILE
   ============================================ */
@media (max-width: 1024px) {

    /* Hide old bottom nav systems (but keep drawer for fallback) */
    .nexus-bottom-nav,
    .nexus-native-nav,
    .nexus-quick-fab,
    .nexus-edge-indicator,
    .app-drawer {
        display: none !important;
        visibility: hidden !important;
        pointer-events: none !important;
    }

    /* Note: nexus-native-drawer and overlay are NOT hidden - they serve as fallback
       when openMobileMenu() is not yet defined (function loading order issue) */
}


/* ============================================
   1. BOTTOM TAB BAR - Modern iOS/Android Style
   Clean, minimal, perfect alignment
   ============================================ */

.mobile-tab-bar {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: var(--z-fixed, 1200);
    height: var(--mobile-nav-height, 60px);
    padding-bottom: var(--safe-bottom, env(safe-area-inset-bottom, 0px));
    background: rgba(255, 255, 255, 0.95);
    border-top: 1px solid rgba(0, 0, 0, 0.06);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    backdrop-filter: saturate(180%) blur(20px);
}

[data-theme="dark"] .mobile-tab-bar,
.dark-mode .mobile-tab-bar {
    background: rgba(28, 28, 30, 0.95);
    border-top-color: rgba(255, 255, 255, 0.08);
}

@media (max-width: 1024px) {
    /* CRITICAL: Force show mobile tab bar */
    .mobile-tab-bar,
    #mobileTabBar {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: var(--z-notification, 1700);
        height: var(--mobile-nav-height, 84px) !important;
        background: rgba(255, 255, 255, 0.95) !important;
        -webkit-backdrop-filter: saturate(180%) blur(20px) !important;
        backdrop-filter: saturate(180%) blur(20px) !important;
        border-top: 1px solid rgba(0, 0, 0, 0.1) !important;
    }

    [data-theme="dark"] .mobile-tab-bar,
    [data-theme="dark"] #mobileTabBar {
        background: rgba(28, 28, 30, 0.95) !important;
        border-top-color: rgba(255, 255, 255, 0.1) !important;
    }

    body {
        padding-bottom: calc(var(--mobile-nav-height, 84px) + var(--safe-bottom, env(safe-area-inset-bottom, 0px))) !important;
    }
}

.mobile-tab-bar-inner {
    display: flex;
    justify-content: space-around;
    align-items: center;
    height: 100%;
    max-width: 500px;
    margin: 0 auto;
    width: 100%;
    padding: 0 var(--space-2);
}

/* Tab Items - Clean, minimal design */
.mobile-tab-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    flex: 1;
    min-width: 64px;
    max-width: 80px;
    height: 100%;
    text-decoration: none;
    color: var(--color-gray-500); /* Darker gray for WCAG AA contrast (4.59:1 on white) */
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    letter-spacing: 0;
    position: relative;
    -webkit-tap-highlight-color: transparent;
    transition: color var(--transition-fast) var(--ease-in-out), transform var(--transition-fast) var(--ease-in-out);
    background: none;
    border: none;
    cursor: pointer;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', sans-serif;
    padding: var(--space-2) 0;
}

/* Button-type tab items - explicit reset for menu button */
button.mobile-tab-item,
.mobile-tab-item[type="button"] {
    background: none;
    border: none;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
}

.mobile-tab-item:active {
    transform: scale(0.9);
}

.mobile-tab-item i {
    font-size: var(--font-size-xl);
    line-height: 1;
    transition: transform var(--transition-fast) var(--ease-in-out);
}

.mobile-tab-item.active {
    color: var(--color-primary-500);
}

.mobile-tab-item.active i {
    transform: scale(1.08);
}

[data-theme="dark"] .mobile-tab-item,
.dark-mode .mobile-tab-item {
    color: var(--color-gray-400); /* Lighter gray for WCAG AA on dark background (4.85:1 on #1c1c1e) */
}

[data-theme="dark"] .mobile-tab-item.active,
.dark-mode .mobile-tab-item.active {
    color: var(--color-primary-400);
}

/* Notification Badge */
.mobile-tab-badge {
    position: absolute;
    top: var(--space-1);
    left: 50%;
    transform: translateX(var(--space-2));
    min-width: calc(var(--space-4) + var(--space-1));
    height: calc(var(--space-4) + var(--space-1));
    background: #ff3b30;
    color: white;
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    border-radius: var(--radius-base);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 var(--space-1);
    box-shadow: 0 2px 6px rgba(255, 59, 48, 0.4);
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    z-index: 10;
}

.mobile-tab-badge:empty {
    display: none;
}

/* ============================================
   CENTER CREATE BUTTON - Floating FAB Style
   ============================================ */

.mobile-tab-item.create-btn {
    position: relative;
    flex: 0 0 auto;
    width: calc(var(--space-12) + var(--space-2));
    min-width: calc(var(--space-12) + var(--space-2));
    max-width: calc(var(--space-12) + var(--space-2));
}

.mobile-tab-item.create-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: var(--space-12);
    height: var(--space-12);
    background: linear-gradient(135deg, var(--color-primary-500) 0%, var(--color-purple-500) 100%);
    border-radius: var(--radius-lg);
    z-index: 1;
    box-shadow:
        0 4px 14px rgba(99, 102, 241, 0.4),
        0 2px 6px rgba(99, 102, 241, 0.2);
    transition: transform var(--transition-fast) var(--ease-in-out), box-shadow var(--transition-fast) var(--ease-in-out);
}

.mobile-tab-item.create-btn:hover::before {
    transform: translate(-50%, -50%) scale(1.05);
    box-shadow:
        0 6px 20px rgba(99, 102, 241, 0.5),
        0 3px 8px rgba(99, 102, 241, 0.3);
}

.mobile-tab-item.create-btn:active::before {
    transform: translate(-50%, -50%) scale(0.92);
    box-shadow:
        0 2px 8px rgba(99, 102, 241, 0.3),
        0 1px 4px rgba(99, 102, 241, 0.2);
}

.mobile-tab-item.create-btn:active {
    transform: none;
}

.mobile-tab-item.create-btn>i,
.mobile-tab-item.create-btn>svg.create-icon {
    color: white !important;
    fill: white !important;
    width: var(--space-6);
    height: var(--space-6);
    font-size: var(--font-size-xl);
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.15));
}

.mobile-tab-item.create-btn>span {
    display: none;
}

/* Profile Avatar Tab */
.mobile-tab-avatar {
    width: calc(var(--space-6) + var(--space-1));
    height: calc(var(--space-6) + var(--space-1));
    border-radius: var(--radius-full);
    object-fit: cover;
    border: 2px solid transparent;
    transition: border-color var(--transition-fast) var(--ease-in-out), transform var(--transition-fast) var(--ease-in-out);
}

.mobile-tab-item.active .mobile-tab-avatar {
    border-color: var(--mobile-nav-active);
    transform: scale(1.05);
}


/* ============================================
   2. FULL-SCREEN MENU - Instagram/TikTok Style
   ============================================ */

.mobile-fullscreen-menu {
    position: fixed;
    inset: 0;
    z-index: var(--z-notification, 1700);
    background: var(--mobile-menu-bg);
    transform: translateX(100%);
    transition: transform 0.35s var(--ease-ios);
    display: flex;
    flex-direction: column;
    visibility: hidden;
    will-change: transform;
    /* Ensure menu itself can contain scrollable content */
    height: 100%;
    height: 100dvh; /* Dynamic viewport height for mobile */
    overflow: hidden; /* Menu container doesn't scroll, only menu-body does */
}

.mobile-fullscreen-menu.active {
    transform: translateX(0);
    visibility: visible;
}

/* Prevent body scroll when menu is open - MOBILE ONLY */
@media (max-width: 1024px) {
    body.mobile-menu-open {
        overflow: hidden;
        /* NOTE: position: fixed breaks iOS scroll inside the menu panel.
           Using overflow: hidden alone is sufficient to prevent body scroll. */
        touch-action: none; /* Prevent touch scroll on body */
    }
}

/* Menu Header - Enhanced Full-Screen Design */
.mobile-menu-header {
    padding: var(--space-5) var(--space-5) var(--space-6);
    padding-top: calc(var(--space-5) + var(--safe-top));
    background: var(--mobile-menu-bg);
    border-bottom: 0.5px solid var(--mobile-menu-divider);
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    overflow: hidden;
    min-height: 100px;
}

/* Animated gradient background */
.mobile-menu-header-bg {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.08) 0%,
        rgba(139, 92, 246, 0.08) 50%,
        rgba(99, 102, 241, 0.08) 100%);
    background-size: 200% 200%;
    animation: gradient-shift 8s ease infinite;
    z-index: 0;
    pointer-events: none;
}

@keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

[data-theme="dark"] .mobile-menu-header-bg {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.12) 0%,
        rgba(139, 92, 246, 0.12) 50%,
        rgba(99, 102, 241, 0.12) 100%);
    background-size: 200% 200%;
}

.mobile-menu-user {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    text-decoration: none;
    color: var(--mobile-menu-text);
    position: relative;
    z-index: 1;
    transition: transform var(--transition-fast) var(--ease-in-out);
    -webkit-tap-highlight-color: transparent;
}

.mobile-menu-user:active {
    transform: scale(0.98);
}

/* Avatar wrapper with animated ring */
.mobile-menu-avatar-wrapper {
    position: relative;
    width: var(--space-16);
    height: var(--space-16);
    flex-shrink: 0;
}

.mobile-menu-avatar {
    width: var(--space-16);
    height: var(--space-16);
    border-radius: var(--radius-full);
    object-fit: cover;
    border: 3px solid var(--mobile-menu-bg);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 2;
}

/* Animated pulsing ring around avatar */
.mobile-menu-avatar-ring {
    position: absolute;
    inset: -4px;
    border-radius: var(--radius-full);
    border: 2px solid rgba(99, 102, 241, 0.4);
    z-index: 1;
    animation: avatar-ring-pulse 3s ease-in-out infinite;
}

@keyframes avatar-ring-pulse {
    0%, 100% {
        transform: scale(1);
        opacity: 0.4;
    }
    50% {
        transform: scale(1.08);
        opacity: 0.6;
    }
}

[data-theme="dark"] .mobile-menu-avatar {
    border-color: #1c1c1e;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .mobile-menu-avatar-ring {
    border-color: rgba(129, 140, 248, 0.5);
}

/* Guest avatar styling */
.mobile-menu-avatar-guest {
    width: var(--space-16);
    height: var(--space-16);
    border-radius: var(--radius-full);
    background: linear-gradient(135deg, var(--color-primary-500) 0%, var(--color-purple-500) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: calc(var(--font-size-2xl) + 0.25rem);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.mobile-menu-user-info {
    flex: 1;
    min-width: 0;
}

.mobile-menu-user-info h3 {
    margin: 0 0 var(--space-1) 0;
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    letter-spacing: -0.03em;
    color: var(--mobile-menu-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.mobile-menu-user-info p {
    margin: 0;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--mobile-nav-active);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.mobile-menu-user-info p i {
    font-size: var(--font-size-xs);
    transition: transform var(--transition-fast) var(--ease-in-out);
}

.mobile-menu-user:active .mobile-menu-user-info p i {
    transform: translateX(var(--space-1));
}

/* Close Button - Enhanced Design */
.mobile-menu-close {
    width: calc(var(--space-10) + var(--space-1));
    height: calc(var(--space-10) + var(--space-1));
    border-radius: var(--radius-full);
    background: rgba(0, 0, 0, 0.05);
    border: none;
    color: var(--mobile-menu-text);
    font-size: var(--font-size-xl);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
    transition: transform var(--transition-fast) var(--ease-in-out), background var(--transition-fast) var(--ease-in-out);
    position: relative;
    z-index: 1;
    flex-shrink: 0;
}

.mobile-menu-close:hover {
    background: rgba(0, 0, 0, 0.08);
}

.mobile-menu-close:active {
    transform: scale(0.88);
    background: rgba(0, 0, 0, 0.12);
}

[data-theme="dark"] .mobile-menu-close {
    background: rgba(255, 255, 255, 0.08);
}

[data-theme="dark"] .mobile-menu-close:hover {
    background: rgba(255, 255, 255, 0.12);
}

[data-theme="dark"] .mobile-menu-close:active {
    background: rgba(255, 255, 255, 0.16);
}

/* Menu Body - Scrollable */
.mobile-menu-body {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    overscroll-behavior-y: contain;
    -webkit-overflow-scrolling: touch;
    /* CRITICAL: Allow touch scrolling inside the menu (body has touch-action: none) */
    touch-action: pan-y;
    /* Minimum height to ensure flex child fills space */
    min-height: 0; /* Required for flex children to scroll properly */
}

/* Menu Sections */
.mobile-menu-section {
    padding: var(--space-3) 0;
    border-bottom: 0.5px solid var(--mobile-menu-divider);
}

.mobile-menu-section:last-child {
    border-bottom: none;
}

.mobile-menu-section-title {
    padding: var(--space-2) var(--space-5) var(--space-3);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--mobile-menu-text-secondary);
}

/* Menu Items - Large, clear, accessible with gradient icons */
.mobile-menu-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-5);
    text-decoration: none;
    color: var(--mobile-menu-text);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    letter-spacing: -0.01em;
    -webkit-tap-highlight-color: transparent;
    transition: background var(--transition-fast) var(--ease-in-out), transform var(--transition-fast) var(--ease-in-out);
    position: relative;
}

.mobile-menu-item:active {
    background: var(--mobile-menu-item-hover);
    transform: scale(0.98);
}

/* Icon container with gradient background */
.mobile-menu-item i {
    width: var(--space-10);
    height: var(--space-10);
    min-width: var(--space-10);
    border-radius: var(--radius-md);
    font-size: var(--font-size-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    background: linear-gradient(135deg, var(--color-primary-500) 0%, var(--color-purple-500) 100%);
    transition: transform var(--transition-fast) var(--ease-in-out), box-shadow var(--transition-fast) var(--ease-in-out);
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.25);
}

.mobile-menu-item:active i {
    transform: scale(0.92);
    box-shadow: 0 1px 4px rgba(99, 102, 241, 0.2);
}

/* Different gradient colors for menu items based on position */
.mobile-menu-item:nth-child(1) i { background: linear-gradient(135deg, var(--color-danger) 0%, var(--color-red-400) 100%); box-shadow: 0 2px 8px rgba(239, 68, 68, 0.25); }
.mobile-menu-item:nth-child(2) i { background: linear-gradient(135deg, var(--color-info) 0%, var(--color-blue-400) 100%); box-shadow: 0 2px 8px rgba(59, 130, 246, 0.25); }
.mobile-menu-item:nth-child(3) i { background: linear-gradient(135deg, var(--color-purple-500) 0%, #a78bfa 100%); box-shadow: 0 2px 8px rgba(139, 92, 246, 0.25); }
.mobile-menu-item:nth-child(4) i { background: linear-gradient(135deg, #14b8a6 0%, #2dd4bf 100%); box-shadow: 0 2px 8px rgba(20, 184, 166, 0.25); }
.mobile-menu-item:nth-child(5) i { background: linear-gradient(135deg, var(--color-warning) 0%, var(--color-amber-300) 100%); box-shadow: 0 2px 8px rgba(245, 158, 11, 0.25); }
.mobile-menu-item:nth-child(6) i { background: linear-gradient(135deg, var(--color-success) 0%, #34d399 100%); box-shadow: 0 2px 8px rgba(16, 185, 129, 0.25); }
.mobile-menu-item:nth-child(7) i { background: linear-gradient(135deg, var(--color-pink-500) 0%, var(--color-pink-400) 100%); box-shadow: 0 2px 8px rgba(236, 72, 153, 0.25); }
.mobile-menu-item:nth-child(8) i { background: linear-gradient(135deg, var(--color-cyan-500) 0%, var(--color-cyan-400) 100%); box-shadow: 0 2px 8px rgba(6, 182, 212, 0.25); }

/* Dark mode icon adjustments */
[data-theme="dark"] .mobile-menu-item i {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Admin section special styling */
.mobile-menu-section-title[style*="color: var(--color-orange-600)"] ~ .mobile-menu-item i {
    background: linear-gradient(135deg, var(--color-orange-600) 0%, var(--color-orange-500) 100%) !important;
    box-shadow: 0 2px 8px rgba(234, 88, 12, 0.25) !important;
}

.mobile-menu-section-title[style*="color: var(--color-orange-600)"] {
    font-weight: var(--font-weight-bold);
}

.mobile-menu-item-badge {
    margin-left: auto;
    min-width: calc(var(--space-5) + var(--space-1));
    height: calc(var(--space-5) + var(--space-1));
    background: #ff3b30;
    color: white;
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    border-radius: calc(var(--space-3) - var(--space-1));
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 calc(var(--space-2) - var(--space-1));
}

.mobile-menu-item-arrow {
    margin-left: auto;
    color: var(--mobile-menu-text-secondary);
    font-size: var(--font-size-sm);
    opacity: 0.5;
}

/* Quick Stats Row - Enhanced with gradients */
.mobile-menu-stats {
    display: flex;
    gap: var(--space-3);
    padding: var(--space-4) var(--space-4);
    margin: var(--space-4) var(--space-4);
}

.mobile-menu-stat {
    flex: 1;
    text-align: center;
    padding: var(--space-3) var(--space-3);
    text-decoration: none;
    color: var(--mobile-menu-text);
    position: relative;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
    border-radius: var(--radius-lg);
    border: 1px solid rgba(99, 102, 241, 0.15);
    transition: transform var(--transition-fast) var(--ease-in-out), background var(--transition-fast) var(--ease-in-out);
}

.mobile-menu-stat:active {
    transform: scale(0.96);
}

.mobile-menu-stat:nth-child(1) {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(52, 211, 153, 0.08) 100%);
    border-color: rgba(16, 185, 129, 0.15);
}

.mobile-menu-stat:nth-child(2) {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(96, 165, 250, 0.08) 100%);
    border-color: rgba(59, 130, 246, 0.15);
}

.mobile-menu-stat:nth-child(3) {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(248, 113, 113, 0.08) 100%);
    border-color: rgba(239, 68, 68, 0.15);
}

[data-theme="dark"] .mobile-menu-stat {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.12) 0%, rgba(139, 92, 246, 0.12) 100%);
    border-color: rgba(99, 102, 241, 0.2);
}

[data-theme="dark"] .mobile-menu-stat:nth-child(1) {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(52, 211, 153, 0.12) 100%);
    border-color: rgba(16, 185, 129, 0.2);
}

[data-theme="dark"] .mobile-menu-stat:nth-child(2) {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(96, 165, 250, 0.12) 100%);
    border-color: rgba(59, 130, 246, 0.2);
}

[data-theme="dark"] .mobile-menu-stat:nth-child(3) {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.12) 0%, rgba(248, 113, 113, 0.12) 100%);
    border-color: rgba(239, 68, 68, 0.2);
}

.mobile-menu-stat-value {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    background: linear-gradient(135deg, var(--color-primary-500) 0%, var(--color-purple-500) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.2;
}

.mobile-menu-stat:nth-child(1) .mobile-menu-stat-value {
    background: linear-gradient(135deg, var(--color-success) 0%, #34d399 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.mobile-menu-stat:nth-child(2) .mobile-menu-stat-value {
    background: linear-gradient(135deg, var(--color-info) 0%, var(--color-blue-400) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.mobile-menu-stat:nth-child(3) .mobile-menu-stat-value {
    background: linear-gradient(135deg, var(--color-danger) 0%, var(--color-red-400) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.mobile-menu-stat-label {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    color: var(--mobile-menu-text-secondary);
    margin-top: var(--space-1);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Menu Footer */
.mobile-menu-footer {
    padding: var(--space-4) var(--space-5);
    padding-bottom: calc(var(--space-4) + var(--safe-bottom));
    border-top: 0.5px solid var(--mobile-menu-divider);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.mobile-menu-footer-btn {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    background: var(--mobile-menu-item-hover);
    border: none;
    border-radius: var(--radius-md);
    color: var(--mobile-menu-text);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: transform var(--transition-fast) var(--ease-in-out), background var(--transition-fast) var(--ease-in-out);
}

.mobile-menu-footer-btn:active {
    transform: scale(0.95);
}

.mobile-menu-footer-btn.danger {
    color: #ff3b30;
}

.mobile-menu-footer-btn.danger:active {
    background: rgba(255, 59, 48, 0.1);
}


/* ============================================
   3. NOTIFICATION SHEET - Better Bell Display
   ============================================ */

.mobile-notification-sheet {
    position: fixed;
    inset: 0;
    z-index: var(--z-modal-backdrop, 1300);
    visibility: hidden;
    pointer-events: none;
}

.mobile-notification-sheet.active {
    visibility: visible;
    pointer-events: auto;
}

/* Hide bottom nav when notification sheet is active */
@media (max-width: 1024px) {
    body.mobile-notifications-open .mobile-tab-bar,
    body.mobile-notifications-open #mobileTabBar {
        transform: translateY(100%) !important;
        opacity: 0 !important;
        pointer-events: none !important;
        transition: transform var(--transition-base) var(--ease-in-out), opacity var(--transition-base) ease !important;
    }
}

.mobile-notification-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    opacity: 0;
    transition: opacity var(--transition-base) var(--ease-in-out);
    -webkit-tap-highlight-color: transparent;
}

.mobile-notification-sheet.active .mobile-notification-backdrop {
    opacity: 1;
}

.mobile-notification-container {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: 85vh;
    background: var(--mobile-menu-bg);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    transform: translateY(100%);
    transition: transform var(--transition-slow) var(--ease-ios);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    padding-bottom: var(--safe-bottom);
}

.mobile-notification-sheet.active .mobile-notification-container {
    transform: translateY(0);
}

/* Sheet Handle */
.mobile-notification-handle {
    display: flex;
    justify-content: center;
    padding: var(--space-3) 0 var(--space-2);
}

.mobile-notification-handle::after {
    content: '';
    width: calc(var(--space-8) + var(--space-1));
    height: var(--space-1);
    background: var(--mobile-menu-divider);
    border-radius: var(--radius-sm);
}

/* Notification Header */
.mobile-notification-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-2) var(--space-5) var(--space-4);
    border-bottom: 0.5px solid var(--mobile-menu-divider);
}

.mobile-notification-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    margin: 0;
    color: var(--mobile-menu-text);
}

.mobile-notification-actions {
    display: flex;
    gap: var(--space-3);
}

.mobile-notification-action {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--mobile-nav-active);
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--space-2);
    -webkit-tap-highlight-color: transparent;
}

.mobile-notification-action:active {
    opacity: 0.6;
}

/* Notification List */
.mobile-notification-list {
    flex: 1;
    overflow-y: auto;
}

.mobile-notification-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-4) var(--space-5);
    text-decoration: none;
    color: var(--mobile-menu-text);
    border-bottom: 0.5px solid var(--mobile-menu-divider);
    -webkit-tap-highlight-color: transparent;
    transition: background var(--transition-fast) var(--ease-in-out);
}

.mobile-notification-item:active {
    background: var(--mobile-menu-item-hover);
}

.mobile-notification-item.unread {
    background: rgba(99, 102, 241, 0.04);
}

.mobile-notification-dot {
    width: calc(var(--space-2) + var(--space-1));
    height: calc(var(--space-2) + var(--space-1));
    border-radius: var(--radius-full);
    background: #ff3b30;
    flex-shrink: 0;
    margin-top: var(--space-2);
}

.mobile-notification-item:not(.unread) .mobile-notification-dot {
    background: var(--mobile-menu-divider);
}

.mobile-notification-content {
    flex: 1;
    min-width: 0;
}

.mobile-notification-message {
    font-size: var(--font-size-sm);
    line-height: 1.4;
    margin: 0 0 var(--space-1) 0;
}

.mobile-notification-time {
    font-size: var(--font-size-xs);
    color: var(--mobile-menu-text-secondary);
}

.mobile-notification-empty {
    padding: calc(var(--space-12) + var(--space-3)) var(--space-5);
    text-align: center;
}

.mobile-notification-empty i {
    font-size: calc(var(--font-size-3xl) + 1.125rem);
    color: var(--mobile-menu-divider);
    margin-bottom: var(--space-4);
}

.mobile-notification-empty p {
    color: var(--mobile-menu-text-secondary);
    font-size: var(--font-size-sm);
    margin: 0;
}


/* ============================================
   4. HIDE ON DESKTOP
   ============================================ */

@media (min-width: 1024px) {

    .mobile-tab-bar,
    .mobile-fullscreen-menu,
    .mobile-notification-sheet,
    .nexus-native-drawer,
    .nexus-native-drawer-overlay {
        display: none !important;
        visibility: hidden !important;
        pointer-events: none !important;
    }

    body {
        padding-bottom: 0 !important;
    }
}


/* ============================================
   5. LANDSCAPE MODE
   ============================================ */

@media (max-width: 1024px) and (orientation: landscape) {
    .mobile-tab-bar {
        height: 60px;
        --mobile-nav-height: 60px;
    }

    .mobile-tab-item {
        flex-direction: row;
        gap: var(--space-2);
    }

    .mobile-tab-item i {
        font-size: var(--font-size-xl);
    }

    .mobile-tab-item span {
        font-size: var(--font-size-xs);
    }

    .mobile-menu-header {
        padding-top: var(--space-3);
    }
}


/* ============================================
   6. REDUCED MOTION
   ============================================ */

@media (prefers-reduced-motion: reduce) {

    .mobile-fullscreen-menu,
    .mobile-notification-container,
    .mobile-tab-item {
        transition-duration: 0.01ms !important;
    }
}


/* ============================================
   7. DARK MODE ENHANCEMENTS
   ============================================ */

[data-theme="dark"] .mobile-tab-bar {
    background: rgba(0, 0, 0, 0.85);
}

[data-theme="dark"] .mobile-menu-header {
    background: linear-gradient(180deg, rgba(99, 102, 241, 0.08) 0%, transparent 100%);
}

[data-theme="dark"] .mobile-menu-stats {
    background: #1c1c1e;
}

[data-theme="dark"] .mobile-notification-container {
    background: #1c1c1e;
}

[data-theme="dark"] .mobile-tab-item.create-btn::before {
    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.5);
}


/* ============================================
   8. ENHANCED MOBILE INTERACTIONS
   ============================================ */

/* Subtle pulse animation for Create button */
@keyframes create-btn-glow {

    0%,
    100% {
        box-shadow:
            0 4px 14px rgba(99, 102, 241, 0.4),
            0 2px 6px rgba(99, 102, 241, 0.2);
    }

    50% {
        box-shadow:
            0 6px 20px rgba(99, 102, 241, 0.5),
            0 3px 10px rgba(99, 102, 241, 0.3);
    }
}

.mobile-tab-item.create-btn::before {
    animation: create-btn-glow 3s ease-in-out infinite;
}

.mobile-tab-item.create-btn:active::before {
    animation: none;
}

/* Active indicator dot */
.mobile-tab-item:not(.create-btn).active::after {
    content: '';
    position: absolute;
    bottom: var(--space-1);
    left: 50%;
    transform: translateX(-50%);
    width: var(--space-1);
    height: var(--space-1);
    background: var(--color-primary-500);
    border-radius: var(--radius-full);
}

[data-theme="dark"] .mobile-tab-item:not(.create-btn).active::after,
.dark-mode .mobile-tab-item:not(.create-btn).active::after {
    background: var(--color-primary-400);
}


/* Smooth scrolling for menu */
.mobile-menu-body {
    scroll-behavior: smooth;
}

/* Better notification item hover/active state */
.mobile-notification-item {
    position: relative;
    overflow: hidden;
}

.mobile-notification-item::after {
    position: absolute;
    right: var(--space-5);
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: opacity var(--transition-fast) var(--ease-in-out);
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    content: '\f054';
    /* chevron-right */
    font-size: var(--font-size-xs);
    color: var(--mobile-menu-text-secondary);
}

.mobile-notification-item:active::after {
    opacity: 0.5;
}

/* Improved badge animation */
@keyframes badge-bounce {

    0%,
    100% {
        transform: translateX(4px) scale(1);
    }

    50% {
        transform: translateX(4px) scale(1.1);
    }
}

.mobile-tab-badge {
    animation: badge-bounce 2s ease-in-out infinite;
}

/* Menu item active highlight */
.mobile-menu-item {
    position: relative;
    overflow: hidden;
}

.mobile-menu-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--mobile-nav-active);
    transform: scaleY(0);
    transition: transform var(--transition-fast) var(--ease-in-out);
}

.mobile-menu-item:active::before {
    transform: scaleY(1);
}

/* Stats card hover effect */
.mobile-menu-stat {
    transition: transform var(--transition-fast) var(--ease-in-out);
}

.mobile-menu-stat:active {
    transform: scale(0.95);
}

/* Footer button improved states */
.mobile-menu-footer-btn {
    position: relative;
    overflow: hidden;
}

.mobile-menu-footer-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: currentColor;
    opacity: 0;
    transition: opacity var(--transition-fast) var(--ease-in-out);
}

.mobile-menu-footer-btn:active::after {
    opacity: 0.1;
}

/* Theme toggle smooth transition */
.theme-toggle-inline {
    transition: background var(--transition-base) var(--ease-in-out), color var(--transition-base) var(--ease-in-out);
}

.theme-toggle-inline i {
    transition: transform var(--transition-base) var(--ease-in-out);
}

.theme-toggle-inline:active i {
    transform: rotate(180deg);
}

/* Sheet drag indicator animation */
@keyframes handle-hint {

    0%,
    100% {
        transform: scaleX(1);
    }

    50% {
        transform: scaleX(0.8);
    }
}

.mobile-notification-handle::after {
    animation: handle-hint 2s ease-in-out 1;
    animation-delay: 0.5s;
}

/* Empty state animation */
@keyframes empty-float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-8px);
    }
}

.mobile-notification-empty i {
    animation: empty-float 3s ease-in-out infinite;
}


/* ============================================
   9. iOS SAFE AREA IMPROVEMENTS
   ============================================ */

/* Better notch handling */
@supports (padding-top: env(safe-area-inset-top)) {
    .mobile-fullscreen-menu {
        padding-top: env(safe-area-inset-top);
    }

    .mobile-menu-header {
        padding-top: calc(var(--space-4) + env(safe-area-inset-top));
    }
}

/* iPhone with Dynamic Island */
@supports (padding-top: max(env(safe-area-inset-top), 47px)) {
    .mobile-fullscreen-menu {
        padding-top: max(env(safe-area-inset-top), 0px);
    }
}

/* Home indicator area */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
    .mobile-notification-container {
        padding-bottom: max(var(--space-4), env(safe-area-inset-bottom));
    }
}

/* ========================================
 * mobile-nav-v2.css
 * ======================================== */

/**
 * Modern Mobile Navigation v2 - CSS
 * Full-screen, native app-like mobile navigation
 * Inspired by Instagram, TikTok, and iOS design patterns
 * Migrated to design tokens for consistency
 */

/* FIX: Remove transform from html that breaks position:fixed */
html[data-layout] {
    transform: none !important;
}

/* Hide on desktop by default */
.mobile-tab-bar {
    display: none;
}

/* CRITICAL: Hide mobile fullscreen menu and notification sheet on desktop */
.mobile-fullscreen-menu,
.mobile-notification-sheet,
#mobileMenu,
#mobileNotifications {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* Only show these elements on mobile/tablet */
@media (max-width: 1024px) {
    .mobile-fullscreen-menu,
    #mobileMenu {
        /* CRITICAL: Must be flex for scroll to work - menu-body needs flex: 1 */
        display: flex !important;
        flex-direction: column !important;
        visibility: visible !important;
        opacity: 1 !important;
        pointer-events: auto !important;
    }

    .mobile-notification-sheet,
    #mobileNotifications {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        pointer-events: auto !important;
    }

    /* But when not active, hide them properly */
    .mobile-fullscreen-menu:not(.active),
    #mobileMenu:not(.active) {
        transform: translateX(100%) !important;
    }

    .mobile-notification-sheet:not(.active),
    #mobileNotifications:not(.active) {
        transform: translateY(100%) !important;
    }
}

/* CRITICAL: Hide ALL legacy navigation on mobile including drawer AND header hamburger */
@media (max-width: 1024px) {
    .nexus-native-nav,
    .nexus-native-nav-inner,
    .nexus-bottom-nav,
    .nexus-quick-fab,
    .nexus-native-drawer,
    .nexus-native-drawer-overlay {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        transform: translateX(-100%) !important;
    }

    /* Hide header hamburger menu buttons - we have Menu in bottom tab bar */
    .nexus-menu-btn,
    #civic-menu-toggle {
        display: none !important;
    }

    /* Show mobile tab bar */
    .mobile-tab-bar {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: var(--z-navbar) !important;
        height: var(--layout-mobile-nav-height) !important;
        background: rgba(255, 255, 255, 0.98) !important;
        border-top: 1px solid var(--border-default) !important;
        -webkit-backdrop-filter: saturate(var(--glass-saturation)) blur(var(--glass-blur-subtle)) !important;
        backdrop-filter: saturate(var(--glass-saturation)) blur(var(--glass-blur-subtle)) !important;
    }

    [data-theme="dark"] .mobile-tab-bar {
        background: rgba(28, 28, 30, 0.98) !important;
        border-top-color: var(--border-default) !important;
    }

    body {
        padding-bottom: 90px !important;
    }

    /* Ensure menu button looks like other tab items */
    .mobile-tab-item[type="button"],
    button.mobile-tab-item {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        margin: 0;
        font-family: inherit;
        outline: none;
        -webkit-appearance: none;
        appearance: none;
    }
}

/* ==========================================
   Mobile Menu Item Icon Colors
   Using CSS classes instead of inline styles
   ========================================== */

/* Create section icons */
.mobile-menu-icon-post { color: var(--color-info); }
.mobile-menu-icon-listing { color: var(--color-success); }
.mobile-menu-icon-event { color: var(--color-warning); }
.mobile-menu-icon-volunteer { color: var(--color-pink-500); }
.mobile-menu-icon-poll { color: var(--color-purple-500); }
.mobile-menu-icon-goal { color: var(--color-danger); }

/* Help section icons */
.mobile-menu-icon-help { color: var(--color-orange-500); }
.mobile-menu-icon-contact { color: var(--color-info); }
.mobile-menu-icon-accessibility { color: var(--color-success); }

/* Admin section */
.mobile-menu-section-admin .mobile-menu-section-title {
    color: var(--color-orange-600);
}

/* AI Assistant special styling */
.mobile-menu-item-ai {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
    font-weight: var(--font-weight-semibold);
}

/* Arrow icon in user profile link */
.mobile-menu-user-arrow {
    font-size: var(--font-size-xs);
    margin-right: var(--space-1);
}


/* ========================================
 * nexus-header-extracted.css
 * ======================================== */

/**
 * Nexus Header - Extracted Inline Styles
 * Consolidated from views/layouts/modern/header.php inline <style> blocks
 * Per CLAUDE.md: No inline styles except for truly dynamic values
 * Version: 2.0 - 2026-01-21 - Migrated to design tokens
 */

/* ============================================
   SCROLL FIX - Critical for mouse wheel scrolling
   Previously: id="scroll-fix-inline"
   ============================================ */

/* HTML: Always show scrollbar, allow vertical scroll */
html,
html:root,
html[data-theme],
html[data-layout] {
    overflow-y: scroll !important;
    overflow-x: hidden !important;
    height: auto !important;
}

/* BODY: Use overflow-y: auto (NOT visible - visible breaks mouse wheel scroll!) */
body,
html body,
html[data-theme] body,
html[data-layout] body {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    position: static !important;
    height: auto !important;
}

/* Modal/drawer states: Lock scroll ONLY when actually open */
body.drawer-open,
body.modal-open,
body.fds-sheet-open,
body.keyboard-open,
body.mobile-menu-open,
body.menu-open {
    overflow: hidden !important;
    overflow-y: hidden !important;
}

/* ============================================
   LAYOUT STABILITY LOCK
   Prevents JS layout shifts during page load
   ============================================ */

html[data-layout-stable] * {
    transition-duration: 0ms !important;
    animation-duration: 0ms !important;
}

/* ============================================
   OFFLINE BANNER
   Hide by default, show only after JS verification
   ============================================ */

.offline-banner,
#offlineBanner {
    display: none !important;
}

.offline-banner.verified-offline,
#offlineBanner.verified-offline {
    display: flex !important;
}

/* Always hide on desktop (unreliable navigator.onLine) */
@media (min-width: 768px) {
    .offline-banner,
    #offlineBanner,
    .offline-banner.verified-offline,
    #offlineBanner.verified-offline {
        display: none !important;
    }
}

/* ============================================
   BRAND LINK - Site logo/name styling
   Gradient text with hover effects
   ============================================ */

.nexus-brand-link {
    display: inline-flex !important;
    align-items: baseline !important;
    gap: 0.3em !important;
    font-size: clamp(1.15rem, 2.5vw, 1.5rem) !important;
    font-weight: var(--font-weight-bold) !important;
    letter-spacing: -0.5px !important;
    text-transform: uppercase !important;
    text-decoration: none !important;
    transition: all var(--transition-base) !important;
}

/* Primary word - gradient text for modern look */
.nexus-brand-link .brand-primary {
    background: linear-gradient(135deg, var(--color-primary-300) 0%, var(--color-primary-400) 50%, var(--color-primary-500) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 900;
}

/* Secondary word - complementary warm tone */
.nexus-brand-link .brand-secondary {
    background: linear-gradient(135deg, var(--color-amber-300) 0%, var(--color-warning) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: var(--font-weight-bold);
}

.nexus-brand-link:hover {
    transform: translateY(-1px);
}

.nexus-brand-link:hover .brand-primary {
    background: linear-gradient(135deg, var(--color-primary-200) 0%, var(--color-primary-300) 50%, var(--color-primary-400) 100%);
    -webkit-background-clip: text;
    background-clip: text;
    filter: drop-shadow(0 var(--space-1) var(--space-2) rgba(99, 102, 241, 0.4));
}

.nexus-brand-link:hover .brand-secondary {
    background: linear-gradient(135deg, var(--color-amber-300) 0%, var(--color-amber-300) 100%);
    -webkit-background-clip: text;
    background-clip: text;
    filter: drop-shadow(0 var(--space-1) var(--space-2) rgba(251, 191, 36, 0.4));
}

/* Light mode - deeper colors for contrast */
[data-theme="light"] .nexus-brand-link .brand-primary {
    background: linear-gradient(135deg, var(--color-primary-600) 0%, var(--color-primary-700) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

[data-theme="light"] .nexus-brand-link .brand-secondary {
    background: linear-gradient(135deg, var(--color-amber-600) 0%, var(--color-amber-700) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

[data-theme="light"] .nexus-brand-link:hover .brand-primary {
    background: linear-gradient(135deg, var(--color-primary-500) 0%, var(--color-primary-600) 100%);
    -webkit-background-clip: text;
    background-clip: text;
}

[data-theme="light"] .nexus-brand-link:hover .brand-secondary {
    background: linear-gradient(135deg, var(--color-warning) 0%, var(--color-amber-600) 100%);
    -webkit-background-clip: text;
    background-clip: text;
}

/* ============================================
   MOBILE ACTIONS - Notification & menu buttons
   ============================================ */

.nexus-mobile-actions {
    display: none;
    align-items: center;
    gap: var(--space-1);
}

.nexus-notif-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border: none;
    background: transparent;
    color: #fff;
    font-size: var(--font-size-lg);
    cursor: pointer;
    border-radius: var(--radius-full);
    position: relative;
    transition: background-color var(--transition-fast);
}

.nexus-notif-btn:hover,
.nexus-notif-btn:focus {
    background: rgba(255, 255, 255, 0.1);
}

.nexus-notif-badge {
    position: absolute;
    top: var(--space-1);
    right: var(--space-1);
    min-width: var(--space-4);
    height: var(--space-4);
    background: #ff3b30;
    color: white;
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    border-radius: var(--radius-base);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 var(--space-1);
}

@media (max-width: 1024px) {
    .nexus-mobile-actions {
        display: flex;
    }

    /* Hide standalone menu button when wrapped */
    .nexus-navbar > .nexus-menu-btn {
        display: none !important;
    }
}

/* Light mode mobile notification button */
[data-theme="light"] .nexus-notif-btn {
    color: var(--color-gray-700) !important;
}

[data-theme="light"] .nexus-notif-btn:hover,
[data-theme="light"] .nexus-notif-btn:focus {
    background: rgba(99, 102, 241, 0.1) !important;
    color: var(--color-primary-600) !important;
}

/* Light mode mobile menu button (hamburger) */
[data-theme="light"] .nexus-menu-btn span {
    background: var(--color-gray-700) !important;
}


/* ========================================
 * modern-header-utilities.css
 * ======================================== */

/**
 * Modern Header Utilities Styles
 * Extracted from inline styles in views/layouts/modern/header.php
 * Migrated to design tokens for consistency
 */

/* Left utilities layout */
.left-utils {
    display: flex;
    align-items: center;
}

/* Platform dropdown button */
.platform-dropdown-btn {
    font-weight: var(--font-weight-bold);
    text-transform: uppercase;
    font-size: var(--font-size-sm);
}

/* Platform dropdown content positioning */
.platform-dropdown .htb-dropdown-content {
    min-width: 200px;
    left: 0;
    right: auto;
}

/* Right header utilities */
.right-header-utils {
    display: flex;
    align-items: center;
    margin-left: auto;
}

/* Layout switcher styles */
.layout-option--modern {
    font-weight: var(--font-weight-bold);
    color: var(--color-primary-600);
}

.layout-badge--stable {
    font-size: var(--font-size-xs);
    color: var(--color-success);
}

.layout-divider {
    border-top: 1px solid var(--color-gray-200);
    margin: var(--space-2) 0;
}

.layout-section-label {
    padding: var(--space-1) var(--space-3);
    font-size: var(--font-size-xs);
    color: var(--color-gray-500);
    font-weight: var(--font-weight-medium);
}

.layout-option--civicone {
    opacity: 0.7;
}

.layout-option--civicone.active {
    font-weight: var(--font-weight-bold);
    color: var(--color-green-700);
    opacity: 1;
}

.layout-badge--beta {
    font-size: var(--font-size-xs);
    color: var(--color-warning);
}

/* Create button styling */
.create-dropdown-btn {
    font-weight: var(--font-weight-bold);
    color: var(--color-success);
}

/* Federation dropdown */
.federation-dropdown-btn {
    font-weight: var(--font-weight-bold);
    color: var(--color-purple-500);
}

.federation-dropdown-btn .fa-globe {
    margin-right: var(--space-1);
}

.federation-dropdown .htb-dropdown-content {
    min-width: 220px;
}

.federation-hub-link {
    font-weight: var(--font-weight-semibold);
    color: var(--color-purple-500);
}

.federation-hub-link .fa-house {
    margin-right: var(--space-1);
}

/* Federation menu icons */
.federation-menu-icon {
    margin-right: var(--space-1);
}

.federation-menu-icon--members {
    color: var(--color-purple-500);
}

.federation-menu-icon--listings {
    color: var(--color-pink-500);
}

.federation-menu-icon--events {
    color: var(--color-warning);
}

.federation-menu-icon--groups {
    color: var(--color-primary-500);
}

.federation-menu-icon--messages {
    color: var(--color-blue-500);
}

.federation-menu-icon--transactions {
    color: var(--color-success);
}

.federation-menu-icon--settings {
    color: var(--color-gray-500);
}

/* Newsletter button */
.newsletter-dropdown-btn {
    font-weight: var(--font-weight-bold);
    color: var(--color-warning);
}

/* Admin link */
.admin-link {
    font-weight: var(--font-weight-bold);
    color: var(--color-orange-600);
}

/* Group ranking link */
.group-ranking-link {
    font-weight: var(--font-weight-bold);
    color: var(--color-pink-600);
}

/* Notification button with indicator */
.nexus-header-icon-btn {
    position: relative;
}

.nexus-notif-indicator {
    position: absolute;
    top: var(--space-1);
    right: var(--space-1);
    width: 10px;
    height: 10px;
    background: var(--color-danger);
    border-radius: var(--radius-full);
    border: 2px solid var(--header-bg, var(--color-indigo-950));
    box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.3);
}

/* User dropdown */
.user-dropdown-btn {
    padding: var(--space-1) var(--space-3);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.user-avatar {
    width: 28px;
    height: 28px;
    border-radius: var(--radius-full);
    object-fit: cover;
}

.user-name {
    font-weight: var(--font-weight-semibold);
}

.user-dropdown .htb-dropdown-content {
    min-width: 220px;
}

/* User dropdown icons */
.user-menu-icon {
    margin-right: var(--space-2);
    width: var(--space-4);
    text-align: center;
}

.user-menu-icon--profile {
    color: var(--color-primary-500);
}

.user-menu-icon--dashboard {
    color: var(--color-purple-500);
}

.user-menu-icon--wallet {
    color: var(--color-success);
}

/* User menu divider */
.user-menu-divider {
    border-top: 1px solid var(--color-gray-200);
    margin: var(--space-2) 0;
}

/* Logout link */
.logout-link {
    color: var(--color-danger);
    font-weight: var(--font-weight-semibold);
}

/* Auth links */
.auth-link--join {
    font-weight: var(--font-weight-bold);
    color: #fff;
}

/* Desktop utilities layout */
.desktop-header-utils {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

/* Navigation icons */
.nav-icon {
    margin-right: var(--space-1);
}

.nav-icon--explore {
    margin-right: var(--space-1);
}

.nav-icon--page {
    margin-right: var(--space-1);
    opacity: 0.7;
}

/* Menu item icons with colors */
.menu-item-icon {
    margin-right: var(--space-2);
    width: var(--space-4);
    text-align: center;
}

/* Explore menu highlight */
.menu-item--highlighted {
    background: rgba(99, 102, 241, 0.1);
}

/* Collapsible search */
.collapsible-search-container {
    margin-left: var(--space-3);
    display: flex;
    align-items: center;
}


/* ========================================
 * premium-dropdowns.css
 * ======================================== */

/* ========================================
   PREMIUM GLASSMORPHISM DROPDOWN BUTTONS
   Extracted from header.php for better maintainability
   ======================================== */

/* Premium Dropdown Trigger Styling */
.premium-dropdown-trigger {
    position: relative !important;
    display: inline-block !important;
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.15) 0%,
        rgba(139, 92, 246, 0.12) 100%) !important;
    backdrop-filter: blur(var(--blur-subtle)) saturate(160%) !important;
    -webkit-backdrop-filter: blur(var(--blur-subtle)) saturate(160%) !important;
    border: 1px solid rgba(139, 92, 246, 0.25) !important;
    border-radius: var(--radius-base) !important;
    padding: var(--space-2) var(--space-4) !important;
    font-weight: var(--font-weight-semibold) !important;
    color: rgba(255, 255, 255, 0.95) !important;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
    box-shadow:
        0 2px 12px rgba(99, 102, 241, 0.12),
        0 4px 20px rgba(139, 92, 246, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
    transition: all 0.35s var(--ease-in-out) !important;
    overflow: visible !important;
}

/* Shimmer overlay effect - fixed positioning */
.premium-dropdown-trigger::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: -100% !important;
    width: 100% !important;
    height: 100% !important;
    background: linear-gradient(90deg,
        transparent,
        rgba(255, 255, 255, 0.12),
        transparent) !important;
    transition: left var(--transition-slow) ease !important;
    pointer-events: none !important;
    border-radius: var(--radius-base) !important;
}

.premium-dropdown-trigger:hover::before {
    left: 100% !important;
}

/* Hover state - enhanced glow */
.premium-dropdown-trigger:hover {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.22) 0%,
        rgba(139, 92, 246, 0.18) 100%) !important;
    border-color: rgba(139, 92, 246, 0.35) !important;
    box-shadow:
        0 4px 20px rgba(99, 102, 241, 0.2),
        0 6px 32px rgba(139, 92, 246, 0.15),
        0 0 0 3px rgba(99, 102, 241, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
    transform: translateY(-1px) !important;
    color: #fff !important;
}

/* Active/Open state */
.premium-dropdown:hover .premium-dropdown-trigger,
.premium-dropdown-trigger:active {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.28) 0%,
        rgba(139, 92, 246, 0.24) 100%) !important;
    border-color: rgba(139, 92, 246, 0.45) !important;
    box-shadow:
        0 6px 28px rgba(99, 102, 241, 0.25),
        0 8px 40px rgba(139, 92, 246, 0.2),
        0 0 0 4px rgba(99, 102, 241, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
    transform: translateY(-2px) scale(1.02) !important;
}

/* Premium Dropdown Container */
.premium-dropdown {
    position: relative !important;
    display: inline-block !important;
}

/* Hide dropdown menu by default */
.premium-dropdown .premium-dropdown-menu {
    display: none !important;
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
}

/* Show dropdown menu on hover */
.premium-dropdown:hover .premium-dropdown-menu {
    display: block !important;
}

/* Premium Dropdown Menu Styling */
.premium-dropdown-menu {
    background: linear-gradient(135deg,
        rgba(30, 41, 59, 0.98) 0%,
        rgba(51, 65, 85, 0.96) 100%) !important;
    backdrop-filter: blur(28px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(28px) saturate(180%) !important;
    border: 1px solid rgba(139, 92, 246, 0.2) !important;
    border-radius: var(--radius-md) !important;
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.3),
        0 12px 48px rgba(99, 102, 241, 0.15),
        0 0 0 1px rgba(255, 255, 255, 0.05),
        inset 0 1px 0 rgba(255, 255, 255, 0.08) !important;
    margin-top: var(--space-3) !important;
    padding: var(--space-2) 0 !important;
    min-width: 200px !important;
    z-index: var(--z-dropdown) !important;
}

/* Dropdown menu items */
.premium-dropdown-menu a {
    color: rgba(255, 255, 255, 0.9) !important;
    padding: var(--space-2) var(--space-5) !important;
    transition: all var(--transition-base) var(--ease-in-out) !important;
    position: relative !important;
    overflow: hidden !important;
}

.premium-dropdown-menu a::before {
    content: '' !important;
    position: absolute !important;
    left: 0 !important;
    top: 0 !important;
    height: 100% !important;
    width: 3px !important;
    background: linear-gradient(180deg,
        rgba(99, 102, 241, 0.8),
        rgba(139, 92, 246, 0.8)) !important;
    transform: scaleY(0) !important;
    transition: transform var(--transition-base) !important;
}

.premium-dropdown-menu a:hover::before {
    transform: scaleY(1) !important;
}

.premium-dropdown-menu a:hover {
    background: linear-gradient(90deg,
        rgba(99, 102, 241, 0.15) 0%,
        rgba(139, 92, 246, 0.08) 100%) !important;
    color: #fff !important;
    padding-left: var(--space-6) !important;
    text-shadow: 0 2px 8px rgba(99, 102, 241, 0.3) !important;
}

/* Arrow styling for dropdown triggers */
.premium-dropdown-trigger .htb-arrow {
    display: inline-block !important;
    transition: transform var(--transition-base) !important;
    margin-left: var(--space-1) !important;
}

.premium-dropdown:hover .premium-dropdown-trigger .htb-arrow {
    transform: rotate(180deg) !important;
}

/* Focus state for accessibility */
.premium-dropdown-trigger:focus {
    outline: none !important;
    box-shadow:
        0 6px 28px rgba(99, 102, 241, 0.25),
        0 8px 40px rgba(139, 92, 246, 0.2),
        0 0 0 4px rgba(99, 102, 241, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
}

/* ========================================
   LIGHT MODE PREMIUM DROPDOWN
   ======================================== */
[data-theme="light"] .premium-dropdown-trigger {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.1) 0%,
        rgba(139, 92, 246, 0.08) 100%) !important;
    border: 1px solid rgba(99, 102, 241, 0.2) !important;
    color: var(--color-primary-600) !important;
    text-shadow: none !important;
    box-shadow:
        0 2px 12px rgba(99, 102, 241, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
}

[data-theme="light"] .premium-dropdown-trigger:hover {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.15) 0%,
        rgba(139, 92, 246, 0.12) 100%) !important;
    border-color: rgba(99, 102, 241, 0.3) !important;
    color: var(--color-primary-700) !important;
}

[data-theme="light"] .premium-dropdown:hover .premium-dropdown-trigger,
[data-theme="light"] .premium-dropdown-trigger:active {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.2) 0%,
        rgba(139, 92, 246, 0.15) 100%) !important;
    border-color: rgba(99, 102, 241, 0.4) !important;
    color: var(--color-primary-700) !important;
}

[data-theme="light"] .premium-dropdown-menu {
    background: rgba(255, 255, 255, 0.98) !important;
    border: 1px solid rgba(99, 102, 241, 0.15) !important;
    box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.1),
        0 12px 48px rgba(99, 102, 241, 0.08) !important;
}

[data-theme="light"] .premium-dropdown-menu a {
    color: var(--color-gray-700) !important;
}

[data-theme="light"] .premium-dropdown-menu a:hover {
    background: linear-gradient(90deg,
        rgba(99, 102, 241, 0.1) 0%,
        rgba(139, 92, 246, 0.05) 100%) !important;
    color: var(--color-primary-600) !important;
    text-shadow: none !important;
}

/* ========================================
   LIGHT MODE BRAND LOGO IN NAVBAR
   ======================================== */
[data-theme="light"] .nexus-navbar > a[href][style*="color: white"],
[data-theme="light"] .nexus-navbar > a[href][style*="color:white"] {
    color: var(--color-gray-800) !important;
}

/* Mobile adjustments */
@media (max-width: 768px) {
    .premium-dropdown-trigger {
        padding: var(--space-1) var(--space-3) !important;
        font-size: var(--font-size-sm) !important;
    }

    .premium-dropdown-menu {
        margin-top: var(--space-2) !important;
    }
}


/* ========================================
 * nexus-premium-mega-menu.css
 * ======================================== */

/**
 * NEXUS PREMIUM GLASSMORPHISM MEGA MENU
 * 500% Premium Holographic Design
 * Date: 2026-01-12
 * Migrated to design tokens: 2026-01-21
  * Fully Migrated to Design Tokens: 2026-01-21 
 */

/* ==========================================
   UTILITY BAR - MINIMIZED & PREMIUM
   ========================================== */

.nexus-utility-bar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 50px;
    /* 2026-01-27: Must be ABOVE navbar (z-navbar:120) for dropdowns - backdrop-filter creates stacking context */
    z-index: var(--z-mega-menu);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 var(--space-6);
    font-family: var(--font-family-primary);

    /* PREMIUM GLASSMORPHISM */
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.08) 0%,
            rgba(255, 255, 255, 0.03) 100%);
    backdrop-filter: blur(var(--glass-blur-heavy)) saturate(var(--glass-saturation));
    -webkit-backdrop-filter: blur(var(--glass-blur-heavy)) saturate(var(--glass-saturation));

    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 4px var(--space-6) rgba(0, 0, 0, 0.04),
        0 0 1px rgba(255, 255, 255, 0.1) inset,
        0 0 var(--space-20) rgba(99, 102, 241, 0.03);

    transition: all var(--transition-slow);
}

/* Dark Mode Utility Bar */
[data-theme="dark"] .nexus-utility-bar {
    background: linear-gradient(135deg,
            rgba(15, 23, 42, 0.85) 0%,
            rgba(30, 41, 59, 0.8) 100%);
    border-bottom: 1px solid rgba(148, 163, 184, 0.1);
    box-shadow: 0 4px var(--space-6) rgba(0, 0, 0, 0.2),
        0 0 1px rgba(255, 255, 255, 0.05) inset,
        0 0 var(--space-20) rgba(99, 102, 241, 0.08);
}

/* Scrolled state */
.nexus-utility-bar.scrolled {
    height: 44px;
    backdrop-filter: blur(50px) saturate(var(--glass-saturation));
    -webkit-backdrop-filter: blur(50px) saturate(var(--glass-saturation));
}

/* Utility Bar Links - Minimal */
.nexus-utility-bar .util-link {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    padding: var(--space-2) var(--space-3);
    margin: 0 var(--space-1);
    border-radius: var(--radius-base);
    transition: all var(--transition-base);
    position: relative;
    color: rgba(255, 255, 255, 0.7);
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.nexus-utility-bar .util-link:hover {
    color: rgba(255, 255, 255, 0.95);
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-1px);
}

[data-theme="dark"] .nexus-utility-bar .util-link {
    color: rgba(248, 250, 252, 0.7);
}

[data-theme="dark"] .nexus-utility-bar .util-link:hover {
    color: rgba(248, 250, 252, 0.95);
    background: rgba(255, 255, 255, 0.06);
}

/* ==========================================
   MAIN NAVBAR - PREMIUM GLASSMORPHISM
   ========================================== */

.nexus-navbar {
    position: fixed;
    top: 50px;
    left: 0;
    width: 100%;
    height: 72px;
    z-index: var(--z-navbar);
    padding: 0 var(--space-8);
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-sizing: border-box;

    /* ULTRA PREMIUM GLASSMORPHISM */
    background: linear-gradient(180deg,
            rgba(255, 255, 255, 0.75) 0%,
            rgba(255, 255, 255, 0.65) 100%);
    backdrop-filter: blur(60px) saturate(var(--glass-saturation)) brightness(1.05);
    -webkit-backdrop-filter: blur(60px) saturate(var(--glass-saturation)) brightness(1.05);

    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 var(--space-2) var(--space-8) rgba(31, 38, 135, 0.07),
        0 0 1px rgba(255, 255, 255, 0.3) inset,
        0 var(--space-5) var(--space-20) rgba(99, 102, 241, 0.05);

    transition: all var(--transition-slow);
}

/* Dark Mode Navbar */
[data-theme="dark"] .nexus-navbar {
    background: linear-gradient(180deg,
            rgba(15, 23, 42, 0.75) 0%,
            rgba(30, 41, 59, 0.7) 100%);
    border-bottom: 1px solid rgba(148, 163, 184, 0.1);
    box-shadow: 0 var(--space-2) var(--space-8) rgba(0, 0, 0, 0.3),
        0 0 1px rgba(255, 255, 255, 0.08) inset,
        0 var(--space-5) var(--space-20) rgba(99, 102, 241, 0.12);
}

.nexus-navbar.scrolled {
    top: 44px;
    height: 64px;
    backdrop-filter: blur(70px) saturate(var(--glass-saturation)) brightness(1.08);
    -webkit-backdrop-filter: blur(70px) saturate(var(--glass-saturation)) brightness(1.08);
}

/* ==========================================
   NAV LINKS - HOLOGRAPHIC STYLE
   ========================================== */

.nav-link {
    position: relative;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    padding: var(--space-3) var(--space-5);
    margin: 0 var(--space-1);
    border-radius: var(--radius-lg);
    color: var(--color-gray-700);
    text-decoration: none;
    transition: all 0.35s var(--ease-in-out);
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    overflow: hidden;
}

/* Holographic shimmer effect */
.nav-link::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: var(--radius-lg);
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.12),
            rgba(139, 92, 246, 0.08),
            rgba(236, 72, 153, 0.06));
    opacity: 0;
    transition: opacity 0.35s var(--ease-in-out);
}

/* Shimmer effect removed by request */
.nav-link::after {
    display: none;
}

.nav-link:hover {
    color: var(--color-primary-500);
    transform: translateY(-2px);
}

.nav-link:hover::before {
    opacity: 1;
}

.nav-link:hover::after {
    display: none;
}

[data-theme="dark"] .nav-link {
    color: rgba(248, 250, 252, 0.9);
}

[data-theme="dark"] .nav-link:hover {
    color: var(--color-primary-300);
}

/* Active nav link */
.nav-link.active {
    color: var(--color-primary-500) !important;
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.15),
            rgba(139, 92, 246, 0.1)) !important;
    box-shadow: 0 var(--space-1) var(--space-3) rgba(99, 102, 241, 0.2);
}

/* ==========================================
   PREMIUM MEGA MENU BUTTON
   ========================================== */

.mega-menu-wrapper {
    position: relative;
    display: inline-block;
    z-index: 101;
}

.mega-menu-trigger {
    position: relative;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-bold);
    padding: var(--space-3) var(--space-6) var(--space-3) var(--space-5);
    margin: 0 var(--space-1);
    border-radius: var(--radius-lg);
    color: white;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: var(--space-3);
    cursor: pointer;
    overflow: hidden;
    border: none;

    /* Gradient background */
    background: linear-gradient(135deg,
            #667eea 0%,
            #764ba2 50%,
            #f093fb 100%);
    background-size: 200% 200%;

    box-shadow: 0 var(--space-2) var(--space-6) rgba(102, 126, 234, 0.35),
        0 0 1px rgba(255, 255, 255, 0.4) inset;

    transition: all var(--transition-slow);
    animation: gradientShift 6s ease infinite;
}

@keyframes gradientShift {

    0%,
    100% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }
}

.mega-menu-trigger:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 var(--space-3) 36px rgba(102, 126, 234, 0.45),
        0 0 1px rgba(255, 255, 255, 0.6) inset,
        0 0 var(--space-10) rgba(102, 126, 234, 0.3);
}

.mega-menu-trigger:active {
    transform: translateY(-1px) scale(0.98);
}

/* Arrow animation */
.mega-menu-trigger .arrow {
    font-size: var(--font-size-xs);
    transition: transform var(--transition-base);
}

.mega-menu-trigger:hover .arrow,
.mega-menu-trigger.active .arrow {
    transform: rotate(180deg);
}

/* ==========================================
   MEGA MENU DROPDOWN - HOLOGRAPHIC GLASS
   ========================================== */

.mega-menu-dropdown {
    position: absolute;
    top: calc(100% + var(--space-2));
    left: 50%;
    min-width: 320px;
    max-width: 420px;
    max-height: calc(100vh - 180px);
    overflow-y: auto;

    /* ULTRA PREMIUM GLASSMORPHISM */
    background: linear-gradient(180deg,
            rgba(255, 255, 255, 0.95) 0%,
            /* Increased opacity to reduce repaint flickers */
            rgba(255, 255, 255, 0.90) 100%);
    backdrop-filter: blur(var(--space-20)) saturate(var(--glass-saturation)) brightness(1.1);
    -webkit-backdrop-filter: blur(var(--space-20)) saturate(var(--glass-saturation)) brightness(1.1);

    /* FIX: Replace hard border with shadow ring */
    border: none;
    border-radius: var(--radius-2xl);
    padding: var(--space-4);

    /* HOLOGRAPHIC SHADOW - Adjusted for no border */
    box-shadow: 0 var(--space-6) var(--space-20) rgba(31, 38, 135, 0.15),
        0 0 1px rgba(255, 255, 255, 0.6) inset,
        0 var(--space-10) 120px rgba(99, 102, 241, 0.15),
        0 0 0 1px rgba(99, 102, 241, 0.08);
    /* Simulated border via shadow */

    /* FIX: Force GPU */
    transform: translateX(-50%) translateY(-10px) translateZ(0);
    will-change: transform, opacity, visibility;

    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: all 0.35s var(--ease-in-out);
    z-index: var(--z-mega-menu);
}

/* Dark Mode Mega Menu */
[data-theme="dark"] .mega-menu-dropdown {
    background: linear-gradient(180deg,
            rgba(15, 23, 42, 0.92) 0%,
            rgba(30, 41, 59, 0.88) 100%);
    border: 1px solid rgba(148, 163, 184, 0.2);
    box-shadow: 0 var(--space-6) var(--space-20) rgba(0, 0, 0, 0.4),
        0 0 1px rgba(255, 255, 255, 0.1) inset,
        0 var(--space-10) 120px rgba(99, 102, 241, 0.25);
}

/* Show mega menu */
.mega-menu-wrapper:hover .mega-menu-dropdown,
.mega-menu-wrapper.active .mega-menu-dropdown {
    opacity: 1;
    visibility: visible;
    pointer-events: all;
    transform: translateX(-50%) translateY(0);
}

/* Bridge gap between button and dropdown */
.mega-menu-wrapper::before {
    content: '';
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    height: var(--space-5);
    background: transparent;
    z-index: 99;
}

/* Smooth custom scrollbar - Webkit (Chrome, Safari, Edge) */
.mega-menu-dropdown::-webkit-scrollbar {
    width: var(--space-2);
}

.mega-menu-dropdown::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
    border-radius: var(--radius-md);
}

.mega-menu-dropdown::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #667eea, #764ba2);
    border-radius: var(--radius-md);
}

.mega-menu-dropdown::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #764ba2, #f093fb);
}

/* Firefox scrollbar support */
.mega-menu-dropdown {
    scrollbar-width: thin;
    scrollbar-color: #764ba2 rgba(0, 0, 0, 0.05);
}

[data-theme="dark"] .mega-menu-dropdown {
    scrollbar-color: #667eea rgba(255, 255, 255, 0.05);
}

/* ==========================================
   MEGA MENU SECTIONS
   ========================================== */

.mega-menu-section {
    margin-bottom: var(--space-3);
}

.mega-menu-section:last-child {
    margin-bottom: 0;
}

.mega-menu-section-title {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-bold);
    text-transform: uppercase;
    letter-spacing: 0.8px;
    color: rgba(100, 116, 139, 0.8);
    padding: var(--space-3) var(--space-4) var(--space-2);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

[data-theme="dark"] .mega-menu-section-title {
    color: rgba(148, 163, 184, 0.7);
}

.mega-menu-section-title i {
    font-size: var(--font-size-xs);
}

/* ==========================================
   MEGA MENU ITEMS - HOLOGRAPHIC
   ========================================== */

.mega-menu-item {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-4) var(--space-4);
    margin: var(--space-1) 0;
    border-radius: var(--radius-lg);
    text-decoration: none;
    color: var(--color-slate-800);
    transition: all var(--transition-base);
    position: relative;
    overflow: hidden;
}

/* Holographic hover effect */
.mega-menu-item::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: var(--radius-lg);
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.08),
            rgba(139, 92, 246, 0.06),
            rgba(236, 72, 153, 0.04));
    opacity: 0;
    transition: opacity var(--transition-base);
}

/* Shimmer removed */
.mega-menu-item::after {
    display: none;
}

.mega-menu-item:hover {
    transform: translateX(var(--space-1));
    color: var(--color-primary-500);
}

.mega-menu-item:hover::before {
    opacity: 1;
}

.mega-menu-item:hover::after {
    display: none;
}

[data-theme="dark"] .mega-menu-item {
    color: var(--color-slate-200);
}

[data-theme="dark"] .mega-menu-item:hover {
    color: var(--color-primary-300);
}

/* Icon styling */
.mega-menu-item-icon {
    width: var(--space-10);
    height: var(--space-10);
    min-width: var(--space-10);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-lg);
    border-radius: var(--radius-md);
    background: rgba(99, 102, 241, 0.08);
    transition: all var(--transition-base);
    position: relative;
    z-index: 1;
}

.mega-menu-item:hover .mega-menu-item-icon {
    transform: scale(1.08) rotate(-5deg);
    filter: brightness(1.1);
}

/* Icon font rendering */
.mega-menu-item-icon i {
    font-style: normal;
    display: inline-block;
}

/* Content */
.mega-menu-item-content {
    flex: 1;
    position: relative;
    z-index: 1;
}

.mega-menu-item-label {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
    display: block;
}

.mega-menu-item-desc {
    font-size: var(--font-size-sm);
    color: rgba(100, 116, 139, 0.8);
    line-height: var(--line-height-tight);
    margin-top: var(--space-1);
}

[data-theme="dark"] .mega-menu-item-desc {
    color: rgba(148, 163, 184, 0.7);
}

/* ==========================================
   SPECIAL HIGHLIGHTS
   ========================================== */

/* Gamification Section Highlight */
.mega-menu-item.gamification-item:hover .mega-menu-item-icon {
    box-shadow: 0 0 var(--space-5) rgba(251, 191, 36, 0.3);
}

/* AI Assistant - Special Premium Highlight */
.mega-menu-item.ai-highlight {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.08),
            rgba(139, 92, 246, 0.06)) !important;
    border: 1px solid rgba(99, 102, 241, 0.15);
}

.mega-menu-item.ai-highlight::before {
    opacity: 1;
}

.mega-menu-item.ai-highlight .mega-menu-item-icon {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    box-shadow: 0 var(--space-1) var(--space-3) rgba(102, 126, 234, 0.3);
}

.mega-menu-item.ai-highlight:hover .mega-menu-item-icon {
    box-shadow: 0 var(--space-2) var(--space-5) rgba(102, 126, 234, 0.5);
    transform: scale(1.12) rotate(-8deg);
}

/* Section Dividers */
.mega-menu-divider {
    height: 1px;
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(148, 163, 184, 0.2) 50%,
            transparent 100%);
    margin: var(--space-3) 0;
}

/* ==========================================
   QUICK ACTIONS (Top of Mega Menu)
   ========================================== */

.mega-menu-quick-actions {
    background: linear-gradient(135deg,
            rgba(243, 244, 246, 0.6),
            rgba(229, 231, 235, 0.5));
    border-radius: var(--radius-lg);
    padding: var(--space-3);
    margin-bottom: var(--space-3);
}

[data-theme="dark"] .mega-menu-quick-actions {
    background: linear-gradient(135deg,
            rgba(30, 41, 59, 0.5),
            rgba(51, 65, 85, 0.4));
}

.mega-menu-quick-actions .mega-menu-item {
    padding: var(--space-3) var(--space-3);
    margin: var(--space-1) 0;
}

/* ==========================================
   RESPONSIVE
   ========================================== */

@media (max-width: 1024px) {
    .nexus-utility-bar {
        display: none !important;
    }

    .nexus-navbar {
        top: 0 !important;
        height: 60px;
        padding: var(--space-3) 16px;
    }

    .mega-menu-trigger {
        display: none;
    }
}

/* ==========================================
   ACCESSIBILITY
   ========================================== */

.mega-menu-item:focus-visible,
.mega-menu-trigger:focus-visible,
.nav-link:focus-visible {
    outline: 2px solid var(--color-primary-500);
    outline-offset: 2px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

