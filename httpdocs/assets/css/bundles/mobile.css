/* mobile.min.css - Mobile navigation - load with media query */
/* Generated: 2026-01-17 20:27:14 */

/* === nexus-mobile.css === */
/**
 * Project NEXUS - Mobile Native App Experience
 * Includes: Bottom nav, page transitions, skeleton loaders, swipe gestures
 */

/* ============================================
   MOBILE VIEWPORT FIX - Prevent content overflow
   ============================================ */
@media (max-width: 768px) {
    html {
        overflow-x: hidden !important;
        overflow-y: scroll !important;
        max-width: 100vw !important;
    }

    body {
        overflow-x: hidden !important;
        overflow-y: visible !important;
        max-width: 100vw !important;
        min-height: 100vh !important;
        position: relative !important;
        /* Allow normal overscroll behavior for smooth scrolling */
        overscroll-behavior-y: auto;
    }

    img,
    video,
    iframe,
    table,
    pre {
        max-width: 100% !important;
    }

    /* Hide site footer on mobile - content moved to Legal/More page */
    .nexus-site-footer,
    .nexus-modern-footer,
    footer.nexus-site-footer,
    footer[class*="nexus-site-footer"],
    .nexus-desktop-only {
        display: none !important;
        visibility: hidden !important;
        height: 0 !important;
        max-height: 0 !important;
        overflow: hidden !important;
        padding: 0 !important;
        margin: 0 !important;
        opacity: 0 !important;
        pointer-events: none !important;
    }
}

/* Explicit desktop-only utility class */
@media (max-width: 768px) {
    .nexus-desktop-only {
        display: none !important;
    }
}

/* ============================================
   1. PERSISTENT BOTTOM TAB NAVIGATION
   ============================================ */

.nexus-bottom-nav {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: var(--z-fixed, 1200);
    background: rgba(255, 255, 255, 0.95);
    -webkit-backdrop-filter: blur(20px);
    backdrop-filter: blur(20px);
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    padding: 8px 0;
    padding-bottom: max(8px, env(safe-area-inset-bottom));
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
}

[data-theme="dark"] .nexus-bottom-nav {
    background: rgba(15, 23, 42, 0.95);
    border-top-color: rgba(255, 255, 255, 0.1);
}

.nexus-bottom-nav-inner {
    display: flex;
    justify-content: space-around;
    align-items: center;
    max-width: 500px;
    margin: 0 auto;
}

.nexus-bottom-nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 8px 16px;
    text-decoration: none;
    color: #64748b;
    font-size: 0.7rem;
    font-weight: 600;
    transition: all 0.2s;
    position: relative;
    -webkit-tap-highlight-color: transparent;
}

.nexus-bottom-nav-item i {
    font-size: 1.25rem;
    transition: all 0.2s;
}

.nexus-bottom-nav-item.active {
    color: #6366f1;
}

.nexus-bottom-nav-item.active i {
    transform: scale(1.1);
}

[data-theme="dark"] .nexus-bottom-nav-item {
    color: #94a3b8;
}

[data-theme="dark"] .nexus-bottom-nav-item.active {
    color: #818cf8;
}

/* Badge for notifications */
.nexus-bottom-nav-badge {
    position: absolute;
    top: 2px;
    right: 8px;
    min-width: 18px;
    height: 18px;
    background: #ef4444;
    color: white;
    font-size: 0.65rem;
    font-weight: 700;
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 5px;
}

/* Ripple effect */
.nexus-bottom-nav-item::after {
    content: '';
    position: absolute;
    inset: 0;
    background: currentColor;
    opacity: 0;
    border-radius: 12px;
    transition: opacity 0.2s;
}

.nexus-bottom-nav-item:active::after {
    opacity: 0.1;
}

/* Unified mobile breakpoint at 900px */
@media (max-width: 900px) {

    /* DISABLED: Using nexus-native-nav instead */
    /* .nexus-bottom-nav is now hidden by nexus-native-nav.css */
    .nexus-bottom-nav {
        display: none !important;
    }

    /* Add padding to body to prevent content from being hidden */
    body.has-bottom-nav,
    body.nexus-native-nav-enabled {
        padding-bottom: calc(90px + env(safe-area-inset-bottom));
    }

    /* Hide desktop footer on mobile when bottom nav is present */
    body.has-bottom-nav .site-footer {
        display: none;
    }
}


/* ============================================
   2. PAGE TRANSITION ANIMATIONS - REMOVED
   ============================================ */
/* View Transitions caused glitches and have been removed for stability. */


/* ============================================
   3. SKELETON LOADERS
   ============================================ */

.skeleton {
    background: linear-gradient(90deg,
            rgba(200, 200, 200, 0.2) 0%,
            rgba(200, 200, 200, 0.4) 50%,
            rgba(200, 200, 200, 0.2) 100%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 8px;
}

[data-theme="dark"] .skeleton {
    background: linear-gradient(90deg,
            rgba(100, 100, 100, 0.2) 0%,
            rgba(100, 100, 100, 0.4) 50%,
            rgba(100, 100, 100, 0.2) 100%);
    background-size: 200% 100%;
}

@keyframes skeleton-shimmer {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

/* Skeleton shapes */
.skeleton-text {
    height: 1em;
    margin-bottom: 0.5em;
}

.skeleton-text:last-child {
    width: 70%;
}

.skeleton-title {
    height: 1.5em;
    width: 60%;
    margin-bottom: 1em;
}

.skeleton-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
}

.skeleton-card {
    height: 120px;
    border-radius: 16px;
}

.skeleton-image {
    width: 100%;
    aspect-ratio: 16/9;
    border-radius: 12px;
}

.skeleton-button {
    height: 44px;
    width: 120px;
    border-radius: 10px;
}

/* Skeleton card component */
.skeleton-card-full {
    padding: 20px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 16px;
    border: 1px solid rgba(0, 0, 0, 0.05);
}

[data-theme="dark"] .skeleton-card-full {
    background: rgba(30, 41, 59, 0.8);
    border-color: rgba(255, 255, 255, 0.1);
}

.skeleton-card-full .skeleton-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.skeleton-card-full .skeleton-body {
    display: flex;
    flex-direction: column;
    gap: 8px;
}


/* ============================================
   4. PULL-TO-REFRESH - REMOVED
   ============================================ */
/* Pull-to-refresh feature has been permanently removed due to conflicts with scrolling */


/* ============================================
   5. SWIPE GESTURES
   ============================================ */

.nexus-swipe-container {
    touch-action: pan-y;
    overflow-x: hidden;
}

/* Swipe-to-go-back indicator */
.nexus-swipe-back-indicator {
    position: fixed;
    left: 0;
    top: 50%;
    transform: translateY(-50%) translateX(-60px) scale(0.8);
    width: 44px;
    height: 44px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(0, 0, 0, 0.05);
    z-index: var(--z-modal, 1400);
    pointer-events: none;
    transition: opacity 0.15s ease, transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform, opacity;
}

[data-theme="dark"] .nexus-swipe-back-indicator {
    background: #1e293b;
    box-shadow:
        0 4px 20px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(255, 255, 255, 0.1);
}

.nexus-swipe-back-indicator.visible {
    opacity: 1;
}

.nexus-swipe-back-indicator.ready {
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    box-shadow:
        0 4px 24px rgba(99, 102, 241, 0.4),
        0 0 0 4px rgba(99, 102, 241, 0.1);
}

.nexus-swipe-back-indicator.ready i {
    color: white;
}

.nexus-swipe-back-indicator.navigating {
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    transition: transform 0.15s ease-out;
}

.nexus-swipe-back-indicator i {
    color: #6366f1;
    font-size: 1.1rem;
    transition: color 0.15s ease;
}

[data-theme="dark"] .nexus-swipe-back-indicator i {
    color: #818cf8;
}

/* Swipe-back page overlay */
.nexus-swipe-back-overlay {
    position: fixed;
    inset: 0;
    background: black;
    opacity: 0;
    z-index: var(--z-modal-backdrop, 1300);
    pointer-events: none;
    transition: opacity 0.15s ease;
}

.nexus-swipe-back-overlay.visible {
    /* Opacity controlled by JS */
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    .nexus-swipe-back-indicator {
        transition: opacity 0.1s;
    }

    .nexus-swipe-back-overlay {
        transition: none;
    }
}

/* Swipeable list items */
.nexus-swipe-item {
    position: relative;
    overflow: hidden;
    touch-action: pan-x;
}

.nexus-swipe-item-content {
    position: relative;
    background: white;
    transition: transform 0.2s;
    z-index: 2;
}

[data-theme="dark"] .nexus-swipe-item-content {
    background: #1e293b;
}

.nexus-swipe-item-actions {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: stretch;
    z-index: 1;
}

.nexus-swipe-action {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 20px;
    color: white;
    font-weight: 600;
    font-size: 0.85rem;
}

.nexus-swipe-action.delete {
    background: #ef4444;
}

.nexus-swipe-action.archive {
    background: #f59e0b;
}

.nexus-swipe-action.edit {
    background: #6366f1;
}


/* ============================================
   6. ENHANCED TOUCH FEEDBACK
   ============================================ */

/* Disable tap highlight */
* {
    -webkit-tap-highlight-color: transparent;
}

/* Touch-friendly hover states */
@media (hover: none) and (pointer: coarse) {

    .htb-btn:hover,
    .htb-card:hover {
        transform: none;
        box-shadow: inherit;
    }
}

/* Active states for touch */
.nexus-touch-active {
    transform: scale(0.98);
    opacity: 0.9;
}

/* Pressable items */
.nexus-pressable {
    cursor: pointer;
    transition: transform 0.1s, opacity 0.1s;
    -webkit-user-select: none;
    user-select: none;
}

.nexus-pressable:active {
    transform: scale(0.97);
    opacity: 0.85;
}


/* ============================================
   7. NATIVE SCROLL BEHAVIOR
   ============================================ */

/* Momentum scrolling */
.nexus-scroll {
    overflow-y: auto;
    overscroll-behavior-y: contain;
}

/* Hide scrollbars on mobile but keep functionality */
.nexus-scroll-hidden::-webkit-scrollbar {
    display: none;
}

.nexus-scroll-hidden {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* Smooth scroll for anchor links */
html {
    scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
    html {
        scroll-behavior: auto;
    }

    .skeleton {
        animation: none;
    }
}


/* ============================================
   8. FLOATING ACTION BUTTON ENHANCEMENTS
   ============================================ */

/* Move FAB above bottom nav on mobile */
@media (max-width: 768px) {

    .home-fab,
    .wallet-fab,
    .groups-fab,
    .profile-fab,
    .messages-fab,
    .dash-fab {
        bottom: calc(80px + env(safe-area-inset-bottom)) !important;
    }
}


/* ============================================
   9. TOAST NOTIFICATIONS
   ============================================ */

.nexus-toast-container {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    z-index: var(--z-dropdown, 1000);
    display: flex;
    flex-direction: column;
    gap: 10px;
    pointer-events: none;
}

@media (max-width: 768px) {
    .nexus-toast-container {
        bottom: calc(90px + env(safe-area-inset-bottom));
    }
}

.nexus-toast {
    background: rgba(15, 23, 42, 0.95);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    color: white;
    padding: 14px 24px;
    border-radius: 12px;
    font-size: 0.9rem;
    font-weight: 500;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    gap: 10px;
    animation: toast-in 0.3s ease-out;
    pointer-events: auto;
}

.nexus-toast.success {
    background: rgba(16, 185, 129, 0.95);
}

.nexus-toast.error {
    background: rgba(239, 68, 68, 0.95);
}

.nexus-toast.warning {
    background: rgba(245, 158, 11, 0.95);
}

.nexus-toast.exit {
    animation: toast-out 0.2s ease-out forwards;
}

@keyframes toast-in {
    from {
        opacity: 0;
        transform: translateY(20px) scale(0.9);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes toast-out {
    from {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    to {
        opacity: 0;
        transform: translateY(-10px) scale(0.9);
    }
}


/* ============================================
   10. LOADING OVERLAY
   ============================================ */

.nexus-loading-overlay {
    position: fixed;
    inset: 0;
    background: rgba(255, 255, 255, 0.9);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10001;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s;
}

[data-theme="dark"] .nexus-loading-overlay {
    background: rgba(15, 23, 42, 0.9);
}

.nexus-loading-overlay.visible {
    opacity: 1;
    visibility: visible;
}

.nexus-loading-spinner {
    width: 48px;
    height: 48px;
    border: 4px solid rgba(99, 102, 241, 0.2);
    border-top-color: #6366f1;
    border-radius: 50%;
    animation: loading-spin 0.8s linear infinite;
}

.nexus-loading-text {
    margin-top: 16px;
    color: #64748b;
    font-weight: 500;
}

@keyframes loading-spin {
    to {
        transform: rotate(360deg);
    }
}


/* ============================================
   11. NATIVE SHARE SHEET
   ============================================ */

.nexus-share-sheet {
    position: fixed;
    inset: 0;
    z-index: var(--z-modal-backdrop, 1300);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.nexus-share-sheet.active {
    opacity: 1;
    visibility: visible;
}

.nexus-share-sheet-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    -webkit-backdrop-filter: blur(4px);
    backdrop-filter: blur(4px);
}

.nexus-share-sheet-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    border-radius: 20px 20px 0 0;
    transform: translateY(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    padding-bottom: env(safe-area-inset-bottom);
}

.nexus-share-sheet.active .nexus-share-sheet-content {
    transform: translateY(0);
}

[data-theme="dark"] .nexus-share-sheet-content {
    background: #1e293b;
}

.nexus-share-sheet-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nexus-share-sheet-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 700;
}

.nexus-share-close {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.05);
    border: none;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

[data-theme="dark"] .nexus-share-close {
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

.nexus-share-sheet-body {
    padding: 20px;
}

.nexus-share-options {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
}

.nexus-share-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 16px 8px;
    border: none;
    background: rgba(0, 0, 0, 0.03);
    border-radius: 16px;
    text-decoration: none;
    color: inherit;
    cursor: pointer;
    transition: all 0.2s;
}

.nexus-share-option:active {
    transform: scale(0.95);
    background: rgba(99, 102, 241, 0.1);
}

.nexus-share-option i {
    font-size: 1.5rem;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    color: white;
}

.nexus-share-option:nth-child(2) i {
    background: #1877f2;
}

.nexus-share-option:nth-child(3) i {
    background: #000;
}

.nexus-share-option:nth-child(4) i {
    background: #25d366;
}

.nexus-share-option:nth-child(5) i {
    background: linear-gradient(135deg, #ef4444, #f97316);
}

.nexus-share-option span {
    font-size: 0.75rem;
    font-weight: 600;
    text-align: center;
}

[data-theme="dark"] .nexus-share-option {
    background: rgba(255, 255, 255, 0.05);
    color: white;
}


/* ============================================
   12. CAMERA CAPTURE UI
   ============================================ */

.nexus-camera-ui {
    position: fixed;
    inset: 0;
    z-index: var(--z-modal, 1400);
    background: #000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.nexus-camera-ui.active {
    opacity: 1;
    visibility: visible;
}

.nexus-camera-container {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.nexus-camera-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.nexus-camera-controls {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 30px 40px;
    padding-bottom: calc(30px + env(safe-area-inset-bottom));
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
}

.nexus-camera-btn {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.2);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.nexus-camera-btn:active {
    transform: scale(0.9);
}

.nexus-camera-capture {
    width: 72px;
    height: 72px;
    background: white;
    color: #1f2937;
    font-size: 1.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.nexus-camera-capture:active {
    background: #e5e7eb;
}

.nexus-camera-preview {
    position: absolute;
    inset: 0;
    background: #000;
    display: none;
    flex-direction: column;
}

.nexus-camera-preview-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.nexus-camera-preview-actions {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    gap: 20px;
    padding: 30px;
    padding-bottom: calc(30px + env(safe-area-inset-bottom));
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
}

.nexus-camera-preview-actions .nexus-camera-btn {
    width: auto;
    padding: 14px 28px;
    border-radius: 14px;
    gap: 8px;
    font-size: 1rem;
    font-weight: 600;
}

.nexus-camera-preview-actions .nexus-camera-btn.primary {
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
}


/* ============================================
   13. TURBO PROGRESS BAR
   ============================================ */

#nexus-turbo-progress {
    position: fixed;
    top: 0;
    left: 0;
    width: 0;
    height: 3px;
    background: linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899);
    z-index: var(--z-notification, 1700);
    transition: width 0.2s ease-out;
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
    pointer-events: none;
}

#nexus-turbo-progress.active {
    animation: turboProgress 2s ease-in-out infinite;
}

@keyframes turboProgress {
    0% {
        width: 0;
    }

    50% {
        width: 70%;
    }

    100% {
        width: 90%;
    }
}


/* ============================================
   14. ENHANCED TAP FEEDBACK
   ============================================ */

.nexus-ripple {
    position: relative;
    overflow: hidden;
}

.nexus-ripple::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
}

.nexus-ripple:active::after {
    width: 200%;
    padding-bottom: 200%;
    opacity: 1;
    transition: all 0.4s ease-out;
}


/* ============================================
   INFINITE SCROLL
   ============================================ */

.nexus-infinite-loader {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 24px;
    color: #64748b;
    font-size: 0.9rem;
}

[data-theme="dark"] .nexus-infinite-loader {
    color: #94a3b8;
}

.nexus-infinite-spinner {
    width: 24px;
    height: 24px;
    border: 3px solid rgba(99, 102, 241, 0.2);
    border-top-color: #6366f1;
    border-radius: 50%;
    animation: infinite-spin 0.8s linear infinite;
}

@keyframes infinite-spin {
    to {
        transform: rotate(360deg);
    }
}

.nexus-infinite-end {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 32px 24px;
    color: #94a3b8;
    font-size: 0.85rem;
    text-align: center;
}

[data-theme="dark"] .nexus-infinite-end {
    color: #64748b;
}

.nexus-infinite-end::before,
.nexus-infinite-end::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.3), transparent);
    margin: 0 16px;
}


/* ============================================
   LONG-PRESS CONTEXT MENU
   ============================================ */

.nexus-context-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    opacity: 0;
    visibility: hidden;
    z-index: 99998;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    -webkit-backdrop-filter: blur(2px);
    backdrop-filter: blur(2px);
}

.nexus-context-backdrop.visible {
    opacity: 1;
    visibility: visible;
}

.nexus-context-menu {
    position: fixed;
    min-width: 200px;
    max-width: 280px;
    background: white;
    border-radius: 14px;
    box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(0, 0, 0, 0.05);
    z-index: var(--z-notification, 1700);
    opacity: 0;
    visibility: hidden;
    transform: scale(0.9);
    transform-origin: center center;
    transition: opacity 0.2s ease, transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), visibility 0.2s ease;
    overflow: hidden;
}

[data-theme="dark"] .nexus-context-menu {
    background: #1e293b;
    box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.1);
}

.nexus-context-menu.visible {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
}

.nexus-context-item {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    padding: 14px 16px;
    border: none;
    background: transparent;
    color: #1e293b;
    font-size: 0.95rem;
    font-weight: 500;
    text-align: left;
    cursor: pointer;
    transition: background 0.15s ease;
}

[data-theme="dark"] .nexus-context-item {
    color: #f1f5f9;
}

.nexus-context-item:not(:last-child) {
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}

[data-theme="dark"] .nexus-context-item:not(:last-child) {
    border-bottom-color: rgba(255, 255, 255, 0.06);
}

.nexus-context-item:active {
    background: rgba(99, 102, 241, 0.1);
}

[data-theme="dark"] .nexus-context-item:active {
    background: rgba(99, 102, 241, 0.2);
}

.nexus-context-item i {
    width: 20px;
    text-align: center;
    color: #6366f1;
    font-size: 1rem;
}

[data-theme="dark"] .nexus-context-item i {
    color: #818cf8;
}

.nexus-context-item.danger {
    color: #ef4444;
}

.nexus-context-item.danger i {
    color: #ef4444;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    .nexus-context-menu {
        transition: opacity 0.1s ease, visibility 0.1s ease;
        transform: scale(1);
    }

    .nexus-context-backdrop {
        transition: opacity 0.1s ease, visibility 0.1s ease;
    }

    .nexus-infinite-spinner {
        animation-duration: 1.5s;
    }
}

/* Material-style ripple for buttons */
.htb-btn,
.nexus-bottom-nav-item,
.nexus-fab-item,
.nexus-share-option {
    position: relative;
    overflow: hidden;
}

@media (hover: none) and (pointer: coarse) {

    .htb-btn:active,
    .nexus-bottom-nav-item:active {
        transform: scale(0.97);
    }
}


/* ============================================
   15. OFFLINE/ONLINE INDICATORS
   ============================================ */

.nexus-offline-indicator {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    text-align: center;
    padding: 10px 16px;
    font-size: 13px;
    font-weight: 600;
    z-index: var(--z-popover, 1500);
    transform: translateY(-100%);
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding-top: max(10px, env(safe-area-inset-top));
}

.nexus-offline-indicator.visible {
    transform: translateY(0);
}

.nexus-offline-indicator svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
}

/* Adjust content when offline banner is visible */
body.is-offline .nexus-utility-bar,
body.is-offline .htb-header,
body.is-offline header {
    margin-top: 40px;
}

.nexus-online-indicator {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    text-align: center;
    padding: 10px 16px;
    font-size: 13px;
    font-weight: 600;
    z-index: var(--z-popover, 1500);
    transform: translateY(-100%);
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding-top: max(10px, env(safe-area-inset-top));
}

.nexus-online-indicator.visible {
    transform: translateY(0);
}

.nexus-online-indicator svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
}

@media (prefers-reduced-motion: reduce) {

    .nexus-offline-indicator,
    .nexus-online-indicator {
        transition: none;
    }
}


/* ============================================
   16. COLLAPSING HEADER ON SCROLL
   ============================================ */

/* Base collapsing header styles */
.nexus-collapsing-header {
    position: sticky;
    top: 0;
    z-index: 1000;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        height 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        padding 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.3s ease;
    will-change: transform;
}

/* Hidden state - slides up */
.nexus-collapsing-header.nexus-header-hidden {
    transform: translateY(-100%);
    pointer-events: none;
}

/* Visible state after being hidden - smooth slide down */
.nexus-collapsing-header.nexus-header-visible {
    transform: translateY(0);
    pointer-events: auto;
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] .nexus-collapsing-header.nexus-header-visible {
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
}

/* Compact mode - smaller, more minimal */
.nexus-collapsing-header.nexus-header-compact {
    padding-top: 8px !important;
    padding-bottom: 8px !important;
}

/* Compact mode for common header elements */
.nexus-collapsing-header.nexus-header-compact .htb-header-title,
.nexus-collapsing-header.nexus-header-compact .header-title,
.nexus-collapsing-header.nexus-header-compact h1 {
    font-size: 1.1rem !important;
    margin: 0 !important;
}

.nexus-collapsing-header.nexus-header-compact .htb-header-subtitle,
.nexus-collapsing-header.nexus-header-compact .header-subtitle {
    display: none !important;
}

/* Hide secondary elements in compact mode */
.nexus-collapsing-header.nexus-header-compact .header-description,
.nexus-collapsing-header.nexus-header-compact .header-meta,
.nexus-collapsing-header.nexus-header-compact .htb-breadcrumb {
    display: none !important;
}

/* Shrink avatars/logos in compact mode */
.nexus-collapsing-header.nexus-header-compact .header-avatar,
.nexus-collapsing-header.nexus-header-compact .header-logo,
.nexus-collapsing-header.nexus-header-compact .htb-avatar {
    width: 32px !important;
    height: 32px !important;
    transition: all 0.3s ease;
}

/* Reduce button sizes in compact mode */
.nexus-collapsing-header.nexus-header-compact .htb-btn {
    padding: 6px 12px !important;
    font-size: 0.85rem !important;
}

/* Add shadow in compact mode for visual separation */
.nexus-collapsing-header.nexus-header-compact {
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}

[data-theme="dark"] .nexus-collapsing-header.nexus-header-compact {
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.25);
}

/* Body adjustments when header is hidden */
body.nexus-header-is-hidden {
    /* Content can flow naturally when header is hidden */
}

/* Body adjustments when header is compact */
body.nexus-header-is-compact {
    /* Content area gains more space */
}

/* Mobile-specific optimizations */
@media (max-width: 768px) {
    .nexus-collapsing-header {
        /* Faster transitions on mobile for snappier feel */
        transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
            height 0.25s cubic-bezier(0.4, 0, 0.2, 1),
            padding 0.25s cubic-bezier(0.4, 0, 0.2, 1),
            box-shadow 0.25s ease;
    }

    .nexus-collapsing-header.nexus-header-compact {
        padding-top: 6px !important;
        padding-bottom: 6px !important;
    }

    .nexus-collapsing-header.nexus-header-compact .htb-header-title,
    .nexus-collapsing-header.nexus-header-compact h1 {
        font-size: 1rem !important;
    }

    /* Reduce icon sizes in compact mode on mobile */
    .nexus-collapsing-header.nexus-header-compact .htb-btn i,
    .nexus-collapsing-header.nexus-header-compact .header-icon {
        font-size: 1rem !important;
    }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
    .nexus-collapsing-header {
        transition: none;
    }

    .nexus-collapsing-header.nexus-header-hidden {
        opacity: 0;
        transform: none;
    }

    .nexus-collapsing-header.nexus-header-visible {
        opacity: 1;
        transform: none;
    }

    .nexus-collapsing-header.nexus-header-compact .header-avatar,
    .nexus-collapsing-header.nexus-header-compact .header-logo,
    .nexus-collapsing-header.nexus-header-compact .htb-avatar {
        transition: none;
    }
}

/* Utility class - add to any header to enable collapsing */
[data-collapsing-header="true"] {
    /* Marker for JS initialization */
}

/* ============================================
   MOBILE SUB-PAGE TOP SPACING FIX
   Uniform spacing across all about sub-pages
   ============================================ */
@media (max-width: 900px) {

    /* All glass wrappers - consistent top spacing (56px clears mobile header) */
    #strategy-glass-wrapper,
    #faq-glass-wrapper,
    #sp-glass-wrapper,
    #guide-glass-wrapper,
    #story-glass-wrapper,
    #partner-glass-wrapper,
    #impact-glass-wrapper,
    #report-glass-wrapper,
    #privacy-glass-wrapper,
    #terms-glass-wrapper,
    [id$="-glass-wrapper"],
    [id*="glass-wrapper"] {
        margin-top: 56px !important;
        padding-top: 1rem !important;
    }

    /* Container full - uniform spacing */
    .htb-container-full {
        padding-top: 1rem !important;
        margin-top: 56px !important;
    }

    /* Welcome hero sections - uniform top margin */
    .nexus-welcome-hero {
        margin-top: 0 !important;
    }

    /* Inner wrappers - no extra padding */
    .faq-inner,
    .sp-inner,
    .impact-inner,
    [class$="-inner"] {
        padding-top: 0 !important;
    }

    /* Page headers - consistent spacing */
    .page-header,
    .faq-page-header,
    .sp-page-header,
    .strategy-page-header,
    [class$="-page-header"],
    [id$="-glass-wrapper"] .page-header,
    .htb-container .page-header,
    .htb-container-full .page-header {
        margin-top: 0 !important;
        margin-bottom: 16px !important;
        padding-top: 0 !important;
    }

    /* Compact hero sections on mobile sub-pages */
    .htb-hero-header {
        height: auto !important;
        min-height: 120px !important;
        padding: 20px 16px !important;
    }

    .htb-hero-content {
        padding: 12px 16px !important;
    }

    .htb-main-title {
        font-size: 1.75rem !important;
    }

    .htb-sub-title {
        font-size: 1rem !important;
    }

    /* Cards that pull up into hero area */
    .htb-container[style*="margin-top: -80px"],
    .htb-container-full[style*="margin-top: -80px"] {
        margin-top: 16px !important;
    }

    /* Generic first-child content spacing */
    .htb-container>*:first-child,
    .htb-container-full>*:first-child {
        margin-top: 0;
    }
}

/* === nexus-native-nav-v2.css === */
/**
 * Project NEXUS - Native Mobile Navigation v2
 * Full-screen, app-like navigation inspired by Instagram, TikTok, and iOS
 * Designed for a true native mobile experience
 */

/* ============================================
   CSS VARIABLES - Design Tokens
   ============================================ */
:root {
    /* Navigation Colors */
    --mobile-nav-bg: #ffffff;
    --mobile-nav-border: rgba(0, 0, 0, 0.08);
    --mobile-nav-text: #8e8e93;
    --mobile-nav-active: #6366f1;
    --mobile-nav-height: 84px;

    /* Menu Colors */
    --mobile-menu-bg: #ffffff;
    --mobile-menu-item-hover: #f8fafc;
    --mobile-menu-divider: #f1f5f9;
    --mobile-menu-text: #1e293b;
    --mobile-menu-text-secondary: #64748b;

    /* Safe Areas */
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-top: env(safe-area-inset-top, 0px);

    /* Transitions */
    --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-ios: cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

[data-theme="dark"] {
    --mobile-nav-bg: #000000;
    --mobile-nav-border: rgba(255, 255, 255, 0.1);
    --mobile-nav-text: #8e8e93;
    --mobile-nav-active: #818cf8;

    --mobile-menu-bg: #000000;
    --mobile-menu-item-hover: #1c1c1e;
    --mobile-menu-divider: #38383a;
    --mobile-menu-text: #ffffff;
    --mobile-menu-text-secondary: #8e8e93;
}


/* ============================================
   HIDE ALL LEGACY NAVIGATION ON MOBILE
   ============================================ */
@media (max-width: 1024px) {

    /* Hide old bottom nav systems (but keep drawer for fallback) */
    .nexus-bottom-nav,
    .nexus-native-nav,
    .nexus-quick-fab,
    .nexus-edge-indicator,
    .app-drawer {
        display: none !important;
        visibility: hidden !important;
        pointer-events: none !important;
    }

    /* Note: nexus-native-drawer and overlay are NOT hidden - they serve as fallback
       when openMobileMenu() is not yet defined (function loading order issue) */
}


/* ============================================
   1. BOTTOM TAB BAR - Modern iOS/Android Style
   Clean, minimal, perfect alignment
   ============================================ */

.mobile-tab-bar {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: var(--z-fixed, 1200);
    height: var(--mobile-nav-height, 60px);
    padding-bottom: var(--safe-bottom, env(safe-area-inset-bottom, 0px));
    background: rgba(255, 255, 255, 0.95);
    border-top: 1px solid rgba(0, 0, 0, 0.06);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    backdrop-filter: saturate(180%) blur(20px);
}

[data-theme="dark"] .mobile-tab-bar,
.dark-mode .mobile-tab-bar {
    background: rgba(28, 28, 30, 0.95);
    border-top-color: rgba(255, 255, 255, 0.08);
}

@media (max-width: 1024px) {
    /* CRITICAL: Force show mobile tab bar */
    .mobile-tab-bar,
    #mobileTabBar {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: var(--z-notification, 1700);
        height: var(--mobile-nav-height, 84px) !important;
        background: rgba(255, 255, 255, 0.95) !important;
        -webkit-backdrop-filter: saturate(180%) blur(20px) !important;
        backdrop-filter: saturate(180%) blur(20px) !important;
        border-top: 1px solid rgba(0, 0, 0, 0.1) !important;
    }

    [data-theme="dark"] .mobile-tab-bar,
    [data-theme="dark"] #mobileTabBar {
        background: rgba(28, 28, 30, 0.95) !important;
        border-top-color: rgba(255, 255, 255, 0.1) !important;
    }

    body {
        padding-bottom: calc(var(--mobile-nav-height, 84px) + var(--safe-bottom, env(safe-area-inset-bottom, 0px))) !important;
    }
}

.mobile-tab-bar-inner {
    display: flex;
    justify-content: space-around;
    align-items: center;
    height: 100%;
    max-width: 500px;
    margin: 0 auto;
    width: 100%;
    padding: 0 8px;
}

/* Tab Items - Clean, minimal design */
.mobile-tab-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2px;
    flex: 1;
    min-width: 64px;
    max-width: 80px;
    height: 100%;
    text-decoration: none;
    color: #8e8e93;
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 0;
    position: relative;
    -webkit-tap-highlight-color: transparent;
    transition: color 0.2s ease, transform 0.15s ease;
    background: none;
    border: none;
    cursor: pointer;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', sans-serif;
    padding: 6px 0;
}

/* Button-type tab items - explicit reset for menu button */
button.mobile-tab-item,
.mobile-tab-item[type="button"] {
    background: none;
    border: none;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
}

.mobile-tab-item:active {
    transform: scale(0.9);
}

.mobile-tab-item i {
    font-size: 22px;
    line-height: 1;
    transition: transform 0.2s ease;
}

.mobile-tab-item.active {
    color: #6366f1;
}

.mobile-tab-item.active i {
    transform: scale(1.08);
}

[data-theme="dark"] .mobile-tab-item,
.dark-mode .mobile-tab-item {
    color: #8e8e93;
}

[data-theme="dark"] .mobile-tab-item.active,
.dark-mode .mobile-tab-item.active {
    color: #818cf8;
}

/* Notification Badge */
.mobile-tab-badge {
    position: absolute;
    top: 2px;
    left: 50%;
    transform: translateX(6px);
    min-width: 18px;
    height: 18px;
    background: #ff3b30;
    color: white;
    font-size: 11px;
    font-weight: 600;
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 5px;
    box-shadow: 0 2px 6px rgba(255, 59, 48, 0.4);
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    z-index: 10;
}

.mobile-tab-badge:empty {
    display: none;
}

/* ============================================
   CENTER CREATE BUTTON - Floating FAB Style
   ============================================ */

.mobile-tab-item.create-btn {
    position: relative;
    flex: 0 0 auto;
    width: 56px;
    min-width: 56px;
    max-width: 56px;
}

.mobile-tab-item.create-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    border-radius: 16px;
    z-index: 1;
    box-shadow:
        0 4px 14px rgba(99, 102, 241, 0.4),
        0 2px 6px rgba(99, 102, 241, 0.2);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.mobile-tab-item.create-btn:hover::before {
    transform: translate(-50%, -50%) scale(1.05);
    box-shadow:
        0 6px 20px rgba(99, 102, 241, 0.5),
        0 3px 8px rgba(99, 102, 241, 0.3);
}

.mobile-tab-item.create-btn:active::before {
    transform: translate(-50%, -50%) scale(0.92);
    box-shadow:
        0 2px 8px rgba(99, 102, 241, 0.3),
        0 1px 4px rgba(99, 102, 241, 0.2);
}

.mobile-tab-item.create-btn:active {
    transform: none;
}

.mobile-tab-item.create-btn>i,
.mobile-tab-item.create-btn>svg.create-icon {
    color: white !important;
    fill: white !important;
    width: 24px;
    height: 24px;
    font-size: 22px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.15));
}

.mobile-tab-item.create-btn>span {
    display: none;
}

/* Profile Avatar Tab */
.mobile-tab-avatar {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid transparent;
    transition: border-color 0.2s ease, transform 0.2s ease;
}

.mobile-tab-item.active .mobile-tab-avatar {
    border-color: var(--mobile-nav-active);
    transform: scale(1.05);
}


/* ============================================
   2. FULL-SCREEN MENU - Instagram/TikTok Style
   ============================================ */

.mobile-fullscreen-menu {
    position: fixed;
    inset: 0;
    z-index: var(--z-notification, 1700);
    background: var(--mobile-menu-bg);
    transform: translateX(100%);
    transition: transform 0.35s var(--ease-ios);
    display: flex;
    flex-direction: column;
    visibility: hidden;
    will-change: transform;
}

.mobile-fullscreen-menu.active {
    transform: translateX(0);
    visibility: visible;
}

/* Prevent body scroll when menu is open */
body.mobile-menu-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
}

/* Menu Header - Enhanced Full-Screen Design */
.mobile-menu-header {
    padding: 20px 20px 24px;
    padding-top: calc(20px + var(--safe-top));
    background: var(--mobile-menu-bg);
    border-bottom: 0.5px solid var(--mobile-menu-divider);
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    overflow: hidden;
    min-height: 100px;
}

/* Animated gradient background */
.mobile-menu-header-bg {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.08) 0%,
        rgba(139, 92, 246, 0.08) 50%,
        rgba(99, 102, 241, 0.08) 100%);
    background-size: 200% 200%;
    animation: gradient-shift 8s ease infinite;
    z-index: 0;
    pointer-events: none;
}

@keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

[data-theme="dark"] .mobile-menu-header-bg {
    background: linear-gradient(135deg,
        rgba(99, 102, 241, 0.12) 0%,
        rgba(139, 92, 246, 0.12) 50%,
        rgba(99, 102, 241, 0.12) 100%);
    background-size: 200% 200%;
}

.mobile-menu-user {
    display: flex;
    align-items: center;
    gap: 16px;
    text-decoration: none;
    color: var(--mobile-menu-text);
    position: relative;
    z-index: 1;
    transition: transform 0.2s ease;
    -webkit-tap-highlight-color: transparent;
}

.mobile-menu-user:active {
    transform: scale(0.98);
}

/* Avatar wrapper with animated ring */
.mobile-menu-avatar-wrapper {
    position: relative;
    width: 64px;
    height: 64px;
    flex-shrink: 0;
}

.mobile-menu-avatar {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--mobile-menu-bg);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 2;
}

/* Animated pulsing ring around avatar */
.mobile-menu-avatar-ring {
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 2px solid rgba(99, 102, 241, 0.4);
    z-index: 1;
    animation: avatar-ring-pulse 3s ease-in-out infinite;
}

@keyframes avatar-ring-pulse {
    0%, 100% {
        transform: scale(1);
        opacity: 0.4;
    }
    50% {
        transform: scale(1.08);
        opacity: 0.6;
    }
}

[data-theme="dark"] .mobile-menu-avatar {
    border-color: #1c1c1e;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .mobile-menu-avatar-ring {
    border-color: rgba(129, 140, 248, 0.5);
}

/* Guest avatar styling */
.mobile-menu-avatar-guest {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 28px;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.mobile-menu-user-info {
    flex: 1;
    min-width: 0;
}

.mobile-menu-user-info h3 {
    margin: 0 0 4px 0;
    font-size: 20px;
    font-weight: 700;
    letter-spacing: -0.03em;
    color: var(--mobile-menu-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.mobile-menu-user-info p {
    margin: 0;
    font-size: 14px;
    font-weight: 500;
    color: var(--mobile-nav-active);
    display: flex;
    align-items: center;
    gap: 6px;
}

.mobile-menu-user-info p i {
    font-size: 12px;
    transition: transform 0.2s ease;
}

.mobile-menu-user:active .mobile-menu-user-info p i {
    transform: translateX(2px);
}

/* Close Button - Enhanced Design */
.mobile-menu-close {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.05);
    border: none;
    color: var(--mobile-menu-text);
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
    transition: transform 0.2s ease, background 0.2s ease;
    position: relative;
    z-index: 1;
    flex-shrink: 0;
}

.mobile-menu-close:hover {
    background: rgba(0, 0, 0, 0.08);
}

.mobile-menu-close:active {
    transform: scale(0.88);
    background: rgba(0, 0, 0, 0.12);
}

[data-theme="dark"] .mobile-menu-close {
    background: rgba(255, 255, 255, 0.08);
}

[data-theme="dark"] .mobile-menu-close:hover {
    background: rgba(255, 255, 255, 0.12);
}

[data-theme="dark"] .mobile-menu-close:active {
    background: rgba(255, 255, 255, 0.16);
}

/* Menu Body - Scrollable */
.mobile-menu-body {
    flex: 1;
    overflow-y: auto;
    overscroll-behavior-y: contain;
}

/* Menu Sections */
.mobile-menu-section {
    padding: 12px 0;
    border-bottom: 0.5px solid var(--mobile-menu-divider);
}

.mobile-menu-section:last-child {
    border-bottom: none;
}

.mobile-menu-section-title {
    padding: 8px 20px 12px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--mobile-menu-text-secondary);
}

/* Menu Items - Large, clear, accessible with gradient icons */
.mobile-menu-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 12px 20px;
    text-decoration: none;
    color: var(--mobile-menu-text);
    font-size: 16px;
    font-weight: 500;
    letter-spacing: -0.01em;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s ease, transform 0.15s ease;
    position: relative;
}

.mobile-menu-item:active {
    background: var(--mobile-menu-item-hover);
    transform: scale(0.98);
}

/* Icon container with gradient background */
.mobile-menu-item i {
    width: 40px;
    height: 40px;
    min-width: 40px;
    border-radius: 12px;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.25);
}

.mobile-menu-item:active i {
    transform: scale(0.92);
    box-shadow: 0 1px 4px rgba(99, 102, 241, 0.2);
}

/* Different gradient colors for menu items based on position */
.mobile-menu-item:nth-child(1) i { background: linear-gradient(135deg, #ef4444 0%, #f87171 100%); box-shadow: 0 2px 8px rgba(239, 68, 68, 0.25); }
.mobile-menu-item:nth-child(2) i { background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%); box-shadow: 0 2px 8px rgba(59, 130, 246, 0.25); }
.mobile-menu-item:nth-child(3) i { background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%); box-shadow: 0 2px 8px rgba(139, 92, 246, 0.25); }
.mobile-menu-item:nth-child(4) i { background: linear-gradient(135deg, #14b8a6 0%, #2dd4bf 100%); box-shadow: 0 2px 8px rgba(20, 184, 166, 0.25); }
.mobile-menu-item:nth-child(5) i { background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); box-shadow: 0 2px 8px rgba(245, 158, 11, 0.25); }
.mobile-menu-item:nth-child(6) i { background: linear-gradient(135deg, #10b981 0%, #34d399 100%); box-shadow: 0 2px 8px rgba(16, 185, 129, 0.25); }
.mobile-menu-item:nth-child(7) i { background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%); box-shadow: 0 2px 8px rgba(236, 72, 153, 0.25); }
.mobile-menu-item:nth-child(8) i { background: linear-gradient(135deg, #06b6d4 0%, #22d3ee 100%); box-shadow: 0 2px 8px rgba(6, 182, 212, 0.25); }

/* Dark mode icon adjustments */
[data-theme="dark"] .mobile-menu-item i {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Admin section special styling */
.mobile-menu-section-title[style*="color: #ea580c"] ~ .mobile-menu-item i {
    background: linear-gradient(135deg, #ea580c 0%, #f97316 100%) !important;
    box-shadow: 0 2px 8px rgba(234, 88, 12, 0.25) !important;
}

.mobile-menu-section-title[style*="color: #ea580c"] {
    font-weight: 700;
}

.mobile-menu-item-badge {
    margin-left: auto;
    min-width: 22px;
    height: 22px;
    background: #ff3b30;
    color: white;
    font-size: 12px;
    font-weight: 600;
    border-radius: 11px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 7px;
}

.mobile-menu-item-arrow {
    margin-left: auto;
    color: var(--mobile-menu-text-secondary);
    font-size: 14px;
    opacity: 0.5;
}

/* Quick Stats Row - Enhanced with gradients */
.mobile-menu-stats {
    display: flex;
    gap: 12px;
    padding: 16px 16px;
    margin: 16px 16px;
}

.mobile-menu-stat {
    flex: 1;
    text-align: center;
    padding: 14px 12px;
    text-decoration: none;
    color: var(--mobile-menu-text);
    position: relative;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
    border-radius: 16px;
    border: 1px solid rgba(99, 102, 241, 0.15);
    transition: transform 0.2s ease, background 0.2s ease;
}

.mobile-menu-stat:active {
    transform: scale(0.96);
}

.mobile-menu-stat:nth-child(1) {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(52, 211, 153, 0.08) 100%);
    border-color: rgba(16, 185, 129, 0.15);
}

.mobile-menu-stat:nth-child(2) {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.08) 0%, rgba(96, 165, 250, 0.08) 100%);
    border-color: rgba(59, 130, 246, 0.15);
}

.mobile-menu-stat:nth-child(3) {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(248, 113, 113, 0.08) 100%);
    border-color: rgba(239, 68, 68, 0.15);
}

[data-theme="dark"] .mobile-menu-stat {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.12) 0%, rgba(139, 92, 246, 0.12) 100%);
    border-color: rgba(99, 102, 241, 0.2);
}

[data-theme="dark"] .mobile-menu-stat:nth-child(1) {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(52, 211, 153, 0.12) 100%);
    border-color: rgba(16, 185, 129, 0.2);
}

[data-theme="dark"] .mobile-menu-stat:nth-child(2) {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.12) 0%, rgba(96, 165, 250, 0.12) 100%);
    border-color: rgba(59, 130, 246, 0.2);
}

[data-theme="dark"] .mobile-menu-stat:nth-child(3) {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.12) 0%, rgba(248, 113, 113, 0.12) 100%);
    border-color: rgba(239, 68, 68, 0.2);
}

.mobile-menu-stat-value {
    font-size: 24px;
    font-weight: 700;
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.2;
}

.mobile-menu-stat:nth-child(1) .mobile-menu-stat-value {
    background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.mobile-menu-stat:nth-child(2) .mobile-menu-stat-value {
    background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.mobile-menu-stat:nth-child(3) .mobile-menu-stat-value {
    background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.mobile-menu-stat-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--mobile-menu-text-secondary);
    margin-top: 4px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Menu Footer */
.mobile-menu-footer {
    padding: 16px 20px;
    padding-bottom: calc(16px + var(--safe-bottom));
    border-top: 0.5px solid var(--mobile-menu-divider);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.mobile-menu-footer-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background: var(--mobile-menu-item-hover);
    border: none;
    border-radius: 12px;
    color: var(--mobile-menu-text);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: transform 0.15s ease, background 0.15s ease;
}

.mobile-menu-footer-btn:active {
    transform: scale(0.95);
}

.mobile-menu-footer-btn.danger {
    color: #ff3b30;
}

.mobile-menu-footer-btn.danger:active {
    background: rgba(255, 59, 48, 0.1);
}


/* ============================================
   3. NOTIFICATION SHEET - Better Bell Display
   ============================================ */

.mobile-notification-sheet {
    position: fixed;
    inset: 0;
    z-index: var(--z-modal-backdrop, 1300);
    visibility: hidden;
    pointer-events: none;
}

.mobile-notification-sheet.active {
    visibility: visible;
    pointer-events: auto;
}

.mobile-notification-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    opacity: 0;
    transition: opacity 0.3s ease;
    -webkit-tap-highlight-color: transparent;
}

.mobile-notification-sheet.active .mobile-notification-backdrop {
    opacity: 1;
}

.mobile-notification-container {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: 85vh;
    background: var(--mobile-menu-bg);
    border-radius: 20px 20px 0 0;
    transform: translateY(100%);
    transition: transform 0.4s var(--ease-ios);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    padding-bottom: var(--safe-bottom);
}

.mobile-notification-sheet.active .mobile-notification-container {
    transform: translateY(0);
}

/* Sheet Handle */
.mobile-notification-handle {
    display: flex;
    justify-content: center;
    padding: 12px 0 8px;
}

.mobile-notification-handle::after {
    content: '';
    width: 36px;
    height: 5px;
    background: var(--mobile-menu-divider);
    border-radius: 3px;
}

/* Notification Header */
.mobile-notification-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 20px 16px;
    border-bottom: 0.5px solid var(--mobile-menu-divider);
}

.mobile-notification-title {
    font-size: 20px;
    font-weight: 700;
    margin: 0;
    color: var(--mobile-menu-text);
}

.mobile-notification-actions {
    display: flex;
    gap: 12px;
}

.mobile-notification-action {
    font-size: 14px;
    font-weight: 500;
    color: var(--mobile-nav-active);
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    -webkit-tap-highlight-color: transparent;
}

.mobile-notification-action:active {
    opacity: 0.6;
}

/* Notification List */
.mobile-notification-list {
    flex: 1;
    overflow-y: auto;
}

.mobile-notification-item {
    display: flex;
    align-items: flex-start;
    gap: 14px;
    padding: 16px 20px;
    text-decoration: none;
    color: var(--mobile-menu-text);
    border-bottom: 0.5px solid var(--mobile-menu-divider);
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s ease;
}

.mobile-notification-item:active {
    background: var(--mobile-menu-item-hover);
}

.mobile-notification-item.unread {
    background: rgba(99, 102, 241, 0.04);
}

.mobile-notification-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #ff3b30;
    flex-shrink: 0;
    margin-top: 6px;
}

.mobile-notification-item:not(.unread) .mobile-notification-dot {
    background: var(--mobile-menu-divider);
}

.mobile-notification-content {
    flex: 1;
    min-width: 0;
}

.mobile-notification-message {
    font-size: 15px;
    line-height: 1.4;
    margin: 0 0 4px 0;
}

.mobile-notification-time {
    font-size: 13px;
    color: var(--mobile-menu-text-secondary);
}

.mobile-notification-empty {
    padding: 60px 20px;
    text-align: center;
}

.mobile-notification-empty i {
    font-size: 48px;
    color: var(--mobile-menu-divider);
    margin-bottom: 16px;
}

.mobile-notification-empty p {
    color: var(--mobile-menu-text-secondary);
    font-size: 15px;
    margin: 0;
}


/* ============================================
   4. HIDE ON DESKTOP
   ============================================ */

@media (min-width: 1025px) {

    .mobile-tab-bar,
    .mobile-fullscreen-menu,
    .mobile-notification-sheet,
    .nexus-native-drawer,
    .nexus-native-drawer-overlay {
        display: none !important;
        visibility: hidden !important;
        pointer-events: none !important;
    }

    body {
        padding-bottom: 0 !important;
    }
}


/* ============================================
   5. LANDSCAPE MODE
   ============================================ */

@media (max-width: 1024px) and (orientation: landscape) {
    .mobile-tab-bar {
        height: 60px;
        --mobile-nav-height: 60px;
    }

    .mobile-tab-item {
        flex-direction: row;
        gap: 6px;
    }

    .mobile-tab-item i {
        font-size: 20px;
    }

    .mobile-tab-item span {
        font-size: 11px;
    }

    .mobile-menu-header {
        padding-top: 12px;
    }
}


/* ============================================
   6. REDUCED MOTION
   ============================================ */

@media (prefers-reduced-motion: reduce) {

    .mobile-fullscreen-menu,
    .mobile-notification-container,
    .mobile-tab-item {
        transition-duration: 0.01ms !important;
    }
}


/* ============================================
   7. DARK MODE ENHANCEMENTS
   ============================================ */

[data-theme="dark"] .mobile-tab-bar {
    background: rgba(0, 0, 0, 0.85);
}

[data-theme="dark"] .mobile-menu-header {
    background: linear-gradient(180deg, rgba(99, 102, 241, 0.08) 0%, transparent 100%);
}

[data-theme="dark"] .mobile-menu-stats {
    background: #1c1c1e;
}

[data-theme="dark"] .mobile-notification-container {
    background: #1c1c1e;
}

[data-theme="dark"] .mobile-tab-item.create-btn::before {
    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.5);
}


/* ============================================
   8. ENHANCED MOBILE INTERACTIONS
   ============================================ */

/* Subtle pulse animation for Create button */
@keyframes create-btn-glow {

    0%,
    100% {
        box-shadow:
            0 4px 14px rgba(99, 102, 241, 0.4),
            0 2px 6px rgba(99, 102, 241, 0.2);
    }

    50% {
        box-shadow:
            0 6px 20px rgba(99, 102, 241, 0.5),
            0 3px 10px rgba(99, 102, 241, 0.3);
    }
}

.mobile-tab-item.create-btn::before {
    animation: create-btn-glow 3s ease-in-out infinite;
}

.mobile-tab-item.create-btn:active::before {
    animation: none;
}

/* Active indicator dot */
.mobile-tab-item:not(.create-btn).active::after {
    content: '';
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: #6366f1;
    border-radius: 50%;
}

[data-theme="dark"] .mobile-tab-item:not(.create-btn).active::after,
.dark-mode .mobile-tab-item:not(.create-btn).active::after {
    background: #818cf8;
}


/* Smooth scrolling for menu */
.mobile-menu-body {
    scroll-behavior: smooth;
}

/* Better notification item hover/active state */
.mobile-notification-item {
    position: relative;
    overflow: hidden;
}

.mobile-notification-item::after {
    content: '';
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: opacity 0.2s ease;
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    content: '\f054';
    /* chevron-right */
    font-size: 12px;
    color: var(--mobile-menu-text-secondary);
}

.mobile-notification-item:active::after {
    opacity: 0.5;
}

/* Improved badge animation */
@keyframes badge-bounce {

    0%,
    100% {
        transform: translateX(4px) scale(1);
    }

    50% {
        transform: translateX(4px) scale(1.1);
    }
}

.mobile-tab-badge {
    animation: badge-bounce 2s ease-in-out infinite;
}

/* Menu item active highlight */
.mobile-menu-item {
    position: relative;
    overflow: hidden;
}

.mobile-menu-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--mobile-nav-active);
    transform: scaleY(0);
    transition: transform 0.2s ease;
}

.mobile-menu-item:active::before {
    transform: scaleY(1);
}

/* Stats card hover effect */
.mobile-menu-stat {
    transition: transform 0.2s ease;
}

.mobile-menu-stat:active {
    transform: scale(0.95);
}

/* Footer button improved states */
.mobile-menu-footer-btn {
    position: relative;
    overflow: hidden;
}

.mobile-menu-footer-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: currentColor;
    opacity: 0;
    transition: opacity 0.15s ease;
}

.mobile-menu-footer-btn:active::after {
    opacity: 0.1;
}

/* Theme toggle smooth transition */
.theme-toggle-inline {
    transition: background 0.3s ease, color 0.3s ease;
}

.theme-toggle-inline i {
    transition: transform 0.3s ease;
}

.theme-toggle-inline:active i {
    transform: rotate(180deg);
}

/* Sheet drag indicator animation */
@keyframes handle-hint {

    0%,
    100% {
        transform: scaleX(1);
    }

    50% {
        transform: scaleX(0.8);
    }
}

.mobile-notification-handle::after {
    animation: handle-hint 2s ease-in-out 1;
    animation-delay: 0.5s;
}

/* Empty state animation */
@keyframes empty-float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-8px);
    }
}

.mobile-notification-empty i {
    animation: empty-float 3s ease-in-out infinite;
}


/* ============================================
   9. iOS SAFE AREA IMPROVEMENTS
   ============================================ */

/* Better notch handling */
@supports (padding-top: env(safe-area-inset-top)) {
    .mobile-fullscreen-menu {
        padding-top: env(safe-area-inset-top);
    }

    .mobile-menu-header {
        padding-top: calc(16px + env(safe-area-inset-top));
    }
}

/* iPhone with Dynamic Island */
@supports (padding-top: max(env(safe-area-inset-top), 47px)) {
    .mobile-fullscreen-menu {
        padding-top: max(env(safe-area-inset-top), 0px);
    }
}

/* Home indicator area */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
    .mobile-notification-container {
        padding-bottom: max(16px, env(safe-area-inset-bottom));
    }
}

