/**
 * Mobile Micro-interactions Enhancement
 * Haptic feedback coordination and subtle animations
 * Version: 1.0 - 2026-01-21
 *
 * PRIORITY: HIGH
 * Final polish for native-app-like feel
 * Completes mobile polish journey to 100/100
  * Fully Migrated to Design Tokens: 2026-01-21 âœ“
 */

/* ============================================
   ANIMATIONS
   ============================================ */

@keyframes mobile-ripple {
    0% {
        transform: scale(0);
        opacity: 0.5;
    }
    100% {
        transform: scale(2);
        opacity: 0;
    }
}

@keyframes mobile-bounce-in {
    0% {
        transform: scale(0.95);
    }
    50% {
        transform: scale(1.02);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes mobile-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    75% { transform: translateX(4px); }
}

@keyframes mobile-wiggle {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-2deg); }
    75% { transform: rotate(2deg); }
}

@keyframes mobile-pulse-success {
    0% {
        box-shadow: 0 0 0 0 var(--color-green-500-alpha-70);
    }
    100% {
        box-shadow: 0 0 0 10px var(--color-green-500-alpha-0);
    }
}

@keyframes mobile-pulse-error {
    0% {
        box-shadow: 0 0 0 0 var(--color-red-alpha-70);
    }
    100% {
        box-shadow: 0 0 0 10px var(--color-red-alpha-0);
    }
}

@keyframes mobile-slide-bounce {
    0% {
        transform: translateX(-100%);
    }
    70% {
        transform: translateX(5%);
    }
    100% {
        transform: translateX(0);
    }
}

@keyframes mobile-count-up {
    0% {
        transform: translateY(10px) scale(0.9);
        opacity: 0;
    }
    50% {
        transform: translateY(-2px) scale(1.1);
    }
    100% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
}

/* ============================================
   RIPPLE EFFECTS
   Material Design-style touch feedback
   ============================================ */

.mobile-ripple-container {
    position: relative;
    overflow: hidden;
    /* Prevent ripple from escaping rounded corners */
    -webkit-mask-image: -webkit-radial-gradient(white, black);
}

.mobile-ripple {
    position: absolute;
    border-radius: 50%;
    background: var(--color-white-alpha-60);
    pointer-events: none;
    animation: mobile-ripple 0.6s ease-out;
}

/* Primary button ripple */
.mobile-ripple.primary {
    background: var(--color-white-alpha-40);
}

/* Secondary button ripple */
.mobile-ripple.secondary {
    background: var(--color-indigo-alpha-30);
}

/* Dark button ripple */
.mobile-ripple.dark {
    background: var(--color-black-alpha-20);
}

/* ============================================
   BUTTON PRESS ANIMATIONS
   Tactile feedback for all interactive elements
   ============================================ */

.mobile-interactive-press {
    transition: transform var(--mobile-transition-fast, 0.15s) ease-out;
    will-change: transform;
}

.mobile-interactive-press:active {
    transform: scale(0.96);
}

/* Icon buttons */
.mobile-icon-press {
    transition: transform var(--mobile-transition-fast, 0.15s) ease-out;
}

.mobile-icon-press:active {
    transform: scale(0.90);
}

/* FAB buttons (larger scale effect) */
.mobile-fab-press {
    transition: all var(--mobile-transition-fast, 0.15s) ease-out;
}

.mobile-fab-press:active {
    transform: scale(0.92);
    box-shadow: 0 2px 8px var(--color-black-alpha-15);
}

/* List items */
.mobile-list-item-press {
    transition: all var(--mobile-transition-fast, 0.15s) ease-out;
}

.mobile-list-item-press:active {
    transform: scale(0.98);
    background: var(--color-gray-100, var(--color-gray-100));
}

[data-theme="dark"] .mobile-list-item-press:active {
    background: var(--color-gray-800, var(--color-gray-800));
}

/* Cards */
.mobile-card-press {
    transition: all var(--mobile-transition-normal, 0.2s) ease-out;
}

.mobile-card-press:active {
    transform: scale(0.97);
    box-shadow: 0 1px 3px var(--color-black-alpha-10);
}

/* ============================================
   SWIPE GESTURE FEEDBACK
   Visual feedback during swipe actions
   ============================================ */

.mobile-swipe-container {
    position: relative;
    transition: transform var(--mobile-transition-normal, 0.2s) ease-out;
}

/* Swipe left (reveal delete action) */
.mobile-swipe-container[data-swipe="left"] {
    transform: translateX(-80px);
}

/* Swipe right (reveal archive action) */
.mobile-swipe-container[data-swipe="right"] {
    transform: translateX(80px);
}

/* Swipe actions background */
.mobile-swipe-actions {
    position: absolute;
    top: 0;
    height: 100%;
    display: flex;
    align-items: center;
    padding: 0 var(--mobile-space-4, 16px);
}

.mobile-swipe-actions.left {
    right: 0;
    background: var(--color-error-500, var(--color-danger));
}

.mobile-swipe-actions.right {
    left: 0;
    background: var(--color-success-500, var(--color-green-500));
}

/* Swipe action icons */
.mobile-swipe-icon {
    color: white;
    font-size: 20px;
    transition: transform var(--mobile-transition-fast, 0.15s) ease-out;
}

.mobile-swipe-container[data-swipe="left"] .mobile-swipe-actions.left .mobile-swipe-icon,
.mobile-swipe-container[data-swipe="right"] .mobile-swipe-actions.right .mobile-swipe-icon {
    transform: scale(1.2);
}

/* ============================================
   HAPTIC FEEDBACK COORDINATION
   CSS classes triggered with haptic vibration
   ============================================ */

/* Success haptic feedback */
.mobile-haptic-success {
    animation: mobile-bounce-in 0.3s ease-out,
               mobile-pulse-success 0.6s ease-out;
}

/* Error haptic feedback */
.mobile-haptic-error {
    animation: mobile-shake 0.4s ease-in-out,
               mobile-pulse-error 0.6s ease-out;
}

/* Light haptic feedback (selection changed) */
.mobile-haptic-light {
    animation: mobile-bounce-in 0.2s ease-out;
}

/* Medium haptic feedback (button press) */
.mobile-haptic-medium {
    animation: mobile-bounce-in 0.25s ease-out;
}

/* Heavy haptic feedback (important action) */
.mobile-haptic-heavy {
    animation: mobile-bounce-in 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ============================================
   TOGGLE SWITCH MICRO-INTERACTIONS
   Smooth toggle animations
   ============================================ */

.mobile-toggle-switch {
    position: relative;
    width: 51px;
    height: 31px;
    background: var(--color-gray-300, var(--color-gray-300));
    border-radius: 31px;
    transition: background-color var(--mobile-transition-normal, 0.2s) ease-out;
    cursor: pointer;
}

.mobile-toggle-switch.active {
    background: var(--color-primary-500, var(--color-primary-500));
}

.mobile-toggle-thumb {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 25px;
    height: 25px;
    background: white;
    border-radius: 50%;
    transition: all var(--mobile-transition-normal, 0.2s) cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: 0 2px 4px var(--color-black-alpha-20);
}

.mobile-toggle-switch.active .mobile-toggle-thumb {
    left: 23px;
    transform: scale(1.1);
}

.mobile-toggle-switch:active .mobile-toggle-thumb {
    width: 28px;
}

/* ============================================
   BADGE ANIMATIONS
   Notification badge micro-interactions
   ============================================ */

.mobile-badge-pop {
    animation: mobile-bounce-in 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.mobile-badge-count-up {
    animation: mobile-count-up 0.3s ease-out;
}

/* Badge wiggle (attention-grabbing) */
.mobile-badge-wiggle {
    animation: mobile-wiggle 0.5s ease-in-out 3;
}

/* ============================================
   PULL-TO-REFRESH INTERACTIONS
   Enhanced visual feedback
   ============================================ */

.mobile-pull-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--mobile-space-4, 16px);
    transform: translateY(-100%) scale(0.8);
    opacity: 0;
    transition: all var(--mobile-transition-normal, 0.2s) ease-out;
}

.mobile-pull-indicator.pulling {
    transform: translateY(0) scale(1);
    opacity: 1;
}

.mobile-pull-indicator.releasing {
    transform: translateY(0) scale(1.1);
}

.mobile-pull-arrow {
    width: 24px;
    height: 24px;
    transition: transform var(--mobile-transition-normal, 0.2s) ease-out;
}

.mobile-pull-indicator.releasing .mobile-pull-arrow {
    transform: rotate(180deg);
}

/* ============================================
   CHECKBOX/RADIO INTERACTIONS
   Material-style check animations
   ============================================ */

.mobile-checkbox {
    position: relative;
    width: 20px;
    height: 20px;
    border: 2px solid var(--color-gray-400, var(--color-gray-400));
    border-radius: var(--mobile-radius-sm, 4px);
    transition: all var(--mobile-transition-fast, 0.15s) ease-out;
    cursor: pointer;
}

.mobile-checkbox.checked {
    background: var(--color-primary-500, var(--color-primary-500));
    border-color: var(--color-primary-500, var(--color-primary-500));
    animation: mobile-bounce-in 0.3s ease-out;
}

.mobile-checkbox-checkmark {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 10px;
    height: 5px;
    border-left: 2px solid white;
    border-bottom: 2px solid white;
    transform-origin: center;
    transition: transform var(--mobile-transition-fast, 0.15s) cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.mobile-checkbox.checked .mobile-checkbox-checkmark {
    transform: translate(-50%, -60%) rotate(-45deg) scale(1);
}

/* Radio buttons */
.mobile-radio {
    position: relative;
    width: 20px;
    height: 20px;
    border: 2px solid var(--color-gray-400, var(--color-gray-400));
    border-radius: 50%;
    transition: all var(--mobile-transition-fast, 0.15s) ease-out;
    cursor: pointer;
}

.mobile-radio.checked {
    border-color: var(--color-primary-500, var(--color-primary-500));
    animation: mobile-bounce-in 0.3s ease-out;
}

.mobile-radio-dot {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    width: 10px;
    height: 10px;
    background: var(--color-primary-500, var(--color-primary-500));
    border-radius: 50%;
    transition: transform var(--mobile-transition-fast, 0.15s) cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.mobile-radio.checked .mobile-radio-dot {
    transform: translate(-50%, -50%) scale(1);
}

/* ============================================
   SLIDER/PROGRESS BAR INTERACTIONS
   Smooth value changes
   ============================================ */

.mobile-slider {
    position: relative;
    height: 4px;
    background: var(--color-gray-200, var(--color-gray-200));
    border-radius: 2px;
    cursor: pointer;
}

.mobile-slider-fill {
    height: 100%;
    background: var(--color-primary-500, var(--color-primary-500));
    border-radius: 2px;
    transition: width var(--mobile-transition-normal, 0.2s) ease-out;
}

.mobile-slider-thumb {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 20px;
    height: 20px;
    background: white;
    border: 2px solid var(--color-primary-500, var(--color-primary-500));
    border-radius: 50%;
    box-shadow: 0 2px 4px var(--color-black-alpha-20);
    transition: all var(--mobile-transition-fast, 0.15s) ease-out;
    cursor: grab;
}

.mobile-slider-thumb:active {
    transform: translate(-50%, -50%) scale(1.3);
    cursor: grabbing;
    box-shadow: 0 4px 8px var(--color-black-alpha-30);
}

/* ============================================
   TAB SWITCHING INTERACTIONS
   Animated indicator
   ============================================ */

.mobile-tab-bar {
    position: relative;
    display: flex;
    border-bottom: 1px solid var(--color-gray-200, var(--color-gray-200));
}

.mobile-tab {
    flex: 1;
    padding: var(--mobile-space-3, 12px) var(--mobile-space-4, 16px);
    text-align: center;
    color: var(--color-gray-600, var(--color-gray-600));
    transition: color var(--mobile-transition-fast, 0.15s) ease-out;
    cursor: pointer;
}

.mobile-tab.active {
    color: var(--color-primary-500, var(--color-primary-500));
}

.mobile-tab-indicator {
    position: absolute;
    bottom: -1px;
    height: 2px;
    background: var(--color-primary-500, var(--color-primary-500));
    transition: all var(--mobile-transition-normal, 0.2s) cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ============================================
   ACCORDION MICRO-INTERACTIONS
   Smooth expand/collapse
   ============================================ */

.mobile-accordion-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--mobile-space-4, 16px);
    cursor: pointer;
    transition: background-color var(--mobile-transition-fast, 0.15s) ease-out;
}

.mobile-accordion-header:active {
    background: var(--color-gray-50, var(--color-gray-50));
}

.mobile-accordion-icon {
    transition: transform var(--mobile-transition-normal, 0.2s) ease-out;
}

.mobile-accordion-header.expanded .mobile-accordion-icon {
    transform: rotate(180deg);
}

.mobile-accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height var(--mobile-transition-slow, 0.3s) ease-out;
}

.mobile-accordion-header.expanded + .mobile-accordion-content {
    max-height: 1000px;
}

/* ============================================
   FLOATING ACTION BUTTON (FAB) INTERACTIONS
   Material Design FAB animations
   ============================================ */

.mobile-fab {
    position: fixed;
    bottom: calc(var(--mobile-tab-bar-height, 84px) + var(--mobile-space-4, 16px));
    right: var(--mobile-space-4, 16px);
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--color-primary-500, var(--color-primary-500));
    box-shadow: 0 4px 12px var(--color-indigo-alpha-40);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    z-index: var(--mobile-z-sticky, 200);
    transition: all var(--mobile-transition-normal, 0.2s) ease-out;
    cursor: pointer;
}

.mobile-fab:active {
    transform: scale(0.9);
    box-shadow: 0 2px 8px var(--color-indigo-alpha-40);
}

.mobile-fab.extended {
    width: auto;
    padding: 0 var(--mobile-space-5, 20px);
    border-radius: 28px;
}

.mobile-fab-icon {
    transition: transform var(--mobile-transition-normal, 0.2s) ease-out;
}

.mobile-fab:hover .mobile-fab-icon {
    transform: rotate(90deg);
}

/* ============================================
   SNACKBAR/TOAST INTERACTIONS
   Slide-in animations
   ============================================ */

.mobile-snackbar {
    position: fixed;
    bottom: calc(var(--mobile-tab-bar-height, 84px) + var(--mobile-space-4, 16px));
    left: var(--mobile-space-4, 16px);
    right: var(--mobile-space-4, 16px);
    padding: var(--mobile-space-4, 16px);
    background: var(--color-gray-900, var(--color-gray-900));
    color: white;
    border-radius: var(--mobile-radius-lg, 12px);
    box-shadow: 0 4px 12px var(--color-black-alpha-30);
    z-index: var(--mobile-z-toast, 1000000);
    animation: mobile-slide-bounce 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.mobile-snackbar.success {
    background: var(--color-success-500, var(--color-green-500));
}

.mobile-snackbar.error {
    background: var(--color-error-500, var(--color-danger));
}

.mobile-snackbar.warning {
    background: var(--color-warning-500, var(--color-warning));
}

/* ============================================
   ACCESSIBILITY - REDUCED MOTION
   ============================================ */

@media (prefers-reduced-motion: reduce) {
    .mobile-ripple,
    .mobile-interactive-press,
    .mobile-icon-press,
    .mobile-fab-press,
    .mobile-list-item-press,
    .mobile-card-press,
    .mobile-toggle-thumb,
    .mobile-slider-thumb,
    .mobile-tab-indicator,
    .mobile-accordion-icon,
    .mobile-fab-icon {
        animation: none;
        transition: none;
    }

    .mobile-haptic-success,
    .mobile-haptic-error,
    .mobile-haptic-light,
    .mobile-haptic-medium,
    .mobile-haptic-heavy,
    .mobile-badge-pop,
    .mobile-badge-count-up,
    .mobile-badge-wiggle {
        animation: none;
    }

    .mobile-interactive-press:active,
    .mobile-icon-press:active,
    .mobile-fab-press:active,
    .mobile-card-press:active {
        transform: none;
    }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Add ripple container to any element */
.has-ripple {
    position: relative;
    overflow: hidden;
    -webkit-mask-image: -webkit-radial-gradient(white, black);
}

/* Prevent accidental text selection during interactions */
.mobile-no-select {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
}

/* Hardware acceleration for smooth animations */
.mobile-hardware-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
}
