/**
 * Modern Mobile Navigation v2 - CSS
 * Full-screen, native app-like mobile navigation
 * Inspired by Instagram, TikTok, and iOS design patterns
 * Migrated to design tokens for consistency
 */

/* FIX: Remove transform from html that breaks position:fixed */
html[data-layout] {
    transform: none !important;
}

/* Hide on desktop by default */
.mobile-tab-bar {
    display: none;
}

/* CRITICAL: Hide mobile fullscreen menu and notification sheet on desktop */
.mobile-fullscreen-menu,
.mobile-notification-sheet,
#mobileMenu,
#mobileNotifications {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* Only show these elements on mobile/tablet */
@media (max-width: 1024px) {
    .mobile-fullscreen-menu,
    #mobileMenu {
        /* CRITICAL: Must be flex for scroll to work - menu-body needs flex: 1 */
        display: flex !important;
        flex-direction: column !important;
        visibility: visible !important;
        opacity: 1 !important;
        pointer-events: auto !important;
    }

    .mobile-notification-sheet,
    #mobileNotifications {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        pointer-events: auto !important;
    }

    /* But when not active, hide them properly */
    .mobile-fullscreen-menu:not(.active),
    #mobileMenu:not(.active) {
        transform: translateX(100%) !important;
    }

    .mobile-notification-sheet:not(.active),
    #mobileNotifications:not(.active) {
        transform: translateY(100%) !important;
    }
}

/* CRITICAL: Hide ALL legacy navigation on mobile including drawer AND header hamburger */
@media (max-width: 1024px) {
    .nexus-native-nav,
    .nexus-native-nav-inner,
    .nexus-bottom-nav,
    .nexus-quick-fab,
    .nexus-native-drawer,
    .nexus-native-drawer-overlay {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        transform: translateX(-100%) !important;
    }

    /* Hide header hamburger menu buttons - we have Menu in bottom tab bar */
    .nexus-menu-btn,
    #civic-menu-toggle {
        display: none !important;
    }

    /* Show mobile tab bar */
    .mobile-tab-bar {
        display: flex !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: var(--z-navbar) !important;
        height: var(--layout-mobile-nav-height) !important;
        background: var(--color-white-alpha-98) !important;
        border-top: 1px solid var(--border-default) !important;
        -webkit-backdrop-filter: saturate(var(--glass-saturation)) blur(var(--glass-blur-subtle)) !important;
        backdrop-filter: saturate(var(--glass-saturation)) blur(var(--glass-blur-subtle)) !important;
    }

    [data-theme="dark"] .mobile-tab-bar {
        background: var(--color-slate-800-alpha-98) !important;
        border-top-color: var(--border-default) !important;
    }

    body {
        padding-bottom: 90px !important;
    }

    /* Ensure menu button looks like other tab items */
    .mobile-tab-item[type="button"],
    button.mobile-tab-item {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        margin: 0;
        font-family: inherit;
        outline: none;
        -webkit-appearance: none;
        appearance: none;
    }
}

/* ==========================================
   Mobile Menu Item Icon Colors
   Using CSS classes instead of inline styles
   ========================================== */

/* Create section icons */
.mobile-menu-icon-post { color: var(--color-info); }
.mobile-menu-icon-listing { color: var(--color-success); }
.mobile-menu-icon-event { color: var(--color-warning); }
.mobile-menu-icon-volunteer { color: var(--color-pink-500); }
.mobile-menu-icon-poll { color: var(--color-purple-500); }
.mobile-menu-icon-goal { color: var(--color-danger); }

/* Help section icons */
.mobile-menu-icon-help { color: var(--color-orange-500); }
.mobile-menu-icon-contact { color: var(--color-info); }
.mobile-menu-icon-accessibility { color: var(--color-success); }

/* Admin section */
.mobile-menu-section-admin .mobile-menu-section-title {
    color: var(--color-orange-600);
}

/* AI Assistant special styling */
.mobile-menu-item-ai {
    background: linear-gradient(135deg, var(--color-indigo-alpha-10), var(--color-violet-alpha-10));
    font-weight: var(--font-weight-semibold);
}

/* Arrow icon in user profile link */
.mobile-menu-user-arrow {
    font-size: var(--font-size-xs);
    margin-right: var(--space-1);
}
