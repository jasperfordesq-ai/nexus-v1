/**
 * Modern Header Emergency Fixes
 * Extracted from inline styles in header.php (2026-01-21)
 *
 * ROOT CAUSE IDENTIFIED:
 * - Base dropdown CSS (nexus-modern-header.css:616) sets min-width: min(280px, calc(100vw - 32px))
 * - This forces dropdowns to be minimum 280px wide even for short content
 * - Mode switcher was sized for older, larger design and needs to be more compact
 *
 * SOLUTION:
 * Override with content-based sizing for utility bar dropdowns specifically
 * These fixes are intentional overrides, not bandaids.
 */

/* ==========================================
   UTILITY BAR DROPDOWNS - AUTO-SIZING
   Target: Platform, Create, Federation, User dropdowns in utility bar
   ========================================== */

/* Override base 280px min-width for utility bar dropdowns */
.nexus-utility-bar .htb-dropdown .htb-dropdown-content,
.nexus-utility-bar div.htb-dropdown-content,
nav.nexus-utility-bar .htb-dropdown-content {
    min-width: auto !important;
    max-width: max-content !important;
    width: auto !important;
    padding: var(--space-2) 0 !important;
}

/* Left-side dropdowns: Platform dropdown alignment */
.nexus-utility-bar .left-utils .htb-dropdown .htb-dropdown-content,
.nexus-utility-bar .left-utils div.htb-dropdown-content,
nav.nexus-utility-bar .left-utils .htb-dropdown-content {
    left: 0 !important;
    right: auto !important;
}

/* Right-side dropdowns: Keep right alignment for Create, Federation, User dropdowns */
.nexus-utility-bar .right-header-utils .htb-dropdown .htb-dropdown-content,
.nexus-utility-bar .right-header-utils div.htb-dropdown-content,
nav.nexus-utility-bar .right-header-utils .htb-dropdown-content {
    right: 0 !important;
    left: auto !important;
}

/* Ensure links use natural width with no wrapping */
.nexus-utility-bar .htb-dropdown .htb-dropdown-content a,
.nexus-utility-bar div.htb-dropdown-content a,
nav.nexus-utility-bar .htb-dropdown-content a {
    white-space: nowrap !important;
    padding: 10px 16px !important;
    margin: 1px 6px !important;
}

/* Remove extra spacing from first/last items */
.nexus-utility-bar .htb-dropdown .htb-dropdown-content a:first-child,
.nexus-utility-bar div.htb-dropdown-content a:first-child,
nav.nexus-utility-bar .htb-dropdown-content a:first-child {
    margin-top: 1px !important;
}

.nexus-utility-bar .htb-dropdown .htb-dropdown-content a:last-child,
.nexus-utility-bar div.htb-dropdown-content a:last-child,
nav.nexus-utility-bar .htb-dropdown-content a:last-child {
    margin-bottom: 1px !important;
}

/* ==========================================
   MODE SWITCHER - COMPACT SIZING
   Design requirement: Minimize utility bar height
   ========================================== */

.nexus-utility-bar .mode-switcher {
    gap: var(--space-1);
    padding: 2px 6px 2px 2px;
    margin-left: var(--space-1);
    border-radius: 16px;
    min-height: 28px;
}

.nexus-utility-bar .mode-switcher .mode-icon-container {
    width: 24px;
    height: 24px;
}

.nexus-utility-bar .mode-switcher .mode-icon {
    font-size: 11px;
}

.nexus-utility-bar .mode-switcher .mode-label {
    font-size: 10px;
    letter-spacing: 0.2px;
}

/* ==========================================
   FUTURE IMPROVEMENTS
   ========================================== */
/*
 * Consider migrating these fixes back to base CSS:
 * 1. Add .utility-bar-dropdown class for compact dropdowns
 * 2. Add .mode-switcher-compact variant
 * 3. Remove need for context-specific overrides
 *
 * However, these overrides serve a specific purpose and are
 * intentional design decisions for the utility bar context.
 */
