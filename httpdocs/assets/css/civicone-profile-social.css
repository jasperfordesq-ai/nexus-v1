/**
 * CivicOne Profile Social Components
 * ===================================
 * GOV.UK-styled social interaction components for profile pages
 * Pattern: Cards, Action buttons, Comments, Notifications
 * WCAG 2.1 AA Compliant
 * Created: 2026-01-20
 * Updated: 2026-01-21 - Migrated to design tokens
 */

/* =============================================================================
   POST COMPOSER (Form for creating new posts)
   ============================================================================= */

.civicone .civic-composer {
    background: #ffffff;
    border: 2px solid #b1b4b6;
    padding: var(--space-5);
    margin-bottom: var(--space-8);
}

.civicone .civic-composer .govuk-heading-m {
    margin-top: 0;
    margin-bottom: var(--space-4);
}

.civicone .civic-composer .govuk-form-group {
    margin-bottom: var(--space-4);
}

.civicone .civic-composer .govuk-textarea {
    font-family: "GDS Transport", arial, sans-serif;
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    color: #0b0c0c;
    border: 2px solid #0b0c0c;
    padding: var(--space-3);
    width: 100%;
    resize: vertical;
}

.civicone .civic-composer .govuk-textarea:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    box-shadow: inset 0 0 0 2px;
}

.civicone .civic-composer-actions {
    display: flex;
    gap: var(--space-4);
    align-items: center;
    justify-content: flex-start;
    flex-wrap: wrap;
}

.civicone .civic-composer-actions .govuk-button {
    margin: 0;
}

/* =============================================================================
   POST CARDS
   ============================================================================= */

.civicone .civic-post-card {
    background: #ffffff;
    border: 2px solid #b1b4b6;
    padding: var(--space-5);
    margin-bottom: var(--space-8);
}

.civicone .civic-post-card:focus-within {
    border-color: #0b0c0c;
}

/* Post Header (Author info and timestamp) */
.civicone .civic-post-header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-4);
    border-bottom: 1px solid #b1b4b6;
}

.civicone .civic-post-header .civic-avatar-sm {
    width: var(--space-12);
    height: var(--space-12);
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #b1b4b6;
}

.civicone .civic-post-header .govuk-heading-s {
    margin: 0;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-bold);
}

.civicone .civic-post-header .govuk-body-s {
    font-size: var(--font-size-sm);
    color: #505a5f;
    margin: 0;
}

/* Post Content */
.civicone .civic-post-content {
    margin-bottom: var(--space-4);
}

.civicone .civic-post-content .govuk-body {
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    color: #0b0c0c;
    margin-bottom: var(--space-4);
}

.civicone .civic-post-content a {
    color: #1d70b8;
    text-decoration: underline;
}

.civicone .civic-post-content a:hover {
    color: #003078;
}

.civicone .civic-post-content a:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    background: #ffdd00;
    color: #0b0c0c;
}

/* Post Image */
.civicone .civic-post-image {
    margin: var(--space-4) 0;
    border: 1px solid #b1b4b6;
}

.civicone .civic-post-image img {
    display: block;
    max-width: 100%;
    height: auto;
}

/* =============================================================================
   ACTION BUTTONS (Like, Comment, Share)
   ============================================================================= */

.civicone .civic-post-actions {
    display: flex;
    gap: var(--space-4);
    padding-top: var(--space-4);
    border-top: 1px solid #b1b4b6;
    flex-wrap: wrap;
}

.civicone .civic-action-btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    font-family: "GDS Transport", arial, sans-serif;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-normal);
    color: #0b0c0c;
    background: #f3f2f1;
    border: 2px solid #0b0c0c;
    border-radius: var(--radius-none);
    cursor: pointer;
    transition: var(--transition-fast);
}

.civicone .civic-action-btn:hover {
    background: #e8e8e8;
}

.civicone .civic-action-btn:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    background: #ffdd00;
    color: #0b0c0c;
}

.civicone .civic-action-btn:active {
    transform: translateY(1px);
}

.civicone .civic-action-btn i {
    font-size: var(--font-size-lg);
}

.civicone .civic-action-btn .like-count,
.civicone .civic-action-btn .comment-count {
    font-weight: var(--font-weight-bold);
    min-width: var(--space-5);
    text-align: center;
}

/* Liked state */
.civicone .civic-action-btn.liked {
    background: #d4351c;
    color: #ffffff;
    border-color: #d4351c;
}

.civicone .civic-action-btn.liked:hover {
    background: #aa2a16;
    border-color: #aa2a16;
}

.civicone .civic-action-btn.liked:focus {
    background: #ffdd00;
    color: #0b0c0c;
    border-color: #0b0c0c;
}

/* =============================================================================
   COMMENTS SECTION
   ============================================================================= */

.civicone .civic-comments-section {
    margin-top: var(--space-5);
    padding-top: var(--space-5);
    border-top: 2px solid #b1b4b6;
    display: none;
}

.civicone .civic-comments-section.visible {
    display: block;
}

.civicone .civic-comments-section .govuk-heading-s {
    margin-bottom: var(--space-4);
    font-size: var(--font-size-base);
}

/* Individual Comment */
.civicone .civic-comment {
    display: flex;
    gap: var(--space-3);
    margin-bottom: var(--space-5);
    padding-bottom: var(--space-5);
    border-bottom: 1px solid #f3f2f1;
}

.civicone .civic-comment:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.civicone .civic-comment-avatar {
    width: var(--space-10);
    height: var(--space-10);
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #b1b4b6;
    flex-shrink: 0;
}

.civicone .civic-comment-bubble {
    flex: 1;
    background: #f3f2f1;
    padding: var(--space-3) var(--space-4);
    border: 1px solid #b1b4b6;
}

.civicone .civic-comment-author {
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-sm);
    color: #0b0c0c;
    margin-bottom: var(--space-1);
}

.civicone .civic-comment-text {
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    color: #0b0c0c;
    margin-bottom: var(--space-2);
}

.civicone .civic-comment-meta {
    display: flex;
    gap: var(--space-4);
    font-size: var(--font-size-sm);
    color: #505a5f;
}

.civicone .civic-comment-meta button {
    background: none;
    border: none;
    color: #1d70b8;
    text-decoration: underline;
    cursor: pointer;
    padding: 0;
    font-family: "GDS Transport", arial, sans-serif;
    font-size: var(--font-size-sm);
}

.civicone .civic-comment-meta button:hover {
    color: #003078;
}

.civicone .civic-comment-meta button:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    background: #ffdd00;
    color: #0b0c0c;
}

/* Comment Form */
.civicone .civic-comment-form {
    margin-top: var(--space-5);
    padding: var(--space-4);
    background: #f3f2f1;
    border: 1px solid #b1b4b6;
}

.civicone .civic-comment-form .govuk-heading-s {
    margin-top: 0;
    margin-bottom: var(--space-3);
    font-size: var(--font-size-base);
}

.civicone .civic-comment-input {
    width: 100%;
    font-family: "GDS Transport", arial, sans-serif;
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    color: #0b0c0c;
    border: 2px solid #0b0c0c;
    padding: var(--space-2);
    resize: vertical;
    min-height: var(--space-20);
    margin-bottom: var(--space-3);
}

.civicone .civic-comment-input:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    box-shadow: inset 0 0 0 2px;
}

.civicone .civic-comment-submit {
    font-family: "GDS Transport", arial, sans-serif;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-normal);
    padding: var(--space-3) var(--space-4);
    color: #ffffff;
    background: #00703c;
    border: 2px solid transparent;
    cursor: pointer;
    box-shadow: 0 2px 0 #002d18;
}

.civicone .civic-comment-submit:hover {
    background: #005a30;
}

.civicone .civic-comment-submit:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    background: #ffdd00;
    color: #0b0c0c;
    border-color: #0b0c0c;
    box-shadow: none;
}

.civicone .civic-comment-submit:active {
    transform: translateY(2px);
    box-shadow: none;
}

/* Reply Form (Nested comments) */
.civicone .civic-reply-form {
    margin-top: var(--space-4);
    margin-left: 52px;
    padding: var(--space-4);
    background: #ffffff;
    border: 1px solid #b1b4b6;
}

.civicone .civic-reply-input {
    width: 100%;
    font-family: "GDS Transport", arial, sans-serif;
    font-size: var(--font-size-sm);
    line-height: var(--line-height-normal);
    color: #0b0c0c;
    border: 2px solid #0b0c0c;
    padding: var(--space-2);
    resize: vertical;
    min-height: 60px;
    margin-bottom: var(--space-3);
}

.civicone .civic-reply-input:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    box-shadow: inset 0 0 0 2px;
}

/* =============================================================================
   REACTIONS (Emoji reactions)
   ============================================================================= */

.civicone .civic-reactions {
    display: flex;
    gap: var(--space-2);
    margin-top: var(--space-3);
    flex-wrap: wrap;
}

.civicone .civic-reaction {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    background: #f3f2f1;
    border: 1px solid #b1b4b6;
    border-radius: var(--radius-md);
    font-size: var(--font-size-sm);
    cursor: pointer;
}

.civicone .civic-reaction:hover {
    background: #e8e8e8;
}

.civicone .civic-reaction:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
}

.civicone .civic-reaction.active {
    background: #1d70b8;
    color: #ffffff;
    border-color: #1d70b8;
}

.civicone .civic-reaction-picker {
    position: relative;
    display: inline-block;
}

.civicone .civic-reaction-picker-menu {
    position: absolute;
    bottom: 100%;
    left: 0;
    background: #ffffff;
    border: 2px solid #0b0c0c;
    padding: var(--space-2);
    display: none;
    gap: var(--space-2);
    z-index: var(--z-popover);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.civicone .civic-reaction-picker-menu.visible {
    display: flex;
}

.civicone .civic-reaction-picker-menu button {
    background: none;
    border: none;
    font-size: var(--font-size-2xl);
    cursor: pointer;
    padding: var(--space-1);
}

.civicone .civic-reaction-picker-menu button:hover {
    background: #f3f2f1;
}

.civicone .civic-reaction-picker-menu button:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
}

/* =============================================================================
   MENTIONS
   ============================================================================= */

.civicone .civic-mention {
    color: #1d70b8;
    text-decoration: none;
    font-weight: var(--font-weight-semibold);
}

.civicone .civic-mention:hover {
    color: #003078;
    text-decoration: underline;
}

.civicone .civic-mention:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    background: #ffdd00;
    color: #0b0c0c;
}

/* =============================================================================
   TOAST NOTIFICATIONS
   ============================================================================= */

.civicone .civic-toast {
    position: fixed;
    bottom: var(--space-5);
    left: 50%;
    transform: translateX(-50%);
    z-index: var(--z-toast);
    min-width: 300px;
    max-width: 500px;
    background: #00703c;
    color: #ffffff;
    border: 4px solid #00703c;
    padding: var(--space-4) 20px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    display: none;
}

.civicone .civic-toast.visible {
    display: block;
    animation: civicToastSlideUp var(--transition-base) var(--ease-out);
}

.civicone .civic-toast.error {
    background: #d4351c;
    border-color: #d4351c;
}

.civicone .civic-toast.warning {
    background: #f47738;
    border-color: #f47738;
}

.civicone .civic-toast.info {
    background: #1d70b8;
    border-color: #1d70b8;
}

.civicone .civic-toast .civic-toast-content {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.civicone .civic-toast .civic-toast-icon {
    font-size: var(--font-size-2xl);
    flex-shrink: 0;
}

.civicone .civic-toast .civic-toast-message {
    flex: 1;
    font-family: "GDS Transport", arial, sans-serif;
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
}

@keyframes civicToastSlideUp {
    from {
        transform: translate(-50%, var(--space-5));
        opacity: 0;
    }
    to {
        transform: translate(-50%, 0);
        opacity: 1;
    }
}

/* =============================================================================
   SIDEBAR: RELATED CONTENT
   ============================================================================= */

.civicone .civicone-related-content {
    background: #f3f2f1;
    border: 2px solid #b1b4b6;
    padding: var(--space-5);
}

.civicone .civicone-related-content .govuk-heading-m {
    margin-top: 0;
    margin-bottom: var(--space-4);
    font-size: var(--font-size-lg);
}

.civicone .civicone-related-content .govuk-list {
    margin: 0;
    padding: 0;
    list-style: none;
}

.civicone .civicone-related-content .govuk-list li {
    margin-bottom: var(--space-3);
    padding-bottom: var(--space-3);
    border-bottom: 1px solid #b1b4b6;
}

.civicone .civicone-related-content .govuk-list li:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.civicone .civicone-related-content .govuk-link {
    color: #1d70b8;
    text-decoration: underline;
    font-size: var(--font-size-base);
}

.civicone .civicone-related-content .govuk-link:hover {
    color: #003078;
}

.civicone .civicone-related-content .govuk-link:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    background: #ffdd00;
    color: #0b0c0c;
}

/* =============================================================================
   RESPONSIVE ADJUSTMENTS
   ============================================================================= */

@media (max-width: 768px) {
    .civicone .civic-post-card,
    .civicone .civic-composer {
        padding: var(--space-4);
        margin-bottom: var(--space-5);
    }

    .civicone .civic-post-actions {
        gap: var(--space-3);
    }

    .civicone .civic-action-btn {
        padding: var(--space-2) var(--space-3);
        font-size: var(--font-size-sm);
    }

    .civicone .civic-comment {
        gap: var(--space-2);
    }

    .civicone .civic-comment-avatar {
        width: var(--space-8);
        height: var(--space-8);
    }

    .civicone .civic-reply-form {
        margin-left: var(--space-10);
    }

    .civicone .civic-toast {
        min-width: 280px;
        max-width: calc(100% - var(--space-10));
        bottom: var(--space-20); /* Above mobile nav */
    }

    .civicone .civicone-related-content {
        margin-top: var(--space-5);
    }
}

/* =============================================================================
   ACCESSIBILITY ENHANCEMENTS
   ============================================================================= */

/* Screen reader only text */
.civicone .govuk-visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    clip: rect(0 0 0 0) !important;
    clip-path: inset(50%) !important;
    border: 0 !important;
    white-space: nowrap !important;
}

/* Skip to main content link */
.civicone .govuk-skip-link:focus {
    outline: 3px solid #ffdd00;
    outline-offset: 0;
    background: #ffdd00;
    color: #0b0c0c;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .civicone .civic-post-card,
    .civicone .civic-composer,
    .civicone .civicone-related-content {
        border-width: 3px;
    }

    .civicone .civic-action-btn,
    .civicone .civic-comment-submit {
        border-width: 3px;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .civicone .civic-toast.visible {
        animation: none;
    }

    .civicone .civic-action-btn:active {
        transform: none;
    }

    .civicone .civic-comment-submit:active {
        transform: none;
    }
}
