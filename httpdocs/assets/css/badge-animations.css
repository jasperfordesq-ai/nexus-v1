/**
 * Badge/Counter Animations
 * Pop effect when count changes, pulse for attention
 * Version: 1.0 - 2026-01-19
 *
 * Features:
 * - Pop/bounce animation on count change
 * - Pulse animation for new items
 * - Count up/down transitions
 * - Multiple badge styles
 * - Dark mode support
 */

/* ==========================================================================
   Animations
   ========================================================================== */

@keyframes badge-pop {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.3);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes badge-bounce {
    0%, 100% {
        transform: scale(1);
    }
    25% {
        transform: scale(1.2);
    }
    50% {
        transform: scale(0.9);
    }
    75% {
        transform: scale(1.1);
    }
}

@keyframes badge-pulse {
    0% {
        box-shadow: 0 0 0 0 currentColor;
        opacity: 1;
    }
    70% {
        box-shadow: 0 0 0 10px transparent;
        opacity: 0.7;
    }
    100% {
        box-shadow: 0 0 0 0 transparent;
        opacity: 1;
    }
}

@keyframes badge-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-3px) rotate(-5deg); }
    50% { transform: translateX(3px) rotate(5deg); }
    75% { transform: translateX(-3px) rotate(-5deg); }
}

@keyframes badge-fade-in {
    from {
        opacity: 0;
        transform: scale(0);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes badge-count-up {
    0% {
        transform: translateY(100%);
        opacity: 0;
    }
    100% {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes badge-count-down {
    0% {
        transform: translateY(-100%);
        opacity: 0;
    }
    100% {
        transform: translateY(0);
        opacity: 1;
    }
}

/* ==========================================================================
   Base Badge Styles
   ========================================================================== */

.badge,
.counter,
.notification-badge,
.unread-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 12px;
    line-height: 1;
    border-radius: 9999px;
    transition:
        transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1),
        background-color 0.2s ease,
        color 0.2s ease;
}

/* ==========================================================================
   Animation Trigger Classes
   ========================================================================== */

/* Pop animation on update */
.badge-pop,
.badge.pop,
[data-badge-animate="pop"] {
    animation: badge-pop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Bounce animation */
.badge-bounce,
.badge.bounce,
[data-badge-animate="bounce"] {
    animation: badge-bounce 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Pulse for attention */
.badge-pulse,
.badge.pulse,
[data-badge-animate="pulse"] {
    animation: badge-pulse 1.5s ease-out infinite;
}

/* Shake for urgent */
.badge-shake,
.badge.shake,
[data-badge-animate="shake"] {
    animation: badge-shake 0.4s ease-out;
}

/* Fade in on appear */
.badge-fade-in,
.badge.fade-in,
[data-badge-animate="fade-in"] {
    animation: badge-fade-in 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ==========================================================================
   Counter with Slot Machine Effect
   ========================================================================== */

.counter-slot {
    position: relative;
    overflow: hidden;
    display: inline-flex;
    height: 1.2em;
}

.counter-slot-digit {
    display: inline-block;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Count up animation */
.counter-slot-digit.count-up {
    animation: badge-count-up 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Count down animation */
.counter-slot-digit.count-down {
    animation: badge-count-down 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ==========================================================================
   Badge Sizes
   ========================================================================== */

/* Dot (no text) */
.badge--dot,
.badge-dot {
    width: 8px;
    height: 8px;
    min-width: 8px;
    padding: 0;
    font-size: 0;
}

/* Small */
.badge--sm,
.badge-sm {
    min-width: 16px;
    height: 16px;
    padding: 0 4px;
    font-size: 10px;
}

/* Medium (default) */
.badge,
.badge--md,
.badge-md {
    min-width: 20px;
    height: 20px;
    padding: 0 6px;
    font-size: 12px;
}

/* Large */
.badge--lg,
.badge-lg {
    min-width: 24px;
    height: 24px;
    padding: 0 8px;
    font-size: 14px;
}

/* ==========================================================================
   Badge Colors
   ========================================================================== */

/* Primary (default) */
.badge,
.badge--primary {
    background: #6366f1;
    color: white;
}

/* Secondary */
.badge--secondary {
    background: #64748b;
    color: white;
}

/* Success */
.badge--success {
    background: #22c55e;
    color: white;
}

/* Danger/Error */
.badge--danger,
.badge--error {
    background: #ef4444;
    color: white;
}

/* Warning */
.badge--warning {
    background: #f59e0b;
    color: white;
}

/* Info */
.badge--info {
    background: #3b82f6;
    color: white;
}

/* Outline variants */
.badge--outline {
    background: transparent;
    border: 1.5px solid currentColor;
}

.badge--outline.badge--primary { color: #6366f1; }
.badge--outline.badge--success { color: #22c55e; }
.badge--outline.badge--danger { color: #ef4444; }
.badge--outline.badge--warning { color: #f59e0b; }
.badge--outline.badge--info { color: #3b82f6; }

/* Soft/muted variants */
.badge--soft {
    background: rgba(99, 102, 241, 0.1);
    color: #6366f1;
}

.badge--soft.badge--success {
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
}

.badge--soft.badge--danger {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}

/* ==========================================================================
   Positioned Badges (on icons/avatars)
   ========================================================================== */

.badge-container {
    position: relative;
    display: inline-flex;
}

.badge-container .badge,
.badge-positioned {
    position: absolute;
}

/* Top right (default) */
.badge-container .badge,
.badge--top-right {
    top: -4px;
    right: -4px;
}

/* Top left */
.badge--top-left {
    top: -4px;
    left: -4px;
    right: auto;
}

/* Bottom right */
.badge--bottom-right {
    bottom: -4px;
    right: -4px;
    top: auto;
}

/* Bottom left */
.badge--bottom-left {
    bottom: -4px;
    left: -4px;
    top: auto;
    right: auto;
}

/* Border around badge */
.badge-container .badge {
    border: 2px solid white;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* ==========================================================================
   Status Indicators
   ========================================================================== */

.status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
}

.status-dot--online {
    background: #22c55e;
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
}

.status-dot--offline {
    background: #6b7280;
}

.status-dot--busy {
    background: #ef4444;
    box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
}

.status-dot--away {
    background: #f59e0b;
    box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.2);
}

/* Pulsing online status */
.status-dot--online.pulse {
    animation: badge-pulse 2s ease-out infinite;
}

/* ==========================================================================
   Notification Badges
   ========================================================================== */

.notification-badge {
    background: #ef4444;
    color: white;
    min-width: 18px;
    height: 18px;
    padding: 0 5px;
    font-size: 11px;
}

/* Zero state - hidden */
.notification-badge:empty,
.notification-badge[data-count="0"],
.badge:empty {
    display: none;
}

/* 99+ overflow */
.notification-badge--overflow::after {
    content: '+';
}

/* ==========================================================================
   Progress Badge
   ========================================================================== */

.badge-progress {
    position: relative;
    background: rgba(99, 102, 241, 0.2);
    overflow: hidden;
}

.badge-progress::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: var(--progress, 0%);
    background: #6366f1;
    transition: width 0.3s ease;
    z-index: 0;
}

.badge-progress span {
    position: relative;
    z-index: 1;
}

/* ==========================================================================
   Dark Mode
   ========================================================================== */

[data-theme="dark"] .badge-container .badge {
    border-color: #1f2937;
}

[data-theme="dark"] .badge--soft {
    background: rgba(99, 102, 241, 0.2);
    color: #a5b4fc;
}

[data-theme="dark"] .badge--soft.badge--success {
    background: rgba(34, 197, 94, 0.2);
    color: #86efac;
}

[data-theme="dark"] .badge--soft.badge--danger {
    background: rgba(239, 68, 68, 0.2);
    color: #fca5a5;
}

[data-theme="dark"] .badge--outline.badge--primary { color: #a5b4fc; }
[data-theme="dark"] .badge--outline.badge--success { color: #86efac; }
[data-theme="dark"] .badge--outline.badge--danger { color: #fca5a5; }

[data-theme="dark"] .status-dot--online {
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3);
}

[data-theme="dark"] .status-dot--busy {
    box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.3);
}

/* ==========================================================================
   Reduced Motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
    .badge-pop,
    .badge.pop,
    .badge-bounce,
    .badge.bounce,
    .badge-shake,
    .badge.shake,
    .badge-fade-in,
    .badge.fade-in,
    .counter-slot-digit.count-up,
    .counter-slot-digit.count-down {
        animation: none;
    }

    .badge-pulse,
    .badge.pulse,
    .status-dot--online.pulse {
        animation: none;
    }
}

/* ==========================================================================
   Print - Hide badges
   ========================================================================== */

@media print {
    .badge--dot,
    .notification-badge,
    .status-dot {
        display: none !important;
    }
}
