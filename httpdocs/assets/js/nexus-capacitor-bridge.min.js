!function(){"use strict";const t={isCapacitor:()=>"undefined"!=typeof Capacitor&&Capacitor.isNativePlatform(),isIOS:()=>/iPad|iPhone|iPod/.test(navigator.userAgent),isAndroid:()=>/Android/.test(navigator.userAgent),isPWA:()=>window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,isMobile:()=>window.matchMedia("(max-width: 768px)").matches,getPlatform(){return this.isCapacitor()?Capacitor.getPlatform():this.isIOS()?"ios-web":this.isAndroid()?"android-web":"web"}},a={async impact(a="medium"){if(t.isCapacitor()&&window.Capacitor?.Plugins?.Haptics){const{Haptics:t,ImpactStyle:i}=window.Capacitor.Plugins,e={light:i?.Light||"LIGHT",medium:i?.Medium||"MEDIUM",heavy:i?.Heavy||"HEAVY"};try{return await t.impact({style:e[a]}),!0}catch(t){console.warn("Native haptics failed:",t)}}if("vibrate"in navigator)try{const t={light:10,medium:20,heavy:40};return navigator.vibrate(t[a]||20),!0}catch(t){return!1}return!1},async notification(a="success"){if(t.isCapacitor()&&window.Capacitor?.Plugins?.Haptics){const{Haptics:t,NotificationType:i}=window.Capacitor.Plugins,e={success:i?.Success||"SUCCESS",warning:i?.Warning||"WARNING",error:i?.Error||"ERROR"};try{return await t.notification({type:e[a]}),!0}catch(t){console.warn("Native notification haptics failed:",t)}}if("vibrate"in navigator){const t={success:[10,50,20,50,30],warning:[30,50,30],error:[50,30,50,30,50]};return navigator.vibrate(t[a]||t.success),!0}return!1},async selection(){if(t.isCapacitor()&&window.Capacitor?.Plugins?.Haptics)try{return await window.Capacitor.Plugins.Haptics.selectionStart(),await window.Capacitor.Plugins.Haptics.selectionChanged(),await window.Capacitor.Plugins.Haptics.selectionEnd(),!0}catch(t){}return"vibrate"in navigator&&(navigator.vibrate(5),!0)},async vibrate(a){if(t.isCapacitor()&&window.Capacitor?.Plugins?.Haptics)try{if(Array.isArray(a))for(let t=0;t<a.length;t++)t%2==0&&await window.Capacitor.Plugins.Haptics.impact({style:a[t]>30?"HEAVY":"MEDIUM"}),await new Promise(i=>setTimeout(i,a[t]));else await window.Capacitor.Plugins.Haptics.vibrate({duration:a});return!0}catch(t){}return"vibrate"in navigator&&(navigator.vibrate(a),!0)}},i={async setStyle(a="dark"){if(!t.isCapacitor()||!window.Capacitor?.Plugins?.StatusBar)return!1;try{const{StatusBar:t,Style:i}=window.Capacitor.Plugins;return await t.setStyle({style:"light"===a?i.Light:i.Dark}),!0}catch(t){return!1}},async setBackgroundColor(a){if(!t.isCapacitor()||!window.Capacitor?.Plugins?.StatusBar){const t=document.querySelector('meta[name="theme-color"]');return t&&t.setAttribute("content",a),!0}try{return await window.Capacitor.Plugins.StatusBar.setBackgroundColor({color:a}),!0}catch(t){return!1}},async hide(){if(!t.isCapacitor()||!window.Capacitor?.Plugins?.StatusBar)return!1;try{return await window.Capacitor.Plugins.StatusBar.hide(),!0}catch(t){return!1}},async show(){if(!t.isCapacitor()||!window.Capacitor?.Plugins?.StatusBar)return!1;try{return await window.Capacitor.Plugins.StatusBar.show(),!0}catch(t){return!1}}},e={async hide(){if(t.isCapacitor()&&window.Capacitor?.Plugins?.Keyboard)try{return await window.Capacitor.Plugins.Keyboard.hide(),!0}catch(t){}return!(!document.activeElement||!document.activeElement.blur)&&(document.activeElement.blur(),!0)},async show(){if(t.isCapacitor()&&window.Capacitor?.Plugins?.Keyboard)try{return await window.Capacitor.Plugins.Keyboard.show(),!0}catch(t){return!1}return!1}},r={async share(a={}){const{title:i,text:e,url:r,files:n}=a;if(t.isCapacitor()&&window.Capacitor?.Plugins?.Share)try{return await window.Capacitor.Plugins.Share.share({title:i,text:e,url:r,dialogTitle:i}),{success:!0,method:"native"}}catch(t){"Share canceled"!==t.message&&console.warn("Native share failed:",t)}if(navigator.share)try{const t={title:i,text:e,url:r};return n&&navigator.canShare&&navigator.canShare({files:n})&&(t.files=n),await navigator.share(t),{success:!0,method:"web-share"}}catch(t){"AbortError"!==t.name&&console.warn("Web share failed:",t)}return{success:!1,method:"fallback",data:a}},canShare:()=>t.isCapacitor()||!!navigator.share},n={async hide(a={}){if(!t.isCapacitor()||!window.Capacitor?.Plugins?.SplashScreen)return!1;try{return await window.Capacitor.Plugins.SplashScreen.hide({fadeOutDuration:a.fadeOutDuration||300}),!0}catch(t){return!1}}};function o(){if(console.log("[NEXUS] Platform:",t.getPlatform()),console.log("[NEXUS] Capacitor:",t.isCapacitor()),console.log("[NEXUS] PWA:",t.isPWA()),window.NexusNativeNav&&window.NexusNativeNav.Haptics&&(window.NexusNativeNav.Haptics={light:()=>a.impact("light"),medium:()=>a.impact("medium"),heavy:()=>a.impact("heavy"),selection:()=>a.selection(),success:()=>a.notification("success")}),window.Nexus10x&&window.Nexus10x.Haptics&&(window.Nexus10x.Haptics={light:()=>a.impact("light"),medium:()=>a.impact("medium"),heavy:()=>a.impact("heavy"),selection:()=>a.selection(),success:()=>a.notification("success"),error:()=>a.notification("error")}),t.isCapacitor()){document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>n.hide(),300)});const t=document.documentElement.getAttribute("data-theme");i.setStyle("dark"===t?"light":"dark"),i.setBackgroundColor("dark"===t?"#0f172a":"#ffffff")}document.body.classList.add(`platform-${t.getPlatform()}`),t.isPWA()&&document.body.classList.add("is-pwa"),t.isCapacitor()&&document.body.classList.add("is-native")}window.NexusNative={Environment:t,Haptics:a,StatusBar:i,Keyboard:e,Share:r,Splash:n,init:o},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();