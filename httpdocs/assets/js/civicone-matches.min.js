!function(){"use strict";const e=window.NEXUS_BASE_PATH||"";function t(t,n,c,i){fetch(e+"/matches/interact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listing_id:t,action:n,match_score:c,distance:i})}).catch(console.error)}function n(){var e,n,c,i;!function(){const e=document.querySelectorAll(".match-tab");e.forEach(t=>{t.addEventListener("click",function(){const t=this.dataset.tab;e.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-selected","false")}),this.classList.add("active"),this.setAttribute("aria-selected","true"),document.querySelectorAll(".match-section").forEach(e=>{e.classList.remove("active"),e.hidden=!0});const n=document.getElementById("section-"+t);n&&(n.classList.add("active"),n.hidden=!1)}),t.addEventListener("keydown",function(t){const n=Array.from(e),c=n.indexOf(this);let i;if("ArrowRight"===t.key)i=(c+1)%n.length;else if("ArrowLeft"===t.key)i=(c-1+n.length)%n.length;else if("Home"===t.key)i=0;else{if("End"!==t.key)return;i=n.length-1}t.preventDefault(),n[i].focus(),n[i].click()})})}(),function(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target,c=n.dataset.listingId,i=n.dataset.matchScore,a=n.dataset.distance;c&&!n.dataset.viewed&&(t(c,"viewed",i,a),n.dataset.viewed="true")}})},{threshold:.5});document.querySelectorAll(".match-card").forEach(t=>{e.observe(t)})}(),e=document.getElementById("distance-slider"),n=document.getElementById("distance-value"),c=document.getElementById("score-slider"),i=document.getElementById("score-value"),e&&n&&e.addEventListener("input",function(){n.textContent=this.value+" km"}),c&&i&&c.addEventListener("input",function(){i.textContent=this.value+"%"})}window.trackMatchInteraction=t,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();