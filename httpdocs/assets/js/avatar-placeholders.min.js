!function(){"use strict";const a={autoInit:!0,fadeInDuration:300,showInitialsOnError:!0,placeholderClass:"avatar-placeholder",loadedClass:"loaded",errorClass:"avatar-error",selectors:["img[data-avatar]","img[data-placeholder]",".avatar img",".user-avatar img",".profile-avatar img",".member-avatar img"]};function e(a){let e=0;for(let t=0;t<a.length;t++)e=a.charCodeAt(t)+((e<<5)-e);return Math.abs(e)%8+1}function t(a){if(!a)return"?";const e=a.trim().split(/\s+/);return 1===e.length?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()}function r(a,r="md"){const s=t(a),l=e(a||""),o=document.createElement("div");return o.className=`avatar-initials avatar-initials--${r}`,o.setAttribute("data-color",l),o.setAttribute("aria-label",a||"User"),o.textContent=s,o}function s(e){const t=e.closest(`.${a.placeholderClass}, .image-placeholder`);e.classList.add(a.loadedClass),t&&t.classList.add(a.loadedClass);const r=e.closest(".loading");r&&r.classList.remove("loading")}function l(e){e.dataset.placeholderInit||(e.dataset.placeholderInit="true",e.complete&&e.naturalWidth>0?s(e):(!function(e){if(e.parentElement?.classList.contains(a.placeholderClass))return e.parentElement;const t=e.hasAttribute("data-avatar")||e.closest(".avatar, .user-avatar, .profile-avatar"),r=e.dataset.size||"md",s=document.createElement("div");s.className=t?`avatar-placeholder avatar-placeholder--${r}`:"image-placeholder",e.width&&(s.style.width=`${e.width}px`),e.height&&(s.style.height=`${e.height}px`),e.parentNode.insertBefore(s,e),s.appendChild(e)}(e),e.addEventListener("load",()=>s(e),{once:!0}),e.addEventListener("error",()=>function(e){const t=e.closest(`.${a.placeholderClass}, .image-placeholder`),s=e.alt||e.dataset.name||"";if(t&&(t.classList.add(a.errorClass),t.classList.remove(a.placeholderClass)),a.showInitialsOnError&&(e.hasAttribute("data-avatar")||e.closest(".avatar, .user-avatar, .profile-avatar"))){const a=r(s,e.dataset.size||"md");t?(t.innerHTML="",t.className="",t.appendChild(a)):e.parentNode.replaceChild(a,e)}}(e),{once:!0})))}function o(){if(!a.autoInit)return;const e=a.selectors.join(", "),t=document.querySelectorAll(e);t.forEach(l);new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{1===t.nodeType&&("IMG"===t.tagName&&a.selectors.some(a=>t.matches(a))&&l(t),t.querySelectorAll&&t.querySelectorAll(e).forEach(l))})})}).observe(document.body,{childList:!0,subtree:!0}),console.warn(`[AvatarPlaceholder] Initialized ${t.length} images`)}window.AvatarPlaceholder={init:o,setup:l,load:function(e,t){e.classList.remove(a.loadedClass);const r=e.closest(`.${a.placeholderClass}, .image-placeholder`);r&&r.classList.remove(a.loadedClass,a.errorClass),delete e.dataset.placeholderInit,t&&(e.src=t),l(e)},initials:r,placeholder:function(a="avatar",e="md"){const t=document.createElement("div");return"avatar"===a?t.className=`avatar-placeholder avatar-placeholder--${e}`:"image"===a?t.className="image-placeholder":"text"===a?t.className=`skeleton-text skeleton-text--${e}`:"button"===a&&(t.className="skeleton-button"),t},avatarGroup:function(a,e=4,t="sm"){const s=document.createElement("div");s.className="avatar-group";const o=a.slice(0,e),n=a.length-e;if(o.forEach(a=>{if(a.avatar){const e=document.createElement("img");e.src=a.avatar,e.alt=a.name,e.className=`avatar-placeholder avatar-placeholder--${t}`,e.dataset.avatar="true",e.dataset.size=t,e.dataset.name=a.name,s.appendChild(e),l(e)}else s.appendChild(r(a.name,t))}),n>0){const a=document.createElement("div");a.className=`avatar-group-more avatar-placeholder--${t}`,a.textContent=`+${n}`,s.appendChild(a)}return s},getInitials:t,getColorFromString:e,config:e=>Object.assign(a,e)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):setTimeout(o,50)}();