!function(){"use strict";const e={autoInit:!0,fadeInDuration:300,showInitialsOnError:!0,placeholderClass:"avatar-placeholder",loadedClass:"loaded",errorClass:"avatar-error",selectors:["img[data-avatar]","img[data-placeholder]",".avatar img",".user-avatar img",".profile-avatar img",".member-avatar img"]};function a(e){let a=0;for(let t=0;t<e.length;t++)a=e.charCodeAt(t)+((a<<5)-a);return Math.abs(a)%8+1}function t(e){if(!e)return"?";const a=e.trim().split(/\s+/);return 1===a.length?a[0].charAt(0).toUpperCase():(a[0].charAt(0)+a[a.length-1].charAt(0)).toUpperCase()}function r(e,r="md"){const s=t(e),l=a(e||""),o=document.createElement("div");return o.className=`avatar-initials avatar-initials--${r}`,o.setAttribute("data-color",l),o.setAttribute("aria-label",e||"User"),o.textContent=s,o}function s(a){const t=a.closest(`.${e.placeholderClass}, .image-placeholder`);a.classList.add(e.loadedClass),t&&t.classList.add(e.loadedClass);const r=a.closest(".loading");r&&r.classList.remove("loading")}function l(a){a.dataset.placeholderInit||(a.dataset.placeholderInit="true",a.complete&&a.naturalWidth>0?s(a):(!function(a){if(a.parentElement?.classList.contains(e.placeholderClass))return a.parentElement;const t=a.hasAttribute("data-avatar")||a.closest(".avatar, .user-avatar, .profile-avatar"),r=a.dataset.size||"md",s=document.createElement("div");s.className=t?`avatar-placeholder avatar-placeholder--${r}`:"image-placeholder",a.width&&(s.style.width=`${a.width}px`),a.height&&(s.style.height=`${a.height}px`),a.parentNode.insertBefore(s,a),s.appendChild(a)}(a),a.addEventListener("load",()=>s(a),{once:!0}),a.addEventListener("error",()=>function(a){const t=a.closest(`.${e.placeholderClass}, .image-placeholder`),s=a.alt||a.dataset.name||"";if(t&&(t.classList.add(e.errorClass),t.classList.remove(e.placeholderClass)),e.showInitialsOnError&&(a.hasAttribute("data-avatar")||a.closest(".avatar, .user-avatar, .profile-avatar"))){const e=r(s,a.dataset.size||"md");t?(t.innerHTML="",t.className="",t.appendChild(e)):a.parentNode.replaceChild(e,a)}}(a),{once:!0})))}function o(){if(!e.autoInit)return;const a=e.selectors.join(", "),t=document.querySelectorAll(a);t.forEach(l);new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{1===t.nodeType&&("IMG"===t.tagName&&e.selectors.some(e=>t.matches(e))&&l(t),t.querySelectorAll&&t.querySelectorAll(a).forEach(l))})})}).observe(document.body,{childList:!0,subtree:!0}),console.log(`[AvatarPlaceholder] Initialized ${t.length} images`)}window.AvatarPlaceholder={init:o,setup:l,load:function(a,t){a.classList.remove(e.loadedClass);const r=a.closest(`.${e.placeholderClass}, .image-placeholder`);r&&r.classList.remove(e.loadedClass,e.errorClass),delete a.dataset.placeholderInit,t&&(a.src=t),l(a)},initials:r,placeholder:function(e="avatar",a="md"){const t=document.createElement("div");return"avatar"===e?t.className=`avatar-placeholder avatar-placeholder--${a}`:"image"===e?t.className="image-placeholder":"text"===e?t.className=`skeleton-text skeleton-text--${a}`:"button"===e&&(t.className="skeleton-button"),t},avatarGroup:function(e,a=4,t="sm"){const s=document.createElement("div");s.className="avatar-group";const o=e.slice(0,a),n=e.length-a;if(o.forEach(e=>{if(e.avatar){const a=document.createElement("img");a.src=e.avatar,a.alt=e.name,a.className=`avatar-placeholder avatar-placeholder--${t}`,a.dataset.avatar="true",a.dataset.size=t,a.dataset.name=e.name,s.appendChild(a),l(a)}else s.appendChild(r(e.name,t))}),n>0){const e=document.createElement("div");e.className=`avatar-group-more avatar-placeholder--${t}`,e.textContent=`+${n}`,s.appendChild(e)}return s},getInitials:t,getColorFromString:a,config:a=>Object.assign(e,a)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):setTimeout(o,50)}();