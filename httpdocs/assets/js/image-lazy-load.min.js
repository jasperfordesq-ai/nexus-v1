!function(){"use strict";const e="50px 0px",a=.01,t=2,s=1e3,o=new WeakSet;function r(){if(!("IntersectionObserver"in window))return void i();const t=new IntersectionObserver(d,{rootMargin:e,threshold:a});var s;l(t),s=t,new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&(e.matches&&e.matches("[data-src], [data-lazy-src], .lazy-bg[data-bg-src]")&&s.observe(e),e.querySelectorAll&&e.querySelectorAll("[data-src], [data-lazy-src], .lazy-bg[data-bg-src]").forEach(e=>{o.has(e)||s.observe(e)}))})})}).observe(document.body,{childList:!0,subtree:!0}),document.querySelectorAll('img[loading="lazy"]').forEach(e=>{e.complete?e.classList.add("loaded"):e.addEventListener("load",function(){this.classList.add("loaded")},{once:!0})})}function d(e,a){e.forEach(e=>{if(e.isIntersecting){const t=e.target;a.unobserve(t),"IMG"===t.tagName?n(t):t.classList.contains("lazy-bg")&&c(t)}})}function n(e,a=0){if(o.has(e))return;const r=e.dataset.src||e.dataset.lazySrc;if(!r)return;e.classList.add("loading"),e.classList.remove("loaded","error");const d=e.closest(".lazy-image-container, .lazy-avatar-container, .lazy-card-image, .lazy-gallery-item");d&&d.classList.add("has-placeholder");const c=new Image;c.onload=function(){e.src=r,e.removeAttribute("data-src"),e.removeAttribute("data-lazy-src"),e.offsetWidth,e.classList.remove("loading"),e.classList.add("loaded"),o.add(e),d&&d.classList.add("loaded"),e.dispatchEvent(new CustomEvent("lazyloaded",{bubbles:!0}))},c.onerror=function(){a<t?setTimeout(()=>{n(e,a+1)},s):(e.classList.remove("loading"),e.classList.add("error"),e.dataset.fallback&&(e.src=e.dataset.fallback),e.dispatchEvent(new CustomEvent("lazyerror",{bubbles:!0})))},c.src=r}function c(e,a=0){if(o.has(e))return;const r=e.dataset.bgSrc||e.dataset.src;if(!r)return;e.classList.add("loading");const d=new Image;d.onload=function(){e.style.backgroundImage=`url('${r}')`,e.removeAttribute("data-bg-src"),e.removeAttribute("data-src"),e.offsetWidth,e.classList.remove("loading"),e.classList.add("loaded"),o.add(e),e.dispatchEvent(new CustomEvent("lazyloaded",{bubbles:!0}))},d.onerror=function(){a<t?setTimeout(()=>{c(e,a+1)},s):(e.classList.remove("loading"),e.classList.add("error"))},d.src=r}function l(e){document.querySelectorAll("[data-src]:not(.loaded), [data-lazy-src]:not(.loaded)").forEach(a=>{o.has(a)||e.observe(a)}),document.querySelectorAll(".lazy-bg[data-bg-src]:not(.loaded)").forEach(a=>{o.has(a)||e.observe(a)})}function i(){document.querySelectorAll("[data-src], [data-lazy-src]").forEach(e=>{n(e)}),document.querySelectorAll(".lazy-bg[data-bg-src]").forEach(e=>{c(e)})}window.LazyLoad={load:function(e){"IMG"===e.tagName?n(e):e.classList.contains("lazy-bg")&&c(e)},refresh:function(){if("IntersectionObserver"in window){l(new IntersectionObserver(d,{rootMargin:e,threshold:a}))}else i()},isLoaded:function(e){return o.has(e)||e.classList.contains("loaded")}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r(),window.addEventListener("pageshow",function(e){e.persisted&&window.LazyLoad.refresh()})}();