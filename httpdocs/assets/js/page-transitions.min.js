!function(){"use strict";const e={transitionDuration:200,prefetchOnHover:!0,prefetchDelay:100,showSpinnerAfter:500,excludeSelectors:["[data-no-transition]",'[target="_blank"]',"[download]",'[href^="#"]','[href^="mailto:"]','[href^="tel:"]','[href^="javascript:"]',".no-transition",'[data-turbo="false"]']},t=[];let n=-1,i=!1;const a=new Set;let o=null,r=null,s=null;const c=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function d(){c?console.log("[PageTransitions] Disabled - user prefers reduced motion"):(o=document.createElement("div"),o.className="page-loading-bar",o.setAttribute("role","progressbar"),o.setAttribute("aria-label","Page loading"),document.body.appendChild(o),r=document.createElement("div"),r.className="page-loading-overlay",r.innerHTML='<div class="page-loading-spinner"></div>',document.body.appendChild(r),t.push(window.location.href),n=0,document.addEventListener("click",u,!0),window.addEventListener("popstate",m),e.prefetchOnHover&&document.addEventListener("mouseover",p,{passive:!0}),requestAnimationFrame(()=>{document.documentElement.classList.add("page-entering"),setTimeout(()=>{document.documentElement.classList.remove("page-entering")},e.transitionDuration+100)}),console.log("[PageTransitions] Initialized"))}function l(t){if(!t||"A"!==t.tagName)return!1;const n=t.getAttribute("href");if(!n)return!1;for(const n of e.excludeSelectors)if(t.matches(n))return!1;try{if(new URL(n,window.location.origin).origin!==window.location.origin)return!1}catch(e){return!1}return!0}function u(e){const t=e.target.closest("a");if(!l(t))return;if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;e.preventDefault();const n=t.getAttribute("href"),i=new URL(n,window.location.origin);if(i.href===window.location.href)return;f(i.href,"forward")}function m(a){if(i)return;const o=window.location.href,r=n,s=t.indexOf(o);let c="forward";-1!==s&&s<r&&(c="back"),-1!==s&&(n=s),g(c),setTimeout(()=>{!function(t){const n=document.documentElement;n.classList.remove("page-transitioning"),n.classList.add("page-entering"),n.classList.add("back"===t?"nav-back":"nav-forward"),setTimeout(()=>{n.classList.remove("page-entering","nav-forward","nav-back"),w(),i=!1},e.transitionDuration+50)}(c)},e.transitionDuration)}async function f(a,d="forward"){if(!i){if(i=!0,document.startViewTransition&&!c)try{const e=document.startViewTransition(async()=>{await async function(e){const i=await fetch(e),a=await i.text(),o=(new DOMParser).parseFromString(a,"text/html"),r=o.querySelector("main, #main-content"),s=document.querySelector("main, #main-content");r&&s&&(s.innerHTML=r.innerHTML);document.title=o.title,history.pushState({},"",e),t.push(e),n=t.length-1}(a)});return await e.finished,void(i=!1)}catch(e){console.log("[PageTransitions] View Transitions failed, using fallback")}var l;!function(){if(!o)return;o.classList.remove("complete"),o.classList.add("active"),s=setTimeout(()=>{r&&r.classList.add("visible")},e.showSpinnerAfter)}(),g(d),await(l=e.transitionDuration,new Promise(e=>setTimeout(e,l)));try{t.push(a),n=t.length-1,window.location.href=a}catch(e){console.error("[PageTransitions] Navigation failed:",e),w(),i=!1,document.documentElement.classList.remove("page-transitioning","nav-forward","nav-back")}}}function g(e){const t=document.documentElement;t.classList.add("page-transitioning"),t.classList.add("back"===e?"nav-back":"nav-forward")}function w(){o&&(clearTimeout(s),o.classList.remove("active"),o.classList.add("complete"),r&&r.classList.remove("visible"),setTimeout(()=>{o.classList.remove("complete")},300))}let h=null;function p(t){const n=t.target.closest("a");if(!l(n))return;const i=n.getAttribute("href");a.has(i)||(clearTimeout(h),h=setTimeout(()=>{v(i),n.classList.add("prefetched")},e.prefetchDelay))}function v(e){if(a.has(e))return;const t=document.createElement("link");t.rel="prefetch",t.href=e,t.as="document",document.head.appendChild(t),a.add(e),console.log("[PageTransitions] Prefetched:",e)}window.PageTransitions={navigate:function(e,t="forward"){f(e,t)},prefetch:v,isTransitioning:function(){return i},navigateInstant:function(e){document.documentElement.classList.add("page-instant"),window.location.href=e},config:function(t){Object.assign(e,t)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d(),window.addEventListener("pageshow",function(t){t.persisted&&(document.documentElement.classList.add("page-entering"),setTimeout(()=>{document.documentElement.classList.remove("page-entering","nav-forward","nav-back")},e.transitionDuration+50))})}();