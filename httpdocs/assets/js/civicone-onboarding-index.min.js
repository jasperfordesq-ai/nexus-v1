function previewAvatar(e){if(e.files&&e.files[0]){const t=new FileReader;t.onload=function(e){document.getElementById("avatarPreview").innerHTML='<img src="'+e.target.result+'" alt="Avatar" id="avatarImg" loading="lazy">'},t.readAsDataURL(e.files[0])}}let isSubmitting=!1;document.getElementById("onboardingForm").addEventListener("submit",function(e){const t=document.getElementById("bio").value.trim();if(!t)return e.preventDefault(),alert("Please add a bio to help your neighbors get to know you."),document.getElementById("bio").focus(),!1;if(t.length<10)return e.preventDefault(),alert("Please write a bit more about yourself (at least 10 characters)."),document.getElementById("bio").focus(),!1;isSubmitting=!0;const n=document.getElementById("submitBtn");n.disabled=!0,n.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i> Setting up your profile...'}),window.addEventListener("beforeunload",function(e){if(!isSubmitting)return e.preventDefault(),e.returnValue="Are you sure you want to leave? You must complete your profile to access the platform.",e.returnValue}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(e.preventDefault(),alert("Please complete your profile to continue. You cannot skip this step."))}),history.pushState(null,"",location.href),window.addEventListener("popstate",function(){history.pushState(null,"",location.href),alert("Please complete your profile to continue. You cannot go back.")});