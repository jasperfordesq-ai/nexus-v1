!function(){"use strict";const e={isOpen:!1,scrollPosition:0,touchStartX:0,touchStartY:0};let t={};function n(){t={toggle:document.getElementById("civic-menu-toggle"),nav:document.getElementById("civic-main-nav"),backdrop:document.getElementById("civic-drawer-backdrop"),closeBtn:document.getElementById("civic-drawer-close"),focusTrap:document.querySelector(".civic-drawer-focus-trap"),body:document.body},t.toggle&&t.nav&&(t.toggle.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.isOpen?a():function(){if(!e.isOpen){var n=document.getElementById("civic-mobile-search-bar"),a=document.getElementById("civic-mobile-search-toggle");n&&n.classList.contains("active")&&(n.classList.remove("active"),a&&a.setAttribute("aria-expanded","false")),e.scrollPosition=window.scrollY,e.isOpen=!0,t.toggle.setAttribute("aria-expanded","true"),t.nav.setAttribute("aria-hidden","false"),t.backdrop&&t.backdrop.setAttribute("aria-hidden","false"),t.nav.classList.add("active"),t.backdrop&&t.backdrop.classList.add("active"),t.body.classList.add("drawer-open"),t.body.style.top=`-${e.scrollPosition}px`,requestAnimationFrame(()=>{const e=t.closeBtn||t.nav.querySelector("a, button");e&&e.focus()}),o("light"),c("Navigation menu opened")}}()}),function(){if(!t.closeBtn)return;t.closeBtn.addEventListener("click",function(e){e.preventDefault(),a()})}(),function(){if(!t.backdrop)return;t.backdrop.addEventListener("click",function(e){e.preventDefault(),a()}),t.backdrop.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1})}(),document.addEventListener("keydown",function(t){if(e.isOpen)switch(t.key){case"Escape":t.preventDefault(),a();break;case"Tab":!function(e){const t=i(),n=t[0],a=t[t.length-1];e.shiftKey?document.activeElement===n&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),n.focus())}(t)}}),t.nav.addEventListener("keydown",function(t){if(!e.isOpen)return;const n=i(),a=Array.from(n).indexOf(document.activeElement);switch(t.key){case"ArrowDown":t.preventDefault(),a<n.length-1?n[a+1].focus():n[0].focus();break;case"ArrowUp":t.preventDefault(),a>0?n[a-1].focus():n[n.length-1].focus();break;case"Home":t.preventDefault(),n[0].focus();break;case"End":t.preventDefault(),n[n.length-1].focus()}}),function(){if(!("ontouchstart"in window))return;const n=50,i=300;let o;t.nav.addEventListener("touchstart",function(t){const n=t.changedTouches[0];e.touchStartX=n.pageX,e.touchStartY=n.pageY,o=Date.now()},{passive:!0}),t.nav.addEventListener("touchend",function(t){const c=t.changedTouches[0],s=c.pageX-e.touchStartX,r=c.pageY-e.touchStartY;Date.now()-o<=i&&s>n&&Math.abs(r)<n&&a()},{passive:!0})}(),function(){if(!t.focusTrap)return;t.focusTrap.addEventListener("focus",function(){t.closeBtn&&t.closeBtn.focus()})}(),document.querySelectorAll(".civic-bottom-nav-item").forEach(e=>{e.addEventListener("touchstart",function(){this.classList.add("tap")},{passive:!0}),e.addEventListener("touchend",function(){this.classList.remove("tap"),this.classList.add("bounce","ripple"),o("light"),setTimeout(()=>{this.classList.remove("bounce","ripple")},500)},{passive:!0}),e.addEventListener("click",function(){"ontouchstart"in window||(this.classList.add("bounce","ripple"),setTimeout(()=>{this.classList.remove("bounce","ripple")},500))}),e.addEventListener("touchcancel",function(){this.classList.remove("tap")},{passive:!0})}))}function a(){e.isOpen&&(e.isOpen=!1,t.toggle.setAttribute("aria-expanded","false"),t.nav.setAttribute("aria-hidden","true"),t.backdrop&&t.backdrop.setAttribute("aria-hidden","true"),t.nav.classList.remove("active"),t.backdrop&&t.backdrop.classList.remove("active"),t.body.classList.remove("drawer-open"),t.body.style.top="",window.scrollTo(0,e.scrollPosition),t.toggle.focus(),o("light"),c("Navigation menu closed"))}function i(){return t.nav.querySelectorAll('a[href]:not([disabled]):not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), [tabindex]:not([tabindex="-1"]):not(.civic-drawer-focus-trap)')}function o(e="light"){if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&"vibrate"in navigator)switch(e){case"light":navigator.vibrate(10);break;case"medium":navigator.vibrate(20);break;case"heavy":navigator.vibrate([30,10,30])}}function c(e){let t=document.getElementById("civic-sr-announcer");t||(t=document.createElement("div"),t.id="civic-sr-announcer",t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.style.cssText="position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;",document.body.appendChild(t)),t.textContent="",requestAnimationFrame(()=>{t.textContent=e})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n(),document.addEventListener("turbo:load",n)}();