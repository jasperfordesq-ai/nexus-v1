!function(){"use strict";function t(){var t=document.getElementById("offlineBanner");function e(e){t.classList.toggle("govuk-!-display-none",!e),e&&navigator.vibrate&&navigator.vibrate(100)}t&&(window.addEventListener("online",function(){e(!1)}),window.addEventListener("offline",function(){e(!0)}),navigator.onLine||e(!0))}function e(){var t=document.getElementById("chat-messages");t&&(t.scrollTop=t.scrollHeight)}function i(){document.querySelectorAll(".govuk-notification-banner--success[data-auto-dismiss]").forEach(function(t){var e=parseInt(t.getAttribute("data-auto-dismiss"),10)||5e3;setTimeout(function(){t.classList.add("js-transition-opacity-slow","js-banner-fade-out"),setTimeout(function(){t.remove()},500)},e)})}function n(){document.querySelectorAll("[data-confirm-delete]").forEach(function(t){t.addEventListener("click",function(e){var i=t.getAttribute("data-confirm-delete")||"Are you sure you want to delete this?";confirm(i)||e.preventDefault()})})}function a(){document.querySelectorAll("textarea[maxlength]").forEach(function(t){var e=parseInt(t.getAttribute("maxlength"),10),i=t.id+"-counter",n=document.getElementById(i);function a(){var i=e-t.value.length;n.textContent=i+" characters remaining",n.classList.toggle("govuk-hint",i>20),n.classList.toggle("govuk-error-message",i<=20)}n&&(t.addEventListener("input",a),a())})}function o(){document.querySelectorAll('a[href^="#"]').forEach(function(t){t.addEventListener("click",function(t){var e=this.getAttribute("href");if(e.length>1){var i=document.querySelector(e);i&&(t.preventDefault(),i.scrollIntoView({behavior:"smooth",block:"start"}),i.focus())}})})}function r(){function t(t,e){var i=t.querySelectorAll(".govuk-tabs__tab"),n=t.querySelectorAll(".govuk-tabs__panel");i.forEach(function(t){var e=t.closest(".govuk-tabs__list-item");e&&e.classList.remove("govuk-tabs__list-item--selected"),t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1")}),n.forEach(function(t){t.classList.add("govuk-tabs__panel--hidden")});var a=e.closest(".govuk-tabs__list-item");a&&a.classList.add("govuk-tabs__list-item--selected"),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0");var o=e.getAttribute("href");if(o&&"#"===o.charAt(0)){var r=t.querySelector(o);r&&r.classList.remove("govuk-tabs__panel--hidden")}o&&history.pushState&&history.pushState(null,null,o)}document.querySelectorAll('[data-module="govuk-tabs"], .govuk-tabs').forEach(function(e){var i=e.querySelectorAll(".govuk-tabs__tab"),n=e.querySelectorAll(".govuk-tabs__panel");if(i.length&&n.length){var a=e.querySelector(".govuk-tabs__list");if(a&&a.setAttribute("role","tablist"),i.forEach(function(t,i){var n=t.getAttribute("href");if(n&&"#"===n.charAt(0)){var a=e.querySelector(n);if(a){t.setAttribute("role","tab"),t.setAttribute("aria-controls",n.substring(1)),t.setAttribute("tabindex",0===i?"0":"-1"),a.setAttribute("role","tabpanel"),a.setAttribute("aria-labelledby",t.id||"tab-"+n.substring(1)),t.id||(t.id="tab-"+n.substring(1));var o=t.closest(".govuk-tabs__list-item"),r=o&&o.classList.contains("govuk-tabs__list-item--selected");t.setAttribute("aria-selected",r?"true":"false"),r?a.classList.remove("govuk-tabs__panel--hidden"):a.classList.add("govuk-tabs__panel--hidden")}}}),i.forEach(function(n){n.addEventListener("click",function(i){i.preventDefault(),t(e,n)}),n.addEventListener("keydown",function(a){var o,r=Array.from(i),s=r.indexOf(n);switch(a.key){case"ArrowLeft":case"ArrowUp":a.preventDefault(),(o=s-1)<0&&(o=r.length-1),r[o].focus(),t(e,r[o]);break;case"ArrowRight":case"ArrowDown":a.preventDefault(),(o=s+1)>=r.length&&(o=0),r[o].focus(),t(e,r[o]);break;case"Home":a.preventDefault(),r[0].focus(),t(e,r[0]);break;case"End":a.preventDefault(),r[r.length-1].focus(),t(e,r[r.length-1])}})}),window.location.hash){var o=e.querySelector('.govuk-tabs__tab[href="'+window.location.hash+'"]');o&&t(e,o)}}})}function s(){var t=document.querySelectorAll(".govuk-tabs__tab[data-filter]");if(t.length){var e=document.querySelector("[data-filter-list]"),i=e?e.querySelectorAll("[data-type]"):document.querySelectorAll("#activity-list li[data-type]");t.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll(".govuk-tabs__list-item").forEach(function(t){t.classList.remove("govuk-tabs__list-item--selected")}),this.closest(".govuk-tabs__list-item").classList.add("govuk-tabs__list-item--selected"),t.forEach(function(t){t.setAttribute("aria-selected","false")}),this.setAttribute("aria-selected","true");var n=this.dataset.filter;i.forEach(function(t){"all"===n||t.dataset.type===n?t.classList.remove("hidden"):t.classList.add("hidden")})})})}}function l(){t(),e(),i(),n(),a(),o(),r(),s()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l(),window.CivicOne=window.CivicOne||{},window.CivicOne.initOfflineBanner=t,window.CivicOne.initFormOfflineProtection=function(){document.querySelectorAll("form").forEach(function(t){t.addEventListener("submit",function(t){navigator.onLine||(t.preventDefault(),alert("You are offline. Please connect to the internet to save changes."))})})},window.CivicOne.initScrollToBottom=e,window.CivicOne.initAutoDismissBanners=i,window.CivicOne.initConfirmDelete=n,window.CivicOne.initCharacterCounters=a,window.CivicOne.initSmoothScroll=o,window.CivicOne.initGovukTabs=r,window.CivicOne.initFilterTabs=s}();